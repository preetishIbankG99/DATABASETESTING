/*1334363184,169917812,JIT Construction: v541309,en_US*/

if (!window.FB) {FB = {};} if(!FB.dynData) { FB.dynData = {"site_vars":{"canvas_client_compute_content_size_method":1,"use_postMessage":0,"use_xdProxy":0,"use_ui_server":1,"monitor_usage_regex":"somethingtoputhere.com|huffingtonpost.com|lala.com","monitor_usage_rate":0.05,"enable_custom_href":1},"ui_server_dialogs":{"bookmark.add":1,"friends.add":1},"resources":{"base_url_format":"http:\/\/{0}.connect.facebook.com\/","base_cdn_url":"http:\/\/static.ak.fbcdn.net\/","api_channel":1333985515,"api_server":1333985515,"www_channel":1333985476,"xd_proxy":1333985380,"xd_comm_swf_url":"http:\/\/connect.facebook.net\/rsrc.php\/v1\/yQ\/r\/f3KaqM7xIBg.swf","share_button":"http:\/\/static.ak.fbcdn.net\/rsrc.php\/v1\/yg\/r\/yZiDLhSvAE9.gif","login_img_dark_small_short":"http:\/\/static.ak.fbcdn.net\/rsrc.php\/v1\/y2\/r\/ECSptXRJiXu.gif","login_img_dark_medium_short":"http:\/\/static.ak.fbcdn.net\/rsrc.php\/v1\/yN\/r\/WMAGVllinGS.gif","login_img_dark_medium_long":"http:\/\/static.ak.fbcdn.net\/rsrc.php\/v1\/yq\/r\/CtXTsD9gwTy.gif","login_img_dark_large_short":"http:\/\/static.ak.fbcdn.net\/rsrc.php\/v1\/yg\/r\/di8GQ4yWYmF.gif","login_img_dark_large_long":"http:\/\/static.ak.fbcdn.net\/rsrc.php\/v1\/yz\/r\/WuhUANysBjg.gif","login_img_light_small_short":"http:\/\/static.ak.fbcdn.net\/rsrc.php\/v1\/yG\/r\/HPpl_Q9ir03.gif","login_img_light_medium_short":"http:\/\/static.ak.fbcdn.net\/rsrc.php\/v1\/yG\/r\/QVAKZwo2mNu.gif","login_img_light_medium_long":"http:\/\/static.ak.fbcdn.net\/rsrc.php\/v1\/yA\/r\/11hJsvQEMup.gif","login_img_light_large_short":"http:\/\/static.ak.fbcdn.net\/rsrc.php\/v1\/yq\/r\/RwaZQIP0ALn.gif","login_img_light_large_long":"http:\/\/static.ak.fbcdn.net\/rsrc.php\/v1\/y6\/r\/kGCxkZx-uZa.gif","login_img_white_small_short":"http:\/\/static.ak.fbcdn.net\/rsrc.php\/v1\/yu\/r\/HSGgAQzgm6f.gif","login_img_white_medium_short":"http:\/\/static.ak.fbcdn.net\/rsrc.php\/v1\/yJ\/r\/a3H8zoa1Ymj.gif","login_img_white_medium_long":"http:\/\/static.ak.fbcdn.net\/rsrc.php\/v1\/yK\/r\/McNhTwo6iLp.gif","login_img_white_large_short":"http:\/\/static.ak.fbcdn.net\/rsrc.php\/v1\/y_\/r\/vE_oh0zqP1Z.gif","login_img_white_large_long":"http:\/\/static.ak.fbcdn.net\/rsrc.php\/v1\/yc\/r\/bGxF25CxBsQ.gif","logout_img_small":"http:\/\/static.ak.fbcdn.net\/rsrc.php\/v1\/yL\/r\/_gsP01S3mwQ.gif","logout_img_medium":"http:\/\/static.ak.fbcdn.net\/rsrc.php\/v1\/y2\/r\/NhZ-RyMbOUr.gif","logout_img_large":"http:\/\/static.ak.fbcdn.net\/rsrc.php\/v1\/yf\/r\/C9lMHpC5ik8.gif"},"legacy_component_map":{"connect-css":"FB.Connect-css","FB.SharePro":"FB.Share","Api":"connect-old-features","Base":"connect-old-features","CanvasUtil":"connect-old-features","Common":"connect-old-features","Connect":"connect-old-features","Integration":"connect-old-features","XdComm":"connect-old-features","XFBML":"connect-old-features"}};} if (!FB.locale) {FB.locale = "en_US";} if (!FB.localeIsRTL) {FB.localeIsRTL = false;}


if(!window.FB)FB={};if(!FB.Monitor)FB.Monitor={wrapObject:function(a,b,c){if(typeof(a)!="object")return a;if(!FB.Monitor.loggingEnabled())return a;if(b=='FB.Debug'||b=='FB.HiddenContainer'||b=='FB.XdComm.Server'||b.indexOf('FBIntern')==0)return a;for(var d in a){var e=a[d];if(!a.hasOwnProperty(d)||typeof(e)!='function'||e.wrapped)continue;var f={containerName:b,functionName:d};a[d]=FB.Monitor._monitorWrapper(e,a,c,f);a[d].wrapped=true;}return a;},disableLogging:function(){FB.Monitor.loggingEnabledCache=false;},loggingEnabled:function(){if(FB.Monitor.loggingEnabledCache===null){var a=FB.dynData&&FB.dynData.site_vars&&FB.dynData.site_vars.monitor_usage_regex;if(!a){FB.Monitor.loggingEnabledCache=false;}else{var b=new RegExp(a),c=FB.dynData.site_vars.monitor_usage_rate;FB.Monitor.loggingEnabledCache=b.test(document.domain)?(Math.random()/c)<1:false;}}return FB.Monitor.loggingEnabledCache;},externalCallback:function(a){if(typeof(a)!='function')return a;return function(){var b=FB.Monitor.internalCallStackDepth;FB.Monitor.internalCallStackDepth=0;var c=Array.prototype.slice.call(arguments),d=a.apply(this,c);FB.Monitor.internalCallStackDepth=b;return d;};},_monitorWrapper:function(a,b,c,d){return function(){var e=Array.prototype.slice.call(arguments);context=c?this:(b||window);d=d||{containerName:'unknown',functionName:'unknown'};if(FB.Monitor.internalCallStackDepth==0)if(d.functionName.substr(0,1)!='_')FB.Monitor.logFunction(d,e);++FB.Monitor.internalCallStackDepth;var f=new Date();try{var g=a.apply(context,e);}finally{var h=new Date();--FB.Monitor.internalCallStackDepth;var i=h.getTime()-f.getTime();if(i)FB.Monitor.logFunction(d,[],i);}return g;};},logFunction:function(a,b,c){var d=[];for(var e=0;e<b.length;e++){var f=b[e];d[e]=f?f.toString():f;}FB.Monitor.log("functions",a.containerName+"."+a.functionName,{elapsed:c});},logXFBML:function(a){var b={};for(var c=0;c<a.attributes.length;++c){var d=a.attributes[c];if(d.specified!==false&&d.nodeName&&d.nodeValue&&d.nodeName!="class")b[d.nodeName]=d.nodeValue.toString();}var e=a.nodeName.toLowerCase();FB.Monitor.log("tags",e,{args:b});},log:function(a,b,c){if(!FB.Monitor.loggingEnabled())return;var d={functions:101,tags:102};c.lid=d[a];c.name=b;FB.Monitor.loggingQueue.push(c);FB.Monitor.scheduleSend();},scheduleSend:function(){if(!FB.Monitor.pendingTimer)FB.Monitor.pendingTimer=setTimeout(FB.Monitor.send,FB.Monitor.timerInterval);},send:function(){FB.Monitor.pendingTimer=false;var a=FB.Monitor.loggingEnabled();FB.Monitor.loggingEnabledCache=false;try{if(FB.MonitorSender){while(FB.Monitor.loggingQueue.length>0)if(!FB.MonitorSender.send())break;}else FB.Monitor.timerInterval*=1.2;}finally{if(FB.Monitor.loggingQueue.length!==0)FB.Monitor.scheduleSend();FB.Monitor.loggingEnabledCache=a;}},timerInterval:6*1000,internalCallStackDepth:0,loggingQueue:[],pendingTimer:false,loggingEnabledCache:null};
if(!window.FB)FB={};FB.forEach=function(a,b,c){if(Object.prototype.toString.apply(a)==='[object Array]'){if(a.forEach){a.forEach(b);}else for(var d=0,e=a.length;d<e;d++)b(a[d],d,a);}else for(var f in a)if(c||a.hasOwnProperty(f))b(a[f],f,a);};FB.copy=function(a,b,c){FB.forEach(b,function(d,e){if(c||typeof a[e]==='undefined')a[e]=d;});};FB.copy(FB,{$:function(a){return document.getElementById(a);},TypeLoader:{NOTIFY:{},LOADED_MODULES:{},LOADED_CLASSES:{},resolve:function(a,b,c){for(var d=0,e=b.length;d<e;d++){var f=b[d];if(f==='')continue;if(typeof a[f]==='undefined')if(c){a[f]={};}else return false;a=a[f];}return a;},provide:function(a,b,c){FB.Monitor.wrapObject(b,a,false);var d=this.resolve(window,a.split('.'),true);if(c||!this.LOADED_MODULES[a]){FB.copy(d,b,true);if(b._onLoad)d._onLoad();}this.LOADED_MODULES[a]=true;},subclass:function(a,b,c){if(this.LOADED_CLASSES[a])return;if(b!=='FB.Class'&&!this.LOADED_CLASSES[b]){FB.Log.debug('"'+a+'" needs to wait for "'+b+'"');var d=FB.redo(arguments,this);this.NOTIFY[b]?this.NOTIFY[b].push(d):this.NOTIFY[b]=[d];return;}var e=this.resolve(window,b.split('.')),f=e.extend(c),g=this.NOTIFY[a],h=a.split('.'),i=this.resolve(window,h,true),j=h.pop();FB.Monitor.wrapObject(f.prototype,a,true);FB.Monitor.wrapObject(f,a,false);FB.copy(f,i);this.resolve(window,h)[j]=f;this.LOADED_CLASSES[a]=true;if(g){FB.forEach(g,function(k){k();});delete this.NOTIFY[a];}}},bind:function(){var a=Array.prototype.slice.call(arguments),b=a.shift(),c=a.shift(),d=function(){++FB.Monitor.internalCallStackDepth;var e=b.apply(c,a.concat(Array.prototype.slice.call(arguments)));--FB.Monitor.internalCallStackDepth;return e;};d._targets=[c,b];return d;},redo:function(a,b){var c=Array.prototype.slice.call(a);c.unshift(b);c.unshift(a.callee);return FB.bind.apply(FB,c);},_secure:(window.location.href.indexOf('https')===0)||(window.name.indexOf('_fb_https')>-1),isSecure:function(){return FB._secure;}});FB.provide=FB.bind(FB.TypeLoader.provide,FB.TypeLoader);FB.subclass=FB.bind(FB.TypeLoader.subclass,FB.TypeLoader);
(function(){var a=false,b=/xyz/.test(function(){xyz;})?/\b_super\b/:/.*/;FB.Class=function(){};FB.Class.extend=function(c){var d=this.prototype;a=true;var e=new this();a=false;FB.forEach(c,function(g,h){e[h]=typeof g==="function"&&typeof d[h]==="function"&&b.test(g)?(function(i,j){return function(){var k=this._super;this._super=d[i];var l=j.apply(this,arguments);this._super=k;return l;};})(h,g):g;});var f=function(){if(!a){var g;if(this instanceof f){g=this;}else{a=true;g=new f();a=false;}if(g.init)g.init.apply(g,arguments);return g;}};f.prototype=e;f.constructor=f;f.extend=FB.Class.extend;return f;};})();
FB.provide('FB.Log',{level:-1,Level:{DEBUG:3,INFO:2,WARNING:1,ERROR:0},_helper:function(){var a=Array.prototype.slice.call(arguments),b=a.shift(),c=a.shift();if(this.level>=c&&window.console)(console[b]||console.log).apply(console,a);}});FB.provide('FB.Log',{debug:FB.bind(FB.Log._helper,FB.Log,'debug',FB.Log.Level.DEBUG),info:FB.bind(FB.Log._helper,FB.Log,'info',FB.Log.Level.INFO),warn:FB.bind(FB.Log._helper,FB.Log,'warn',FB.Log.Level.WARNING),error:FB.bind(FB.Log._helper,FB.Log,'error',FB.Log.Level.ERROR)},true);
if(!window.FB)FB={};if(!FB.Type){FB.Type={createNamespace:function(a){var b=window,c=a.split('.');for(var d=0;d<c.length;d++){var e=c[d],f=b[e];if(!f)b[e]=f={};b=f;}return b;},createEnum:function(a,b,c){if(this.getObj(a))return;var d=function(){};d.prototype=b;for(var e in b)d[e]=b[e];if(c)d.__flags=true;this.setObj(a,d);},createClass2:function(cls,baseType){if(baseType&&typeof(baseType)=="string")baseType=eval(baseType);cls.prototype.constructor=cls;this.extend(cls,FB.Type.Methods);cls.__baseType=baseType||Object;if(baseType)cls.__basePrototypePending=true;},setObj:function(fullName,value){var i=fullName.lastIndexOf('.'),objName,scope=window;if(i>0){var ns=fullName.substring(0,i);this.createNamespace(ns);objName=fullName.substring(i+1);scope=eval(ns);}else objName=fullName;scope[objName]=value;},getObj:function(a){var b=window,c=a.split('.');for(var d=0;d<c.length;d++){var e=c[d];b=b[e];if(!b)break;}return b;},createClass:function(a,b){if(this.getObj(a))return;if(arguments.length==1&&typeof(a)!="string"){return this._createClass(a);}else this.setObj(a,this._createClass(b));},_createClass:function(a){var b=a.ctor||function(){};if(a.static_ctor)this.addStaticInit(a.static_ctor);if(a.instance)b.prototype=a.instance;if(a['static'])this.extend(b,a['static']);this.createClass2(b,a.base);return b;},addStaticInit:function(a){if(!FB.Type._pendingInits)FB.Type._pendingInits=[];FB.Type._pendingInits[FB.Type._pendingInits.length]=a;window.setTimeout(FB.Type.runPendingInits,0);},runPendingInits:function(){if(FB.Type._pendingInits){var a=FB.Type._pendingInits;FB.Type._pendingInits=null;var b=a.length;for(var c=0;c<b;c++)a[c]();}},extend:function(a,b){for(var c in b)a[c]=b[c];return a;},getInstanceType:function(a){return a.constructor;}};FB.Type.Methods={setupBase:function(){if(this.__basePrototypePending){var a=this.__baseType;if(a.__basePrototypePending)a.setupBase();for(var b in a.prototype){var c=a.prototype[b];if(!this.prototype[b])this.prototype[b]=c;}delete this.__basePrototypePending;}},constructBase:function(a,b){if(this.__basePrototypePending)this.setupBase();if(!b){this.__baseType.apply(a);}else this.__baseType.apply(a,b);},callBase:function(a,b,c){var d=this.__baseType.prototype[b];if(!c){return d.apply(a);}else return d.apply(a,c);},get_baseType:function(){return this.__baseType||null;}};}
FB.provide('FB.Debug',{logLevel:0,assert:function(a,b){if(FB.Debug.logLevel>0&&!a){b='Assert failed: '+b;if(confirm(b+'\r\n\r\nBreak into debugger?'))FB.Debug._fail(b);}},writeLine:function(a){if(FB.Debug.logLevel>0)if(window.Debug&&window.Debug.writeln){window.Debug.writeln(a);}else if(window.console){if(window.console.debug){window.console.debug(a);}else if(window.console.log)window.console.log(a);}else if(window.opera&&window.opera.postError)window.opera.postError(a);},logLine:function(a,b){if(a<=FB.Debug.logLevel)FB.Debug.writeLine(b);},_fail:function(a){FB.Debug.writeLine(a);debugger;},_dumpCore:function a(b,c,d,e,f){if(c===null){b.appendLine(e+d+': null');return;}switch(typeof(c)){case 'undefined':b.appendLine(e+d+': undefined');break;case 'number':case 'string':case 'boolean':b.appendLine(e+d+': '+c);break;default:if(c instanceof Date||c instanceof RegExp){b.appendLine(e+d+': '+c);break;}if(FB.Sys.contains(f,c)){b.appendLine(e+d+': ...');break;}f[f.length]=c;var g=e+'  ';if(c.tagName){b.appendLine(e+d+': <'+c.tagName+'>');var h=c.attributes;for(var i=0;i<h.length;i++){var j=h[i].nodeValue;if(j)FB.Debug._dumpCore(b,j,h[i].nodeName,g,f);}}else{b.appendLine(e+d+': ');for(var k in c){var l=c[k];if(!(l instanceof Function))FB.Debug._dumpCore(b,l,k,g,f);}}FB.Sys.remove(f,c);break;}},dump:function a(b,c){if((!c||!c.length)&&(b!==null))c=typeof(b);if(!c||!c.length)return;var d=new FB.StringBuilder();FB.Debug._dumpCore(d,b,c,'',[]);FB.Debug.writeLine(d.toString());},fail:function a(b){FB.Debug._fail(b);}});FB.FBDebug=FB.Debug;
FB.provide('FB.XdComm._packetType',{data:0,dataFragment:1,dataFragmentEnd:2,udpSingle:3,ack:4});
FB.Sys=function(){};FB.Sys.isUndefined=function(a){return (a===undefined);};FB.Sys.isNullOrUndefined=function(a){return (a===null)||(a===undefined);};FB.Sys.isNullOrEmpty=function(a){return !a||!a.length;};FB.Sys.parseBool=function(a){return (a.toLowerCase()=='true');};FB.Sys.trim=function(a){return a.replace(/^\s*|\s*$/g,'');};FB.Sys.compare=function(a,b,c){if(c){if(a)a=a.toUpperCase();if(b)b=b.toUpperCase();}a=a||'';b=b||'';if(a==b)return 0;if(a<b)return -1;return 1;};FB.Sys.quote=function(a){var b={'\b':'\\b','\t':'\\t','\n':'\\n','\f':'\\f','\r':'\\r','"':'\\"','\\':'\\\\'},c,d,e,f,g=/["\\\x00-\x1f\x7f-\x9f]/g,h;return g.test(a)?'"'+a.replace(g,function(i){var j=b[i];if(j)return j;j=i.charCodeAt();return '\\u00'+Math.floor(j/16).toString(16)+(j%16).toString(16);})+'"':'"'+a+'"';};FB.Sys.startsWith=function(a,b){return a.substring(0,b.length)==b;};FB.Sys.format=function(a){if(!FB.Sys.format._formatRE)FB.Sys.format._formatRE=/(\{[^\}^\{]+\})/g;var b=arguments;return a.replace(FB.Sys.format._formatRE,function(c,d){var e=parseInt(d.substr(1)),f=b[e+1];if(FB.Sys.isNullOrUndefined(f))return '';return f.toString();});};FB.Sys.htmlDecode=function(a){htmlDecMap={'&amp;':'&','&lt;':'<','&gt;':'>','&quot;':'"'};htmlDecRE=/(&amp;|&lt;|&gt;|&quot;)/gi;a=a.replace(htmlDecRE,function(b,c){return htmlDecMap[c];});return a;};FB.Sys.htmlEncode=function(a){htmlEncMap={'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;'};htmlEncRE=/([&<>"])/g;if(htmlEncRE.test(a))a=a.replace(htmlEncRE,function(b,c){return htmlEncMap[c];});return a;};FB.Sys.endsWith=function(a,b){return a.length>=b.length&&a.substring(a.length-b.length)==b;};FB.Sys.contains=function(a,b){var c=FB.Sys.indexOf(a,b);return (c>=0);};FB.Sys.add=function(a,b){a[a.length]=b;};FB.Sys.remove=function(a,b){var c=FB.Sys.indexOf(a,b);if(c>=0){a.splice(c,1);return true;}return false;};FB.Sys.indexOf=function(a,b){var c=a.length;if(c)for(var d=0;d<c;d++)if(a[d]===b)return d;return -1;};FB.Sys.addRange=function(a,b){var c=b.length;for(var d=0;d<c;d++)a[a.length]=b[d];};FB.Sys.clear=function(a){if(a.length>0)a.splice(0,a.length);};FB.Sys.clearKeys=function(a){for(var b in a)delete a[b];};FB.Sys.containsKey=function(a,b){return a[b]!==undefined;};FB.Sys.getKeyCount=function(a){var b=0;for(var c in a)b++;return b;};FB.Sys.isAssignableFrom=function(a,b){while(a!=b)if(a.__baseType){a=a.__baseType;}else return false;return true;};FB.Sys.createException=function(a,b,c){var d=new Error(a);if(b)d.userData=b;if(c)d.innerException=c;return d;};FB.Type.createClass2(FB.Sys);
FB.Type.createClass('FB.StringBuilder',{ctor:function(a){if((a!==undefined)&&(a!==null)){this._parts=[a];}else this._parts=[];},instance:{get_isEmpty:function(){return (this._parts.length==0);},append:function(a){if((a!==undefined)&&(a!==null))FB.Sys.add(this._parts,a);},appendLine:function(a){this.append(a);this.append('\r\n');},clear:function(){this._parts.clear();},toString:function(){return this._parts.join('');}}});if(!window.Delegate)window.Delegate=FB.Delegate;
FB.subclass('FB.XdComm._fragDataHolder','FB.Class',{init:function(){this._segments={};this._totalSegments=-1;},_addSegment:function(a){if(a.t===FB.XdComm._packetType.dataFragmentEnd)this._totalSegments=a.fid+1;if(!a.fid)this._combinedPacket=a;this._segments[a.fid.toString()]=a.d;if(this._totalSegments!==-1&&this._totalSegments===FB.Sys.getKeyCount(this._segments)){var b=new FB.StringBuilder();for(var c=0;c<this._totalSegments;c++)b.append(this._segments[c.toString()]);this._combinedPacket.d=b.toString();this._combinedPacket.t=FB.XdComm._packetType.data;return this._combinedPacket;}else return null;},_combinedPacket:null});
FB.subclass('FB.ArrayEnumerator','FB.Class',{init:function(a){this._array=a;this._index=-1;},get_current:function(){return this._array[this._index];},moveNext:function(){this._index++;return (this._index<this._array.length);},reset:function(){this._index=-1;}});
FB._create__packet=function(){return {};};
FB.JSON=function a(){};FB.JSON.deserialize=function(a,b){if(FB.Sys.isNullOrEmpty(a))return null;if(b){if(!FB.JSON._64bitIntRegex)FB.JSON._64bitIntRegex=new RegExp('([^\\\\]\"\:)([0-9]{11,20})(,|}|])','gm');a=a.replace(FB.JSON._64bitIntRegex,'$1"$2"$3');}return FB.JSON.parse(a);};if(window.JSON&&typeof JSON.parse==='function'){FB.JSON.parse=JSON.parse;}else FB.JSON.parse=function(text,reviver){var j;function walk(holder,key){var k,v,value=holder[key];if(value&&typeof value==='object')for(k in value)if(Object.hasOwnProperty.call(value,k)){v=walk(value,k);if(v!==undefined){value[k]=v;}else delete value[k];}return reviver.call(holder,key,value);}var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g;cx.lastIndex=0;if(cx.test(text))text=text.replace(cx,function(a){return '\\u'+('0000'+a.charCodeAt(0).toString(16)).slice(-4);});if(/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,'@').replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,']').replace(/(?:^|:|,)(?:\s*\[)+/g,''))){j=eval('('+text+')');return typeof reviver==='function'?walk({'':j},''):j;}throw new SyntaxError('JSON.parse');};FB.JSON.serialize=function(a){if(FB.Sys.isNullOrUndefined(a))return '';var b=new FB.StringBuilder();FB.JSON._serializeCore(b,a);return b.toString();};FB.JSON._serializeCore=function(a,b){if(FB.Sys.isNullOrUndefined(b)){a.append('null');return;}var c=typeof(b);switch(c){case 'boolean':a.append(b.toString());return;case 'number':a.append((isFinite(b))?b.toString():'null');return;case 'string':a.append(FB.Sys.quote(b));return;case 'object':if(b instanceof Array){a.append('[');var d=b,e=d.length,f=true;for(var g=0;g<e;g++){if(typeof(d[g])=='function')continue;if(f){f=false;}else a.append(',');FB.JSON._serializeCore(a,d[g]);}a.append(']');}else if(b instanceof Date){var h=b,i=Date.UTC(h.getUTCFullYear(),h.getUTCMonth(),h.getUTCDate(),h.getUTCHours(),h.getUTCMinutes(),h.getUTCSeconds(),h.getUTCMilliseconds());a.append('\"\\@');a.append(i.toString());a.append('@\"');}else if(b instanceof RegExp){a.append(b.toString());}else{a.append('{');var f=true,j=b;for(var k in j){var l={key:k,value:j[k]};if(FB.Sys.startsWith(l.key,'$'))continue;if(typeof(l.value)=='function')continue;if(f){f=false;}else a.append(',');a.append('"'+l.key+'"');a.append(':');FB.JSON._serializeCore(a,l.value);}a.append('}');}return;default:a.append('null');return;}};
FB.provide('FB.XdComm.PageRelation',{parent:1,child:2,self:3,opener:4,openee:5});
FB.provide('FBIntern.HostName',{IE:0,MOZILLA:1,SAFARI:2,OPERA:3,OTHER:4});
FB.subclass('FBIntern.HostInfo','FB.Class',{init:function(){var a=window.navigator.userAgent.toLowerCase(),b,c=null;if((b=a.indexOf('opera'))>=0){this._hostName=FBIntern.HostName.OPERA;}else if((b=a.indexOf('msie'))>=0){this._hostName=FBIntern.HostName.IE;c=a.substr(b+5);}else if((b=a.indexOf('firefox'))>=0){this._hostName=FBIntern.HostName.MOZILLA;c=a.substr(b+8);}else if((b=a.indexOf('safari'))>=0){this._hostName=FBIntern.HostName.SAFARI;c=a.substr(b+7);}else if((b=a.indexOf('gecko'))>=0){this._hostName=FBIntern.HostName.MOZILLA;c=window.navigator.appVersion;}else this._hostName=FBIntern.HostName.OTHER;if(c){var d=parseFloat(c);this.majorVersion=parseInt(d);if((b=c.indexOf('.'))>=0)this.minorVersion=parseInt(c.substr(b+1));}},get_hostName:function(){return this._hostName;},majorVersion:0,minorVersion:0,_hostName:0});
FB.subclass('FBIntern.AppInfo','FB.Class',{init:function(){this._hostInfo=new FBIntern.HostInfo();},get_hostInfo:function(){return this._hostInfo;},_hostInfo:null});FB.provide('FBIntern.AppInfo',{_onLoad:function(){FBIntern.AppInfo._current=null;},get_singleton:function(){if(!FBIntern.AppInfo._current)FBIntern.AppInfo._current=new FBIntern.AppInfo();return FBIntern.AppInfo._current;}});
FB.subclass('FBIntern.FbGlobals','FB.Class',{init:function(){}});FB.provide('FBIntern.FbGlobals',{get_fB_StaticResourceVersions:function(){return FB.dynData?FB.dynData.resources:{};}});
FB.subclass('FBIntern.Uri','FB.Class',{init:function(a){this._uriString=a;},get_uriString:function(){return this._uriString;},get_pathAndQuery:function(){var a=this._uriString.indexOf('://');if(a>=0){a=this._uriString.indexOf('/',a+3);if(a>=0)return this._uriString.substr(a);}return this._uriString;},get_schemeAndDomain:function(){var a=this._uriString.indexOf('http://');if(a)a=this._uriString.indexOf('https://');if(!a){var b=this._uriString.indexOf('/',8);if(b>=0){return this._uriString.substr(0,b);}else return this._uriString;}throw new Error('This object is not an absolute URI.');},get_queryParameters:function(){if(!this._queryParameters){this._queryParameters={};var a,b=this._uriString.indexOf('?');if(b>-1){a=this._uriString.substr(b+1);b=a.indexOf('#');if(b>0)a=a.substring(0,b-1);var c=a.split('&'),d=new FB.ArrayEnumerator(c);while(d.moveNext()){var e=d.get_current();b=e.indexOf('=');if(b>0){var f=e.substr(0,b),g=e.substr(b+1);this._queryParameters[f]=decodeURIComponent(g);}}}}return this._queryParameters;},get_domain:function(){var a=this.get_domainAndPath(),b=a.indexOf('/');if(b>=0)a=a.substring(0,b);return a;},get_domainAndPath:function(){var a=this._uriString,b=a.indexOf('#');if(b>=0)a=a.substring(0,b);var c=a.indexOf('?');if(c>=0)a=a.substring(0,c);var d=a.indexOf('://');if(d>=0)a=a.substring(d+3);return a;},_queryParameters:null,_uriString:null});FB.provide('FBIntern.Uri',{create:function(a,b){var c;if(FBIntern.Uri.isAbsoluteUri(b)){c=b;}else if(b.charAt(0)==='/'){c=a.get_schemeAndDomain()+b;}else{var c=a.get_uriString(),d=c.indexOf('?');if(d>0)c=c.substr(0,d);var e=c.lastIndexOf('/');c=c.substr(0,e+1)+b;}return new FBIntern.Uri(c);},isAbsoluteUri:function(a){return a.indexOf('://')>0;},addQueryParameters:function(a,b){if(a.indexOf('?')>0){return a+'&'+b;}else return a+'?'+b;},createQueryString:function(a){var b='',c=a;for(var d in c){var e={key:d,value:c[d]};b+=e.key+'='+encodeURIComponent((e.value))+'&';}if(b!==''&&b.charAt(b.length-1)==='&')b=b.substr(0,b.length-1);return b;},bothHaveSameDomain:function(a,b){var c=new FBIntern.Uri(a),d=new FBIntern.Uri(b),e=c.get_domain().toLowerCase(),f=d.get_domain().toLowerCase();return e==f;}});
FB._create_Point=function(a,b){var c={};c.x=a;c.y=b;return c;};
FB._create_Size=function(a,b){var c={};c.w=a;c.h=b;return c;};
FB.subclass('FBIntern.Utility','FB.Class',{init:function(){}});FB.provide('FBIntern.Utility',{getFacebookUrl:function(a){var b=FBIntern.FbGlobals.get_fB_StaticResourceVersions().base_url_format;if(FB.isSecure()){if(a==='static.ak')a='www';b.replace('http:','https:');}return FB.Sys.format(b,a);},getNonConnectFacebookUrl:function(a){var b=FBIntern.Utility.getFacebookUrl(a);if(b.indexOf('connect.facebook.com')>=0){return b.replace('connect.facebook.com','facebook.com');}else return b;},createFacebookUrl:function(a,b,c,d){var e;if(d){e=FBIntern.Utility.getFacebookUrl(a);}else e=FBIntern.Utility.getNonConnectFacebookUrl(a);e+=b;var f=FB.locale;if(!FB.Sys.containsKey(c,'locale')&&!FB.Sys.isNullOrEmpty(f))c.locale=f;c.sdk='edgar';return FBIntern.Uri.addQueryParameters(e,FBIntern.Uri.createQueryString(c));},id64BitEquals:function(a,b){var c='',d='';if(typeof(a)==='number'){if(a>2147483647)FB.FBDebug.logLine(1,'This integer is great than 32 bit and can\'t be properly in comparison in JavaScript. It should be stored as string instead.');c=a.toString();}else c=a;if(typeof(b)==='number'){if(b>2147483647)FB.FBDebug.logLine(1,'This integer is great than 32 bit and can\'t be properly in comparison in JavaScript. It should be stored as string instead.');d=b.toString();}else d=b;return !FB.Sys.compare(c,d,false);},waitForLoaded:function(a,b){var c=null;c=function(d){FBIntern.Utility.removeEventListener(a,'load',c);b();};FBIntern.Utility.addEventListener(a,'load',c);},get_windowLocation:function(){var a=FB._create_Point(0,0),b,c;if(window.screenLeft){b=window.screenLeft;c=window.screenTop;}else{b=window.screenX;c=window.screenY;}a.x=b;a.y=c;if(FB.Sys.isUndefined(a.x))a.x=0;if(FB.Sys.isUndefined(a.y))a.y=0;return a;},get_windowSize:function(){var a=FB._create_Size((window&&window.innerWidth)||(document&&document.documentElement&&document.documentElement.clientWidth)||(document&&document.body&&document.body.clientWidth)||0,(window&&window.innerHeight)||(document&&document.documentElement&&document.documentElement.clientHeight)||(document&&document.body&&document.body.clientHeight)||0);return a;},get_documentSize:function(){var a=FB._create_Size(document.body.scrollWidth,document.body.scrollHeight);if(a.w<=0||a.w>document.documentElement.scrollWidth)a.w=document.documentElement.scrollWidth;if(a.h<=0||a.h>document.documentElement.scrollHeight)a.h=document.documentElement.scrollHeight;if(window&&window.getComputedStyle){var b=window.getComputedStyle(document.body,null),c=parseInt(b.getPropertyValue('height'),10);if(c<a.h)a.h=c;}return a;},get_isInUserActionCallstack:function(){var a=FBIntern.Utility.get_currentEvent();if(!a){return false;}else{var b=['onclick','oncontextmenu','ondblclick','onfocus','onkeydown','onkeypress','onkeyup','onmousedown','onmousemove','onmouseout','onmouseover','onmouseup','click','ctextmenu','dblclick','focus','keydown','keypress','keyup','mousedown','mousemove','mouseout','mouseover','mouseup'],c=a.type;return c&&FB.Sys.contains(b,c);}},get_currentEvent:function(){var a=window.event;if(!a&&FBIntern.AppInfo.get_singleton().get_hostInfo().get_hostName()===FBIntern.HostName.MOZILLA){var b=arguments.callee,c=[],d;while(true){FB.Sys.add(c,b);d=b.caller;if(!d)break;if(FB.Sys.indexOf(c,d)>=0){FB.FBDebug.logLine(1,'FB.Connect.get_isInUserActionCallstack(): we can\'t correctly make a detection because of recursion in call stack');return null;}b=d;}a=b.arguments.length==1&&b.arguments[0]&&b.arguments[0].type?b.arguments[0]:null;}return a;},addEventListener:function(a,b,c){if(FBIntern.AppInfo.get_singleton().get_hostInfo().get_hostName()!==FBIntern.HostName.IE){(a).addEventListener(b,c,false);}else{c._ieEventHandler=function(){c(window.event);};(a).attachEvent('on'+b,(c._ieEventHandler));}},removeEventListener:function(a,b,c){if(FBIntern.AppInfo.get_singleton().get_hostInfo().get_hostName()!==FBIntern.HostName.IE){(a).removeEventListener(b,c,false);}else (a).detachEvent('on'+b,(c._ieEventHandler));},createXMLHttpRequest:function(){if(!FB.XMLHttpRequest)if(!window.XMLHttpRequest){FB.XMLHttpRequest=function(){var a=['Msxml2.XMLHTTP','Microsoft.XMLHTTP'];for(var b=0;b<a.length;b++)try{var d=new ActiveXObject(a[b]);return d;}catch(c){}};}else FB.XMLHttpRequest=window.XMLHttpRequest;return new FB.XMLHttpRequest();},getIFrameDocument:function(a,b,c){var d=(window.self.frames)[a],e=null;if(window.location.hostname===document.domain)try{e=d.document;}catch(f){FB.FBDebug.logLine(1,'Failed to get frameWindow.document, will try again later');}if(e){c(e);}else FBIntern.Utility.waitForLoaded(b,function(){c(d.document);});},isConnectSession:function(a){if(!a)throw new Error('session key is null');return a.substr(0,2)==='3.';},isStrInt:function(a){return parseInt(a).toString()===a;},createException:function(a,b,c){var d=new Error(a);if(b)d.userData=b;if(c)d.innerException=c;return d;},getSiteVar:function(a,b){var c=FB.dynData;if(c){var d=c.site_vars;if(FB.Sys.containsKey(d,a))return d[a];}return b;},setSiteVar:function(a,b){var c=FB.dynData.site_vars;c[a]=b;},paymentsLog:function(a,b){var c={step_id:a,api_key:b},d=FBIntern.Utility.getFacebookUrl('www')+'/connect/waterfall_log.php',e=FBIntern.Uri.addQueryParameters(d,FBIntern.Uri.createQueryString(c)),f=FB.$('FB_HiddenContainer');FB.FBDebug.assert(f,'Can\'t find the DOM element with id FB_HiddenContainer');var g=document.createElement('img');g.setAttribute('src',e);f.appendChild(g);}});
FB.subclass('FB.Delegate','FB.Class',{});FB.provide('FB.Delegate',{Null:function(){},_create:function(a){var b=function(){if(a.length==2){return a[1].apply(a[0],arguments);}else{var c=a.slice();for(var d=0;d<c.length;d+=2)c[d+1].apply(c[d],arguments);return null;}};b._targets=a;return b;},create:function(a,b){if(!a)return b;return FB.Delegate._create([a,b]);},combine:function(a,b){if(!a){if(!b._targets)return FB.Delegate.create(null,b);return b;}if(!b){if(!a._targets)return FB.Delegate.create(null,a);return a;}var c=a._targets?a._targets:[null,a],d=b._targets?b._targets:[null,b];return FB.Delegate._create(c.concat(d));},remove:function(a,b){if(!a||(a===b))return null;if(!b)return a;var c=a._targets,d=null,e;if(b._targets){d=b._targets[0];e=b._targets[1];}else e=b;for(var f=0;f<c.length;f+=2)if((c[f]===d)&&(c[f+1]===e)){if(c.length==2)return null;c.splice(f,2);return FB.Delegate._create(c);}return a;}});if(!window.Delegate)window.Delegate=FB.Delegate;
if(!window.FB)FB={};if(!FB.Loader)FB.Loader={loaded:{},loading:{},loadedCss:{},loadedCallback:null,onScriptLoaded:function(a){var b=a.length;for(var c=0;c<b;c++){var d=a[c];FB.Loader.loaded[d]=true;}if(FB.Loader.loadedCallback)window.setTimeout(function(){FB.Loader.loadedCallback(a);},0);},loadCssComps:function(a){var b=FB.Loader.getStaticResourceUrl('connect.php/'+FB.locale+'/css/'+a.join('/'));if(!this.loadedCss[b]){var c=document.createElement('link');c.setAttribute('rel','stylesheet');c.setAttribute('type','text/css');c.setAttribute('href',b);document.getElementsByTagName('head')[0].appendChild(c);this.loadedCss[b]=true;}},getStaticResourceUrl:function(a){var b=FB.dynData.resources.base_url_format,c=(b.indexOf('https')===0)?'www':'static.ak';return b.replace('{0}',c)+a;}};
if(!FB.Bootstrap){FB.Bootstrap={requireFeatures:function(a,b){if(FB.Bootstrap.isXdChannel)return;if(a&&a.length&&FB.dynData&&FB.dynData.legacy_component_map){var c=FB.dynData.legacy_component_map,d=[];for(var e=0,f=a.length;e<f;e++){var g=a[e];if(c[g]){d.push(c[g]);}else d.push(g);}a=d;}var h={features:a,callback:FB.Monitor.externalCallback(b),completed:false};if(FB.Bootstrap._checkRequest(h))return;FB.Bootstrap._featureReqQueue.push(h);FB.Loader.loadedCallback=FB.Delegate.combine(FB.Loader.loadedCallback,FB.Bootstrap._onCompLoaded);FB.Bootstrap._transformFeatureList(a);var i={},j=[],e,k=a.length,l=0;for(e=0;e<k;e++){var m=a[e];if(!(FB.Loader.loaded[m]))if(!(FB.Loader.loaded[m]||FB.Loader.loading[m])){i[m]=true;j[j.length]=m;}}j.sort();var n=FB.Loader.getStaticResourceUrl('connect.php/'+FB.locale+'/js/'+j.join('/'));FB.Bootstrap.addScript(n);},_requireFeatures:function(a,b){this.requireFeatures(a,FB.bind(b));},_checkRequest:function(a){if(!a.completed){var b=0,c=a.features.length,d=0;for(b=0;b<c;b++){var e=a.features[b];if(FB.Loader.loaded[e])d++;}if(d==c){a.completed=true;if(a.callback)a.callback(true);}}return a.completed;},_transformFeatureList:function(a){var b={Api:true,CanvasUtil:true,Connect:true,XFBML:true},c=a.length,d=false,e={};for(var f=0;f<c;f++){e[a[f]]=true;if(b[a[f]])d=true;}if(d)for(var g in b)if(!e[g])a[a.length]=g;},ensureInit:function(a){if(!a)throw ("FB.ensureInit called without a valid callback");a=FB.Monitor.externalCallback(a);if(FB.Facebook&&FB.Facebook.get_initialized&&FB.Facebook.get_initialized().get_isReady()&&FB.Facebook.get_initialized().result)return a();FB.Bootstrap._requireFeatures(FB.Bootstrap.features,function(){FB.Facebook.get_initialized().waitForValue(true,a);});},init:function(a,b,c){FB.Bootstrap._requireFeatures(FB.Bootstrap.features,function(){if(FB.Facebook)FB.Facebook.init(a,b,c);});},addScript:function(a){var b,c=document.getElementsByTagName('script');if(c){var d=c.length;for(var e=0;e<d;e++){b=c[e];if(b.src==a)return;}}b=document.createElement("script");b.type="text/javascript";b.src=a;var f=document.getElementsByTagName('HEAD')[0]||document.body;f.appendChild(b);},setLocale:function(a,b){window.FB.locale=a;window.FB.localeIsRTL=b;},_initializeXdChannel:function(){FB.Bootstrap.isXdChannel=window.location.search.indexOf(FB.Bootstrap.fbc_channel_token)>=0;},_detectDocumentNamespaces:function(){if(document.namespaces&&!document.namespaces.item.fb)document.namespaces.add('fb');},createDefaultXdChannelUrl:function(){var a=location.protocol+'//'+location.hostname+location.pathname+location.search;if(location.search||location.search.length>0){a+='&';}else a+='?';a+='fbc_channel=1';return a;},_onCompLoaded:function(){var a=0,b=FB.Bootstrap._featureReqQueue.length;for(a=0;a<b;a++)FB.Bootstrap._checkRequest(FB.Bootstrap._featureReqQueue[a]);},_onLoad:function(){this._initializeXdChannel();this._detectDocumentNamespaces();},features:["XFBML","CanvasUtil"],fbc_channel_token:'fbc_channel=1',_featureReqQueue:[]};FB.Monitor.wrapObject(FB.Bootstrap,'FB.Bootstrap');window.FB_RequireFeatures=FB.Bootstrap.requireFeatures;window.FB.init=FB.Bootstrap.init;window.FB.ensureInit=FB.Bootstrap.ensureInit;FB.Bootstrap._onLoad();}
FB.subclass('FB.Waitable','FB.Class',{init:function(){},onChange:function(){if(this.__changed)this.__changed(this);},waitUntilReady:function(a){if(this.get_isReady()){a(this.result);}else{var b=null;b=FB.bind(function(c){this.remove_changed(b);a(this.result);},this);this.add_changed(b);}},waitForValue:function(a,b){this.waitForCondition(FB.bind(function(c){if(this.get_isReady()&&this.result===a){b();return true;}return false;},this));},waitForCondition:function(a){if(!a(this)){var b=null;b=FB.bind(function(c){if(a(c))this.remove_changed(b);},this);this.add_changed(b);}},resetChange:function(){this.__changed=null;},result:null,add_changed:function(a){this.__changed=FB.Delegate.combine(this.__changed,a);},remove_changed:function(a){this.__changed=FB.Delegate.remove(this.__changed,a);},__changed:null});
FB.subclass('FB.SimpleWaitable','FB.Waitable',{init:function(){this._super();},get_isReady:function(){return this._isReady;},_setResult:function(a,b){var c=typeof(a);if(this._isReady&&!b&&this.result===a&&(c==='undefined'||c==='number'||c==='string'))return;this.result=a;this._isReady=(!b);this.onChange();},_isReady:false});
FB.subclass('FBIntern.Flash','FB.Class',{init:function(){}});FB.provide('FBIntern.Flash',{_onLoad:function(){FBIntern.Flash.xdComm=null;FBIntern.Flash.curMajor=0;FBIntern.Flash.curMinor=0;FBIntern.Flash.versionDetected=false;},hasRequireVersion:function(){return FBIntern.Flash._verifyMinimumVersion(9,0);},_verifyMinimumVersion:function(a,b){if(!FBIntern.Flash.versionDetected){var c=['0','0'],d=FBIntern.AppInfo.get_singleton().get_hostInfo().get_hostName()===FBIntern.HostName.IE,e=navigator.plugins;if(e&&e.length>0){if(e['Shockwave Flash 2.0']||e['Shockwave Flash']){var f;if(e['Shockwave Flash 2.0']){f=(e['Shockwave Flash 2.0'].description);}else f=(e['Shockwave Flash'].description);var g=f.split(' ');c=g[2].split('.');}}else if(d){var h=null,i;try{i=new ActiveXObject('ShockwaveFlash.ShockwaveFlash.7');h=i.GetVariable('$version');}catch(j){}if(!c)try{i=new ActiveXObject('ShockwaveFlash.ShockwaveFlash.6');h='WIN 6,0,21,0';}catch(k){}if(!FB.Sys.isNullOrEmpty(h))c=h.split(' ')[1].split(',');}if(FBIntern.AppInfo.get_singleton().get_hostInfo().get_hostName()===FBIntern.HostName.MOZILLA){FB.FBDebug.logLine(1,'Cannot use Flash on Firefox due to a possible bug in Flash');FBIntern.Flash.curMajor=0;FBIntern.Flash.curMinor=0;}else if(FBIntern.AppInfo.get_singleton().get_hostInfo().get_hostName()===FBIntern.HostName.OPERA){FB.FBDebug.logLine(1,'Cannot use Flash on Opera due to a possible bug in Flash');FBIntern.Flash.curMajor=0;FBIntern.Flash.curMinor=0;}else if(window.location.protocol==='https:'&&d){FB.FBDebug.logLine(1,'Currenty, Flash is not used on IE in SSL pages');FBIntern.Flash.curMajor=0;FBIntern.Flash.curMinor=0;}else{FBIntern.Flash.curMajor=parseInt(c[0]);FBIntern.Flash.curMinor=parseInt(c[1]);}FBIntern.Flash.versionDetected=true;}return FBIntern.Flash.curMajor>a||(FBIntern.Flash.curMajor===a&&FBIntern.Flash.curMinor>=b);},_createFlashObject:function(a,b){var c;if(FBIntern.AppInfo.get_singleton().get_hostInfo().get_hostName()===FBIntern.HostName.IE){c=FB.Sys.format('<object width=\"1\" height=\"\"  id=\"{0}\" name=\"{1}\" type=\"application/x-shockwave-flash\" classid=\"clsid:d27cdb6e-ae6d-11cf-96b8-444553540000\" ><param name=\"movie\" value=\"{2}\" /> <param name=\"quality\" value=\"high\" /> <param name=\"bgcolor\" value=\"#869ca7\" /> <param name=\"allowScriptAccess\" value=\"always\" /> </object>',a,a,b);}else c=FB.Sys.format('<embed width=\'1\' height=\'1\' type=\'application/x-shockwave-flash\' pluginspage=\'http://get.adobe.com/flashplayer\' allowscriptaccess=\'always\' name=\'{0}\' id=\'{1}\' bgcolor=\'#869ca7\' quality=\'high\'  src=\'{2}\' />',a,a,b);var d=document.createElement('div');FB.$('FB_HiddenContainer').appendChild(d);d.innerHTML=c;if(FBIntern.AppInfo.get_singleton().get_hostInfo().get_hostName()===FBIntern.HostName.IE){var e=d.parentNode;while(e&&e.tagName!=='HTML'){if(e.tagName==='FORM'){window[a]=e[a];break;}e=e.parentNode;}return window[a];}else return document[a];},get_xdComm:function(){if(!FBIntern.Flash.xdComm&&FBIntern.Flash.hasRequireVersion()){FB.FBDebug.logLine(3,'Create Flash XdComm object');FBIntern.Flash.xdComm=new FB.SimpleWaitable();var a=null,b=false;window.FB_OnFlashXdCommReady=function(){FB.FBDebug.logLine(3,'Flash XdComm ready');b=true;if(a)FBIntern.Flash.xdComm._setResult(a);};a=FBIntern.Flash._createFlashObject('flashXdComm',FBIntern.FbGlobals.get_fB_StaticResourceVersions().xd_comm_swf_url);if(a&&b)FBIntern.Flash.xdComm._setResult(a);}return FBIntern.Flash.xdComm;}});
FB.subclass('FB.Enum','FB.Class',{});FB.provide('FB.Enum',{toString:function(a,b){return b.toString();}});
FB.provide('FB.XdComm.PacketDataFormat',{JSON:0,rawText:1,OBJ:2});
FB.provide('FB.HiddenContainer',{_onLoad:function(){if(document.getElementById('FB_HiddenContainer')==null){var a;try{var c=window.navigator.userAgent.toLowerCase().indexOf('msie')>=0&&window.attachEvent;if((!c||document.readyState=='completed')&&document.body){a=document.createElement('div');a.id="FB_HiddenContainer";a.style.position="absolute";a.style.top="-10000px";a.style.width="0px";a.style.height="0px";document.body.appendChild(a);}}catch(b){a=null;}if(!a)document.write('<div id="FB_HiddenContainer" '+'style="position:absolute; top:-10000px; left:-10000px; width:0px; height:0px;" >'+'</div>');}},get:function(){return FB.$('FB_HiddenContainer');}});
FB.subclass('FB.XdComm._receiveChannel','FB.Class',{init:function(a,b){this._fragDataDict={};this._ackList=[];this._id=a;this._endPoint=b;},_onReceivedPacket:function(a){FB.FBDebug.logLine(3,'XdComm: Received packet');var b=null;if(a.t===FB.XdComm._packetType.dataFragment||a.t===FB.XdComm._packetType.dataFragmentEnd){var c=this._fragDataDict[a.id.toString()];if(!c){c=new FB.XdComm._fragDataHolder();this._fragDataDict[a.id.toString()]=c;}b=c._addSegment(a);if(b)delete this._fragDataDict[b.id.toString()];}else b=a;if(b){if(!b.id){this._endPoint=new FB.XdComm.EndPoint(b.sf,b.sr,b.sc);if(this._queuedPackets){var d=new FB.ArrayEnumerator(this._queuedPackets);while(d.moveNext()){var e=d.get_current();this._onFullDataReceived(e);}this._queuedPackets=null;}}if(this._endPoint){this._onFullDataReceived(b);}else if(!this._queuedPackets){this._queuedPackets=[];FB.Sys.add(this._queuedPackets,b);}}},_onFullDataReceived:function(a){var b=FB.XdComm.Server.singleton;b._onFullDataReceived(a,this._endPoint);FB.Sys.add(this._ackList,a.id);if(this._ackList.length>5){if(FB.FBDebug.logLevel>4)FB.FBDebug.writeLine('ReceiveChannel.Ack: '+this._ackList.toString());var c=FB._create__packet();c.t=FB.XdComm._packetType.ack;c.sid=b._id;c.sc=b.get_receiverUrl();c.sf=window.name;c.sr=FB.XdComm._sendChannel._getReverseRelation(this._endPoint.relation);var d=b._createPacketUrl(c,this._endPoint);d+=encodeURIComponent(FB.JSON.serialize(this._ackList));b._removeIframe(this._ackIframe);this._ackIframe=b._createHiddenIFrame(d);FB.Sys.clear(this._ackList);}},_queuedPackets:null,_endPoint:null,_ackIframe:null,_id:null});
FB.subclass('FB.XdComm.EndPoint','FB.Class',{init:function(a,b,c){this.frameName=(!a)?'':a;this.relation=b;this.channelUrl=c;this.UID=0;},isEqual:function(a){return a.frameName===this.frameName&&a.relation===this.relation&&a.UID===this.UID;},frameName:null,relation:0,channelUrl:null,UID:0,origin:null});
FB.subclass('FB.XdComm._sendChannel','FB.Class',{init:function(a){this._iframes={};this._endPoint=a;},_send:function(a,b){var c=FB.XdComm.Server.singleton,d=FB.JSON.serialize(b),e=d.length,f=0,g=false,h=0;while(!g){var i=FB.XdComm._packetType.data,j=FB._create__packet();j.id=this._sendIdCount;if(!this._sendIdCount&&!f){j.sc=c.get_receiverUrl();j.sf=window.name;j.sr=FB.XdComm._sendChannel._getReverseRelation(this._endPoint.relation);}if(!f)j.h=a;var k;if(!f&&e<=c._maxPacketDataLength){k=d;g=true;}else{j.fid=h++;var l=e-f;if(l>c._maxPacketDataLength){l=c._maxPacketDataLength;i=FB.XdComm._packetType.dataFragment;}else{i=FB.XdComm._packetType.dataFragmentEnd;g=true;}k=d.substr(f,l);f+=l;}j.sid=c._id;j.t=i;var m=c._createPacketUrl(j,this._endPoint);m+=encodeURIComponent(k);this._addIframe(m,j);}this._sendIdCount++;},_onAck:function(a){if(FB.FBDebug.logLevel>4)FB.FBDebug.writeLine('SendChannel.OnAck: '+a.toString());var b=new FB.ArrayEnumerator(a);while(b.moveNext()){var c=b.get_current(),d=c.toString(),e=this._iframes[d],f=new FB.ArrayEnumerator(e);while(f.moveNext()){var g=f.get_current();FB.XdComm.Server.singleton._removeIframe(g);}delete this._iframes[d];}},_addIframe:function(a,b){var c=FB.XdComm.Server.singleton._createHiddenIFrame(a),d=b.id.toString(),e=this._iframes[d];if(!e)this._iframes[d]=e=[];FB.Sys.add(e,c);},_sendIdCount:0,_endPoint:null});FB.provide('FB.XdComm._sendChannel',{_getReverseRelation:function(a){switch(a){case FB.XdComm.PageRelation.child:return FB.XdComm.PageRelation.parent;case FB.XdComm.PageRelation.parent:return FB.XdComm.PageRelation.child;case FB.XdComm.PageRelation.self:return FB.XdComm.PageRelation.self;case FB.XdComm.PageRelation.opener:return FB.XdComm.PageRelation.openee;default:throw new Error('Unknown relation');}}});
FB.subclass('FB.XdComm.Server','FB.Class',{init:function(){this._sendChannels=[];this._receiveChannels=[];this._handlers={};this._dataRequestQueues={};this._nativeXdState=-1;this._flashXdState=-1;this._nativeMsgsSendQueue={};this._nativeMsgsReceiveQueue={};this._id=Math.random().toString().substr(0,5);FB.FBDebug.logLine(2,'Init XdComm.Server with ID '+this._id+' for '+document.URL);switch(FBIntern.AppInfo.get_singleton().get_hostInfo().get_hostName()){case FBIntern.HostName.IE:this._maxPacketDataLength=1024;break;case FBIntern.HostName.MOZILLA:this._maxPacketDataLength=100000;break;case FBIntern.HostName.SAFARI:this._maxPacketDataLength=100000;break;case FBIntern.HostName.OPERA:this._maxPacketDataLength=190000;break;default:this._maxPacketDataLength=1024;break;}if(this.get__useNativeXd())FBIntern.Utility.addEventListener(window.self,'message',FB.bind(this._onMessageEvent,this));},get_receiverUrl:function(){return this._receiverUrl;},set_receiverUrl:function(a){if(!a){FB.FBDebug.logLine(0,'Cross Domain Channel cannot be null. We will use the current page as cross domain channel, but it would be inefficient');a=FB.Bootstrap.createDefaultXdChannelUrl();}var b=FBIntern.Uri.create(new FBIntern.Uri(document.URL),a);if(window.location.hostname!==document.domain)FB.FBDebug.logLine(2,'You appear to have changed the document.domain property.\nIf you run into problems with the Facebook Connect library, please refer to\n http://wiki.developers.facebook.com/index.php/How_To_Support_Subdomain_In_Connect for\nhelp.');this._receiverUrl=b.get_uriString();return a;},getUniqueOrigin:function(){if(!this._useXdProxy())return null;if(!this._uniqueOrigin){var a;if(this._receiverUrl){a=this._receiverUrl;}else a=window.location.protocol+'//'+document.domain;a+='/'+Math.random();this._uniqueOrigin=a;if(this.get__useFlashXd())FBIntern.Flash.get_xdComm().waitUntilReady(FB.bind(function(b){var c=b;window.FB_ReceiveFlashMessage=FB.bind(function(d){this._receiveFlashMessage(d);},this);c.postMessage_init('FB_ReceiveFlashMessage',a);},this));}return this._uniqueOrigin;},send:function(a,b,c){if(FB.FBDebug.logLevel>2){FB.FBDebug.writeLine('<<<<<<< '+document.URL);FB.FBDebug.writeLine('Server.send: handler='+b);FB.FBDebug.dump(c,'data');FB.FBDebug.dump(a,'endPoint');}if(this.get__useNativeXd()){this._postMessage(a,b,c);}else if(a.flashOrigin){this._sendWithFlash(a,b,c);}else this._sendWithIframe(a,b,c);},_sendWithIframe:function(a,b,c){var d=null,e=new FB.ArrayEnumerator(this._sendChannels);while(e.moveNext()){var f=e.get_current();if(a.isEqual(f._endPoint))d=f;}if(!d){d=new FB.XdComm._sendChannel(a);FB.Sys.add(this._sendChannels,d);}d._send(b,c);},_sendWithFlash:function(a,b,c){var d=this._prepareMessagePacket(a,b,c);d.ackFlashOrigin=this.getUniqueOrigin();var e=(FB.XdComm.Server.postMessageHeader+FB.JSON.serialize(d));FBIntern.Flash.get_xdComm().waitUntilReady(FB.bind(function(f){this._retrySender(d.id.toString(),FB.bind(function(){f.postMessage_send(e,a.flashOrigin);},this));},this));},_postMessage:function(a,b,c){var d=this._prepareMessagePacket(a,b,c),e;switch(a.relation){case FB.XdComm.PageRelation.child:e=window.frames[a.frameName];break;case FB.XdComm.PageRelation.opener:e=window.opener;break;case FB.XdComm.PageRelation.parent:e=window.parent;break;default:throw new Error('Can\'t send message to endpoint with type = '+FB.Enum.toString(FB.XdComm.PageRelation,a.relation));}var f=FB.XdComm.Server.postMessageHeader+FB.JSON.serialize(d),g=(a.origin)?a.origin:'*';this._retrySender(d.id.toString(),FB.bind(function(){e.postMessage(f,g);},this));},_prepareMessagePacket:function(a,b,c){var d=FB._create__packet();d.sc=this.get_receiverUrl();d.sf=window.name;d.sr=FB.XdComm._sendChannel._getReverseRelation(a.relation);d.h=b;d.nd=c;d.df=FB.XdComm.PacketDataFormat.OBJ;d.id=this._nativeMsgId;d.sid=this._id;this._nativeMsgId++;return d;},_retrySender:function(a,b){var c=1,d=-1,e=FB.bind(function(){FB.FBDebug.logLine(2,'RetrySender '+c.toString()+'rd try');c++;if(c<100){b();}else{window.clearInterval(d);FB.FBDebug.logLine(0,'Message couldn\'t be delivered: id'+a);delete this._nativeMsgsSendQueue[a];}},this);e();d=window.setInterval(e,500);this._nativeMsgsSendQueue[a]=d;},_handleAckMessage:function(a){a=a.substr(FB.XdComm.Server.postMessageAckHeader.length);if(!a.indexOf(this._id)){var b=parseInt(a.substr(this._id.length)),c=this._nativeMsgsSendQueue[b.toString()];if(c){delete this._nativeMsgsSendQueue[b.toString()];window.clearInterval(c);}}else FB.FBDebug.logLine(0,'Ignore XdComm Ack message because send id does not match');},_onMessageEvent:function(a){var b=a.data;if(!b.indexOf(FB.XdComm.Server.postMessageHeader)){b=b.substr(FB.XdComm.Server.postMessageHeader.length);var c=FB.JSON.deserialize(b),d=new FBIntern.Uri(a.origin),e=new FBIntern.Uri(c.sc),f=FB.XdComm.Server.postMessageAckHeader+c.sid+c.id.toString();((a.source)).postMessage(f,a.origin);var g=c.sid+c.id.toString();if(!this._nativeMsgsReceiveQueue[g]){this._nativeMsgsReceiveQueue[g]=true;var h=new FB.XdComm.EndPoint(c.sf,c.sr,c.sc);this._ensureReceiveChannel(c.sid,h);this._onFullDataReceived(c,h);}}else if(!b.indexOf(FB.XdComm.Server.postMessageAckHeader)){this._handleAckMessage(b);}else this._tryRecvXdProxy(b);},_receiveFlashMessage:function(a){a=decodeURIComponent(a);if(a.indexOf(FB.XdComm.Server.postMessageAckHeader)===0){this._handleAckMessage(a);}else if(a.indexOf(FB.XdComm.Server.postMessageHeader)===0){a=a.substr(FB.XdComm.Server.postMessageHeader.length);var b=FB.JSON.deserialize(a),c=new FB.XdComm.EndPoint(b.sf,b.sr,b.sc),d=b.sid+b.id.toString();if(this._nativeMsgsReceiveQueue[d])return;this._nativeMsgsReceiveQueue[d]=true;FBIntern.Flash.get_xdComm().waitUntilReady(FB.bind(function(e){var f=FB.XdComm.Server.postMessageAckHeader+d,g=e;g.postMessage_send(f,b.ackFlashOrigin);},this));this._ensureReceiveChannel(b.sid,c);this._onFullDataReceived(b,c);}else if(!this._tryRecvXdProxy(a))FB.FBDebug.logLine(3,'Ignoring Flash XD message with unknown header.');},_tryRecvXdProxy:function(a){var b=a.indexOf('endXdProxy');if(b>0){this.onReceiverLoaded(a.substr(b+11));return true;}else return false;},createUdpUrl:function(a,b,c){return this._createUdpUrlWithFormat(a,b,c,FB.XdComm.PacketDataFormat.JSON);},createUdpUrlWithRawText:function(a,b,c){return this._createUdpUrlWithFormat(a,b,c,FB.XdComm.PacketDataFormat.rawText);},_createUdpUrlWithFormat:function(a,b,c,d){var e=FB._create__packet();e.t=FB.XdComm._packetType.udpSingle;e.h=a;e.sid=this._id;if(d!==FB.XdComm.PacketDataFormat.JSON)e.df=d;var f=this._createPacketUrl(e,c),g=FB.JSON.serialize(b);if(g.length>this._maxPacketDataLength)throw new Error('data length is too long');f+=encodeURIComponent(g);return f;},_createXdProxyBase:function(a){var b=(FBIntern.FbGlobals.get_fB_StaticResourceVersions().base_cdn_url+'connect/xd_proxy.php?r='+FBIntern.FbGlobals.get_fB_StaticResourceVersions().xd_proxy+'#'),c={origin:this.getUniqueOrigin()},d=(FBIntern.AppInfo.get_singleton().get_hostInfo().get_hostName()===FBIntern.HostName.IE);c.transport=this.get__useNativeXd()?'postmessage':'flash';if(a.relation===FB.XdComm.PageRelation.child){FB.FBDebug.assert(a.frameName,'XdComm.Server._createXdProxyPacketUrl: end point '+'does not have child name name specified');c.relation='parent.frames['+a.frameName+']';}else if(a.relation===FB.XdComm.PageRelation.self){c.relation='parent';}else if(a.relation===FB.XdComm.PageRelation.parent){c.relation='parent.parent';}else if(a.relation===FB.XdComm.PageRelation.opener){c.relation='opener';if(d)c.transport='flash';}else throw new Error("Can't handle endPoint relation.");var e=(b+FBIntern.Uri.createQueryString(c)+'&endXdProxy&');return e;},_createXdProxyPacketUrl:function(a,b){return (this._createXdProxyBase(b)+encodeURIComponent(FB.JSON.serialize(a)));},unregisterDataHandler:function(a){FB.FBDebug.logLine(2,'Unregister data handler '+a);if(!FB.Sys.containsKey(this._handlers,a))throw new Error('Handler doesn\'t exist');delete this._handlers[a];},getUniqueHandlerName:function(a){if(!a)a='handler_';var b=0,c=a+b.toString();while(FB.Sys.containsKey(this._handlers,c)){b++;c=a+b.toString();}return c;},registerDataHandler:function(a,b){FB.FBDebug.logLine(2,'Register data handler '+a);if(FB.Sys.containsKey(this._handlers,a))throw new Error('Handler already exists');this._handlers[a]=b;var c=this._dataRequestQueues[a];if(c){var d=new FB.ArrayEnumerator(c);while(d.moveNext()){var e=d.get_current();FB.FBDebug.logLine(2,'handle queued request');var f=null,g=new FB.ArrayEnumerator(this._receiveChannels);while(g.moveNext()){var h=g.get_current();if(h._id===e.sid){f=h._endPoint;break;}}FB.FBDebug.assert(f,'can\'t find endpoint');b(this._getDataObject(e),f);}}},isDataHandlerRegistered:function(a){return this._handlers[a];},createNamedHiddenIFrame:function(a,b,c,d){var e=document.createElement('div'),f=FB.HiddenContainer.get();e=FB.HiddenContainer.get().appendChild(e);if(!this._iframeCreated&&FBIntern.AppInfo.get_singleton().get_hostInfo().get_hostName()===FBIntern.HostName.IE){e.innerHTML='<iframe src=\'javascript:false\' ></iframe>';this._iframeCreated=true;}if(!c)c='FB_SERVER_IFRAME';var g='<iframe name=\"'+a+'\" ';if(d)g+=d;g+=' src=\"'+b+'\" class=\"'+c+'\" scrolling=\"no\" frameborder=\"0\"></iframe>';e.innerHTML=g;return e.childNodes[0];},onReceiverLoaded:function(a){if(a)window.setTimeout(FB.bind(function(){this._onHashReceived(a);},this),0);},_createPacketUrl:function(a,b){if(this._useXdProxy()&&!/facebook\.com/.test(this._receiverUrl))return this._createXdProxyPacketUrl(a,b);var c=FB.JSON.serialize(a);c=encodeURIComponent(c);if(b.channelUrl.indexOf('http'))throw new Error('Invalid channel url '+b.channelUrl);var d=b.channelUrl+'#';if(FB.FBDebug.logLevel>4)d+='debug=1&';if(b.relation===FB.XdComm.PageRelation.child){FB.FBDebug.assert(b.frameName,'XdComm.Server.CreatePacketUrl: end point does not have child name name specified');d+='fname='+b.frameName+'&';}else if(b.relation===FB.XdComm.PageRelation.self){d+='fname=_parent&';}else if(b.relation===FB.XdComm.PageRelation.opener){d+='fname=_opener&';}else if(b.relation===FB.XdComm.PageRelation.openee)throw new Error('Can\'t handle endPoint '+FB.Enum.toString(FB.XdComm.PageRelation,b.relation));d+=c;return d;},_createHiddenIFrame:function(a){if(FB.FBDebug.logLevel>4)FB.FBDebug.writeLine('Create iframe '+a+' in '+document.URL);var b;b=document.createElement('iframe');b.className='FB_RECEIVER_DOM';if(!this._iframeCreated&&FBIntern.AppInfo.get_singleton().get_hostInfo().get_hostName()===FBIntern.HostName.IE){b.src='javascript:false';this._iframeCreated=true;}if(FBIntern.AppInfo.get_singleton().get_hostInfo().get_hostName()===FBIntern.HostName.IE){b.src=a;b=FB.HiddenContainer.get().appendChild(b);}else{b=FB.HiddenContainer.get().appendChild(b);b.src=a;}return b;},_removeIframe:function(a){if(FB.FBDebug.logLevel>4)FB.FBDebug.writeLine('Remove iframe in '+document.URL);if(a){var b=a.parentNode;if(b)b.removeChild(a);}},_onHashReceived:function(a){if(FB.FBDebug.logLevel>3){FB.FBDebug.writeLine('>>>>>> '+document.URL);FB.FBDebug.writeLine('received hash '+a);}if(FB.Sys.startsWith(a,'guid=')){var b=decodeURIComponent(a),c=b.indexOf('&'),d=b.substring(5,c);if(this.get_GUID()!==d)return;var e=b.substr(c),f=e.indexOf('&session=');if(f==-1)return;var g=e.substr(f+9);if(g==='loggedout'){if(FB.Sys.containsKey(this._handlers,'fbLogout')){var h=this._handlers.fbLogout;h(g,null);}}else if(FB.Sys.containsKey(this._handlers,'fbLogin')){var i=this._handlers.fbLogin;i(g,null);}}else{var j=encodeURIComponent('}'),k=a.indexOf(j)+j.length,l=decodeURIComponent(a.substring(0,k)),m=a.substr(k),n=FB.JSON.deserialize(l);n.d=m;switch(n.t){case FB.XdComm._packetType.udpSingle:this._onFullDataReceived(n,new FB.XdComm.EndPoint(n.sf,n.sr,n.sc));break;case FB.XdComm._packetType.ack:var o=new FB.XdComm.EndPoint(n.sf,n.sr,n.sc),p=new FB.ArrayEnumerator(this._sendChannels);while(p.moveNext()){var q=p.get_current();if(o.isEqual(q._endPoint))q._onAck(this._getDataObject(n));}break;default:var r=this._ensureReceiveChannel(n.sid,null);r._onReceivedPacket(n);break;}}},_ensureReceiveChannel:function(a,b){var c=null,d=new FB.ArrayEnumerator(this._receiveChannels);while(d.moveNext()){var e=d.get_current();if(e._id===a){c=e;break;}}if(!c){c=new FB.XdComm._receiveChannel(a,b);FB.Sys.add(this._receiveChannels,c);}return c;},_onFullDataReceived:function(a,b){if(FB.FBDebug.logLevel>3){FB.FBDebug.dump(a,'received full packet');FB.FBDebug.dump(b,'sender');}if(FB.Sys.containsKey(this._handlers,a.h)){var c=this._handlers[a.h];c(this._getDataObject(a),b);}else{FB.FBDebug.logLine(2,'queue request to unknown handler {0} '+a.h);var d=this._dataRequestQueues[a.h];if(!d)this._dataRequestQueues[a.h]=d=[];FB.Sys.add(d,a);}},_getDataObject:function(a){var b=a.d;switch(a.df){case FB.XdComm.PacketDataFormat.rawText:return b;case FB.XdComm.PacketDataFormat.OBJ:return a.nd;case FB.XdComm.PacketDataFormat.JSON:default:return FB.JSON.deserialize(decodeURIComponent(b));}},get__useNativeXd:function(){if(!FBIntern.Utility.getSiteVar('use_postMessage')){this._nativeXdState=0;}else if(this._nativeXdState===-1)if((FBIntern.AppInfo.get_singleton().get_hostInfo().get_hostName()===FBIntern.HostName.IE&&FBIntern.AppInfo.get_singleton().get_hostInfo().majorVersion<8)){this._nativeXdState=0;}else this._nativeXdState=window.postMessage!=null?1:0;return this._nativeXdState===1;},_useXdProxy:function(){return (FBIntern.Utility.getSiteVar('use_xdProxy')&&!FB.Facebook.get_isInCanvas()&&(this.get__useNativeXd()||this.get__useFlashXd()));},get_GUID:function(){if(!this._guid)this._guid=Math.random().toString();return this._guid;},get__useFlashXd:function(){var a=(FBIntern.AppInfo.get_singleton().get_hostInfo().get_hostName()===FBIntern.HostName.IE);if(this._flashXdState===-1)if((!this.get__useNativeXd()||a)&&FBIntern.Flash.hasRequireVersion()){this._flashXdState=1;}else this._flashXdState=0;return this._flashXdState===1;},_receiverUrl:null,_uniqueOrigin:null,_iframeCreated:false,_id:null,_maxPacketDataLength:0,_nativeMsgId:0,_guid:null});FB.provide('FB.XdComm.Server',{_onLoad:function(){FB.XdComm.Server.singleton=new FB.XdComm.Server();FB.XdComm.Server.postMessageHeader='FB_msg:';FB.XdComm.Server.postMessageAckHeader='FB_msg_ack:';},init:function(a){FB.XdComm.Server.singleton.set_receiverUrl(a);},registerSimpleHandler:function(a,b){if(!FB.XdComm.Server.singleton.isDataHandlerRegistered(a))FB.XdComm.Server.singleton.registerDataHandler(a,function(c,d){b(c);});}});
FB.subclass('FBIntern.Cookie','FB.Class',{init:function(){}});FB.provide('FBIntern.Cookie',{set:function(a,b,c,d,e){if(FB.Sys.isNullOrUndefined(b))b='';var f=a+'='+encodeURIComponent(b)+';';if(e){var g=new Date(),h=new Date(g.getTime()+3600000*24*e);f+='expires='+h.toUTCString()+';';}if(c)f+='path='+c+';';if(d)f+='domain='+d+';';document.cookie=f;},clear:function(a,b,c){FBIntern.Cookie.set(a,'',b,c,-10);},getValue:function(a){var b=a+'=',c=document.cookie.split(';');for(var d=0;d<c.length;d++){var e=c[d];e=FB.Sys.trim(e);if(!e.indexOf(b)){e=decodeURIComponent(e.substr(b.length));return e;}}return null;}});
FB._create_XdHttpRequestResult=function(a,b,c,d){var e={};e.status=b;e.statusText=c;e.responseText=d;e.id=a;return e;};
FB.subclass('FB._xdHttpRequestClient','FB.Class',{init:function(a,b,c){if(!FBIntern.Flash.hasRequireVersion()){FB.XdComm.Server.singleton.createNamedHiddenIFrame(c,a,'FB_SERVER_IFRAME',null);this._serverEndPoint=new FB.XdComm.EndPoint(c,FB.XdComm.PageRelation.child,b);}else if(!window.FB_OnXdHttpResult){FB.FBDebug.logLine(2,'Set window.FB_OnXdHttpResult');window.FB_OnXdHttpResult=FB._xdHttpRequestClient._onFlashDataReceived;}},send:function(a,b,c,d,e){if(!FBIntern.Flash.hasRequireVersion()){var f=new FBIntern.Uri(b),g=f.get_pathAndQuery();FB._xdHttpRequestClient._ensureListenerStarted();var h=FB._xdHttpRequestClient._idCount++,i=[h,a,g,c,d];FB._xdHttpRequestClient._requestQueue[h.toString()]=e;FB.FBDebug.logLine(3,'XdHttpRequestClient: send request for '+b);FB.XdComm.Server.singleton.send(this._serverEndPoint,'http_server',i);}else FBIntern.Flash.get_xdComm().waitUntilReady(FB.bind(function(j){var k=j;FB.FBDebug.logLine(3,'XdHttpRequestClient: send flash request for '+b);var l=k.sendXdHttpRequest(a,b,c,d);FB._xdHttpRequestClient._requestQueue[l.toString()]=e;},this));},_serverEndPoint:null});FB.provide('FB._xdHttpRequestClient',{_onLoad:function(){FB._xdHttpRequestClient._requestQueue={};FB._xdHttpRequestClient._handlerRegistered=false;FB._xdHttpRequestClient._idCount=0;},_ensureListenerStarted:function(){if(!FB._xdHttpRequestClient._handlerRegistered){FB.XdComm.Server.singleton.registerDataHandler('http_client',FB._xdHttpRequestClient._onDataReceived);FB._xdHttpRequestClient._handlerRegistered=true;}},_onFlashDataReceived:function(a,b){b=decodeURIComponent(b);var c=FB._create_XdHttpRequestResult(a,200,'Success',b);window.setTimeout(function(){FB._xdHttpRequestClient._onDataReceived(c,null);},0);},_onDataReceived:function(a,b){FB.FBDebug.logLine(3,'XdHttpRequestClient: got result ');var c=a,d=FB._xdHttpRequestClient._requestQueue[c.id];d(c);}});
FB._create_SessionRecord=function(a,b,c,d,e,f){var g={};g.session_key=a;g.uid=b;g.expires=c;g.secret=d;g.sig=f;g.base_domain=e;return g;};
FB.subclass('FB._xdJsonRequest','FB.Class',{init:function(a,b,c,d,e){this._method=b;this._url=c;this._requestBody=d;this._extraHeaders=e;this._xdHttpClient=a;},sendRequest:function(){this._xdHttpClient.send(this._method,this._url,this._requestBody,this._extraHeaders,FB.bind(function(a){if(a.status<400){var b=a.responseText,c;try{c=FB.JSON.deserialize(b,true);}catch(d){var e=FBIntern.Utility.createException('JSON exception during deserialization.',b,d);this.callback(null,d);return;}this.callback(c,null);}else{var d=new Error(FB.Sys.format('HTTP request failure status code=\'{0}\', text=\'{1}\'',a.status,a.statusText));this.callback(null,d);}},this));},callback:null,_method:null,_url:null,_requestBody:null,_extraHeaders:null,_xdHttpClient:null});
FB.subclass('FB.PendingResult','FB.SimpleWaitable',{init:function(){this._super();},exception:null,setPendingResult:function(a,b){var c=a;if(!b&&c&&!FB.Sys.isUndefined(c.error_code)){b=FBIntern.Utility.createException(c.error_msg,c);FB.FBDebug.logLine(1,'Facebook API error: '+c.error_msg);a=null;}this.exception=b;this._setResult(a);}});
FB.provide('FB.ApiErrorCode',{unknown:1,service_not_available:2,max_requests_reached:4,remote_address_not_allowed:5,invalid_parameter:100,invalid_api_key:101,invalid_session_key:102,invalid_call_id:103,invalid_signature:104,permission_denied:200,internal_error:800,invalid_operation:801,quota_exceeded:802,object_already_exists:804,temporary_Database_failure:805});
FB.Type.createClass('FBIntern.Md5',{requires:[],ctor:function(){},'static':{computeHashToString:function(a){function b(pa,qa){return (pa<<qa)|(pa>>>(32-qa));}function c(pa,qa){var ra,sa,ta,ua,va;ta=(pa&2147483648);ua=(qa&2147483648);ra=(pa&1073741824);sa=(qa&1073741824);va=(pa&1073741823)+(qa&1073741823);if(ra&sa)return (va^2147483648^ta^ua);if(ra|sa){if(va&1073741824){return (va^3221225472^ta^ua);}else return (va^1073741824^ta^ua);}else return (va^ta^ua);}function d(pa,qa,ra){return (pa&qa)|((~pa)&ra);}function e(pa,qa,ra){return (pa&ra)|(qa&(~ra));}function f(pa,qa,ra){return (pa^qa^ra);}function g(pa,qa,ra){return (qa^(pa|(~ra)));}function h(pa,qa,ra,sa,ta,ua,va){pa=c(pa,c(c(d(qa,ra,sa),ta),va));return c(b(pa,ua),qa);}function i(pa,qa,ra,sa,ta,ua,va){pa=c(pa,c(c(e(qa,ra,sa),ta),va));return c(b(pa,ua),qa);}function j(pa,qa,ra,sa,ta,ua,va){pa=c(pa,c(c(f(qa,ra,sa),ta),va));return c(b(pa,ua),qa);}function k(pa,qa,ra,sa,ta,ua,va){pa=c(pa,c(c(g(qa,ra,sa),ta),va));return c(b(pa,ua),qa);}function l(pa){var qa,ra=pa.length,sa=ra+8,ta=(sa-(sa%64))/64,ua=(ta+1)*16,va=Array(ua-1),wa=0,xa=0;while(xa<ra){qa=(xa-(xa%4))/4;wa=(xa%4)*8;va[qa]=(va[qa]|(pa.charCodeAt(xa)<<wa));xa++;}qa=(xa-(xa%4))/4;wa=(xa%4)*8;va[qa]=va[qa]|(128<<wa);va[ua-2]=ra<<3;va[ua-1]=ra>>>29;return va;}function m(pa){var qa="",ra="",sa,ta;for(ta=0;ta<=3;ta++){sa=(pa>>>(ta*8))&255;ra="0"+sa.toString(16);qa=qa+ra.substr(ra.length-2,2);}return qa;}function n(pa){pa=pa.replace(/\r\n/g,"\n");var qa="";for(var ra=0;ra<pa.length;ra++){var sa=pa.charCodeAt(ra);if(sa<128){qa+=String.fromCharCode(sa);}else if((sa>127)&&(sa<2048)){qa+=String.fromCharCode((sa>>6)|192);qa+=String.fromCharCode((sa&63)|128);}else{qa+=String.fromCharCode((sa>>12)|224);qa+=String.fromCharCode(((sa>>6)&63)|128);qa+=String.fromCharCode((sa&63)|128);}}return qa;}var o=Array(),p,q,r,s,t,u,v,w,x,y=7,z=12,aa=17,ba=22,ca=5,da=9,ea=14,fa=20,ga=4,ha=11,ia=16,ja=23,ka=6,la=10,ma=15,na=21;a=n(a);o=l(a);u=1732584193;v=4023233417;w=2562383102;x=271733878;for(p=0;p<o.length;p+=16){q=u;r=v;s=w;t=x;u=h(u,v,w,x,o[p+0],y,3614090360);x=h(x,u,v,w,o[p+1],z,3905402710);w=h(w,x,u,v,o[p+2],aa,606105819);v=h(v,w,x,u,o[p+3],ba,3250441966);u=h(u,v,w,x,o[p+4],y,4118548399);x=h(x,u,v,w,o[p+5],z,1200080426);w=h(w,x,u,v,o[p+6],aa,2821735955);v=h(v,w,x,u,o[p+7],ba,4249261313);u=h(u,v,w,x,o[p+8],y,1770035416);x=h(x,u,v,w,o[p+9],z,2336552879);w=h(w,x,u,v,o[p+10],aa,4294925233);v=h(v,w,x,u,o[p+11],ba,2304563134);u=h(u,v,w,x,o[p+12],y,1804603682);x=h(x,u,v,w,o[p+13],z,4254626195);w=h(w,x,u,v,o[p+14],aa,2792965006);v=h(v,w,x,u,o[p+15],ba,1236535329);u=i(u,v,w,x,o[p+1],ca,4129170786);x=i(x,u,v,w,o[p+6],da,3225465664);w=i(w,x,u,v,o[p+11],ea,643717713);v=i(v,w,x,u,o[p+0],fa,3921069994);u=i(u,v,w,x,o[p+5],ca,3593408605);x=i(x,u,v,w,o[p+10],da,38016083);w=i(w,x,u,v,o[p+15],ea,3634488961);v=i(v,w,x,u,o[p+4],fa,3889429448);u=i(u,v,w,x,o[p+9],ca,568446438);x=i(x,u,v,w,o[p+14],da,3275163606);w=i(w,x,u,v,o[p+3],ea,4107603335);v=i(v,w,x,u,o[p+8],fa,1163531501);u=i(u,v,w,x,o[p+13],ca,2850285829);x=i(x,u,v,w,o[p+2],da,4243563512);w=i(w,x,u,v,o[p+7],ea,1735328473);v=i(v,w,x,u,o[p+12],fa,2368359562);u=j(u,v,w,x,o[p+5],ga,4294588738);x=j(x,u,v,w,o[p+8],ha,2272392833);w=j(w,x,u,v,o[p+11],ia,1839030562);v=j(v,w,x,u,o[p+14],ja,4259657740);u=j(u,v,w,x,o[p+1],ga,2763975236);x=j(x,u,v,w,o[p+4],ha,1272893353);w=j(w,x,u,v,o[p+7],ia,4139469664);v=j(v,w,x,u,o[p+10],ja,3200236656);u=j(u,v,w,x,o[p+13],ga,681279174);x=j(x,u,v,w,o[p+0],ha,3936430074);w=j(w,x,u,v,o[p+3],ia,3572445317);v=j(v,w,x,u,o[p+6],ja,76029189);u=j(u,v,w,x,o[p+9],ga,3654602809);x=j(x,u,v,w,o[p+12],ha,3873151461);w=j(w,x,u,v,o[p+15],ia,530742520);v=j(v,w,x,u,o[p+2],ja,3299628645);u=k(u,v,w,x,o[p+0],ka,4096336452);x=k(x,u,v,w,o[p+7],la,1126891415);w=k(w,x,u,v,o[p+14],ma,2878612391);v=k(v,w,x,u,o[p+5],na,4237533241);u=k(u,v,w,x,o[p+12],ka,1700485571);x=k(x,u,v,w,o[p+3],la,2399980690);w=k(w,x,u,v,o[p+10],ma,4293915773);v=k(v,w,x,u,o[p+1],na,2240044497);u=k(u,v,w,x,o[p+8],ka,1873313359);x=k(x,u,v,w,o[p+15],la,4264355552);w=k(w,x,u,v,o[p+6],ma,2734768916);v=k(v,w,x,u,o[p+13],na,1309151649);u=k(u,v,w,x,o[p+4],ka,4149444226);x=k(x,u,v,w,o[p+11],la,3174756917);w=k(w,x,u,v,o[p+2],ma,718787259);v=k(v,w,x,u,o[p+9],na,3951481745);u=c(u,q);v=c(v,r);w=c(w,s);x=c(x,t);}var oa=m(u)+m(v)+m(w)+m(x);return oa.toLowerCase();}}});
FB.subclass('FB.Facebook','FB.Class',{init:function(){}});FB.provide('FB.Facebook',{_onLoad:function(){FB.Facebook.apiKey=null;FB.Facebook.apiClient=null;FB.Facebook.appSecret=null;FB.Facebook.version='1.0';FB.Facebook.__initCalled=null;FB.Facebook.appSettings={};FB.Facebook.isInConnect=0;FB.Facebook.locale='en_US';FB.Facebook._initialized=null;FB.Facebook._baseDomain=null;FB.Facebook._isBaseDomainInitialized=false;FB.Facebook._isInCanvas=-1;FB.Facebook._isInitialNoSession=false;FB.Facebook._isInitialSessionSwitch=true;FB.Facebook._publicSessionData=new FB.SimpleWaitable();},init:function(a,b,c){if(typeof(a)==='object'&&!b&&!c){c=arguments[0];a=null;b=null;}if(FB.Facebook.apiClient){FB.FBDebug.writeLine('Error: Facebook.init() has already been called.');}else{if(a){FB.Facebook.apiKey=a;}else if(c)FB.Facebook.apiKey=c.apiKey;if(!FB.Facebook.apiKey)FB.FBDebug.logLine(0,'API Key is not specified');if(!b&&c)b=c.xdChannelUrl;if(c)FB.Facebook.appSettings=c;FB.XdComm.Server.singleton.set_receiverUrl(b);FB.Facebook.apiClient=new FB.ApiClient(FB.Facebook.apiKey);FB.Facebook._isInitialNoSession=!FB.Facebook.get_sessionState().result;if(c)FB.Facebook._processOptionalAppSettings();(FB.Facebook.get_initialized())._setResult(true);}if(FB.Facebook.__initCalled)FB.Facebook.__initCalled();},_reloadIfSessionStateChanged:function(){FB.Facebook.get_sessionWaitable().add_changed(function(a){window.setTimeout(function(){var b=!a.result;if(FB.Facebook._isInitialSessionSwitch){FB.Facebook._isInitialSessionSwitch=false;var c=true;if(FB.Facebook.appSettings.doNotUseCachedConnectState){c=false;}else{var d=Math.random().toString();FBIntern.Cookie.set('testCookie',d,'/',FB.Facebook._baseDomain);if(d==FBIntern.Cookie.getValue('testCookie')){FBIntern.Cookie.clear('testCookie','/',FB.Facebook._baseDomain);}else c=false;}if(!c&&FB.Facebook._isInitialNoSession)FB.Facebook._isInitialNoSession=b;}if(b!==FB.Facebook._isInitialNoSession){FB.FBDebug.logLine(3,'reloading ...');window.setTimeout(function(){window.location.reload(true);},0);}},0);});},_processOptionalAppSettings:function(){var a=FB.Facebook.appSettings;for(var b in a){var c={key:b,value:a[b]};switch(c.key){case 'debugLogLevel':FB.FBDebug.logLevel=c.value;break;case 'apiKey':case 'xdChannelUrl':case 'fetchSignedPublicSessionData':case 'ifUserConnected':case 'ifUserNotConnected':case 'doNotUseCachedConnectState':case 'permsToRequestOnConnect':case 'disableCookies':break;case 'doNotMonitorUsage':FB.Monitor.disableLogging();break;case 'reloadIfSessionStateChanged':FB.Facebook._reloadIfSessionStateChanged();break;default:FB.FBDebug.logLine(1,'Invalid app setting key: '+c.key);break;}}if(FB.Facebook.appSettings.ifUserConnected||FB.Facebook.appSettings.ifUserNotConnected)FB.Connect.ifUserConnected(FB.Facebook.appSettings.ifUserConnected,FB.Facebook.appSettings.ifUserNotConnected);},get_sessionState:function(){return FB.Facebook.get_sessionWaitable();},get_sessionWaitable:function(){FB.FBDebug.assert(FB.Facebook.apiClient,'Facebook.init() is not called yet');return FB.Facebook.apiClient.get_sessionWaitable();},get_initialized:function(){if(!FB.Facebook._initialized)FB.Facebook._initialized=new FB.SimpleWaitable();return FB.Facebook._initialized;},get_baseDomain:function(){if(!FB.Facebook._isBaseDomainInitialized)if(FB.Facebook.apiKey){FB.Facebook._baseDomain=FBIntern.Cookie.getValue('base_domain_'+FB.Facebook.apiKey);}else FB.FBDebug.logLine(0,'Can\'t get BaseDomain property when API key is not set');return FB.Facebook._baseDomain;},set_baseDomain:function(a){FB.Facebook._isBaseDomainInitialized=true;if(FB.Sys.isUndefined(a)){FB.Facebook._baseDomain=null;}else FB.Facebook._baseDomain=a;if(FB.Facebook.apiKey){var b='base_domain_'+FB.Facebook.apiKey;if(!FB.Facebook._baseDomain){FBIntern.Cookie.clear(b,'/',null);}else FBIntern.Cookie.set(b,FB.Facebook._baseDomain,'/',FB.Facebook._baseDomain,0);}else throw new Error('Can\'t set BaseDomain property when api key is set');return a;},get_isInCanvas:function(){if(FB.Facebook._isInCanvas===-1)if(window.parent==window){FB.Facebook._isInCanvas=(document.domain=='facebook.com')?1:0;}else FB.Facebook._isInCanvas=(window.location.href.match("fb_sig_in_iframe=1")!=null?1:0);var a=(FB.Facebook._isInCanvas===1);return a;},get_isInConnect:function(){return FB.Facebook.isInConnect;},get_iframeSignature:function(){if(!FB.Facebook._iframeSignature){var a=-1,b=window.location.search;if(b){var c=new RegExp('[\\?&]fb_sig_iframe_key=([^&#]*)'),d=c.exec(b);if(d)a=d[1];}FB.Facebook._iframeSignature=a;}if(FB.Facebook._iframeSignature===-1)return null;return FB.Facebook._iframeSignature;},add_initCalled:function(a){FB.Facebook.__initCalled=FB.Delegate.combine(FB.Facebook.__initCalled,a);},remove_initCalled:function(a){FB.Facebook.__initCalled=FB.Delegate.remove(FB.Facebook.__initCalled,a);}});
FB.subclass('FB.ApiClient','FB.Class',{init:function(a){this._sessionWaitable=new FB.SimpleWaitable();this._sessionRefreshInterval=20*60*1000;this._sessionRefreshIntervalId=null;this._apiKey=a;if(!FB.Facebook.apiKey)FB.Facebook.apiKey=a;var b=FBIntern.Utility.getFacebookUrl('api');this._serverAddress=b+'restserver.php';var c=b+'static/v0.4/client_restserver.php?r='+FBIntern.FbGlobals.get_fB_StaticResourceVersions().api_server,d=b+'static/v0.4/xd_receiver.php?r='+FBIntern.FbGlobals.get_fB_StaticResourceVersions().api_channel;if(FB.FBDebug.logLevel>0)c=FBIntern.Uri.addQueryParameters(c,'debug_level='+FB.FBDebug.logLevel.toString());this._xdHttpClient=new FB._xdHttpRequestClient(c,d,'fb_api_server');this._isLoggedIn=window.location.href.match("fb_sig_user")!=null;var e=FB.ApiClient._getSessionFromUrl(document.URL);if(!e)if(FB.Facebook.get_isInCanvas()&&!this._isLoggedIn){this._setSessionCookies(null);}else e=this._getSessionFromCookies();if(e&&!FB.ApiClient.sessionIsExpired(e))this.set_session(e);},get_session:function(){return this._session;},set_session:function(a){if(a!==this._session){this._session=a;if(this._session&&this._session.base_domain)FB.Facebook.set_baseDomain(this._session.base_domain);this._setSessionCookies(a);if(this._sessionRefreshIntervalId)clearInterval(this._sessionRefreshIntervalId);this._sessionRefreshIntervalId=window.setInterval(FB.bind(function(){this._refreshSession(null);},this),this._sessionRefreshInterval);this._sessionWaitable._setResult(a,!a);}return a;},get_sessionWaitable:function(){return this._sessionWaitable;},requireLogin:function(a){if(this._session){if(a)a(null);}else FB.ApiClient.createSessionDelegate(this,FB.bind(function(b){FB.FBDebug.assert(b,'Invalid session returned');this._session=b;},this));},_getSessionFromCookies:function(){if(FB.Facebook.appSettings.doNotUseCachedConnectState)return null;var a=FBIntern.Cookie.getValue(this._apiKey),b=FBIntern.Cookie.getValue(this._apiKey+'_user'),c=FBIntern.Cookie.getValue(this._apiKey+'_ss'),d=FBIntern.Cookie.getValue(this._apiKey+'_session_key'),e=parseInt(FBIntern.Cookie.getValue(this._apiKey+'_expires'));if(a&&b&&c&&d&&e!==-1){var f=FB._create_SessionRecord(d,b,e,c,FB.Facebook.get_baseDomain(),a);return f;}return null;},_setSessionCookies:function(a){if(FB.Facebook.appSettings.disableCookies)return;if(a&&a.expires!==-1&&a.secret&&a.session_key&&a.uid&&a.sig){FBIntern.Cookie.set(this._apiKey,a.sig,'/',FB.Facebook.get_baseDomain(),0);FBIntern.Cookie.set(this._apiKey+'_user',a.uid,'/',FB.Facebook.get_baseDomain(),0);FBIntern.Cookie.set(this._apiKey+'_ss',a.secret,'/',FB.Facebook.get_baseDomain(),0);FBIntern.Cookie.set(this._apiKey+'_session_key',a.session_key,'/',FB.Facebook.get_baseDomain(),0);FBIntern.Cookie.set(this._apiKey+'_expires',a.expires.toString(),'/',FB.Facebook.get_baseDomain(),0);}else if(!a){FBIntern.Cookie.clear(this._apiKey,'/',FB.Facebook.get_baseDomain());FBIntern.Cookie.clear(this._apiKey+'_user','/',FB.Facebook.get_baseDomain());FBIntern.Cookie.clear(this._apiKey+'_ss','/',FB.Facebook.get_baseDomain());FBIntern.Cookie.clear(this._apiKey+'_session_key','/',FB.Facebook.get_baseDomain());FBIntern.Cookie.clear(this._apiKey+'_expires','/',FB.Facebook.get_baseDomain());}},_createLoginUrl:function(){var a={api_key:this._apiKey,extern:FB.Facebook.get_isInConnect(),fbconnect:1,next:document.URL,return_session:1,v:FB.Facebook.version};return FBIntern.Utility.createFacebookUrl('www','login.php',a,false);},_refreshSession:function(a){var b=FBIntern.Utility.getFacebookUrl('api')+'session_state.php',c='api_key='+this._apiKey.toString()+'&session_key='+((!this._session)?'null':this._session.session_key.toString()),d={};d['Content-Type']='application/x-www-form-urlencoded';var e=new FB._xdJsonRequest(this._xdHttpClient,'POST',b,c,d);e.callback=FB.bind(function(f,g){if(f){var h=f;if(!h.error){this._session=h.session;this._setSessionCookies(this._session);if(a)a(null);}else if(h.error===-1){FB.FBDebug.logLine(1,'User has not authorized the application.');}else if(h.error===-2){FB.FBDebug.logLine(1,'User is not logged into Facebook.');}else if(h.error===-3)FB.FBDebug.logLine(1,'Unknown error while refreshing user session.');}},this);e.sendRequest();},auth_getAppPublicKey:function(a,b){return this.callMethod('auth.getAppPublicKey',{target_app_key:a},b);},auth_getSignedPublicSessionData:function(a){return this.callMethod('auth.getSignedPublicSessionData',null,a);},connect_getUnconnectedFriendsCount:function(a){return this.callMethod('connect.getUnconnectedFriendsCount',null,a);},events_get:function(a,b,c,d,e,f){var g={};if(a)g.uid=a;if(b)g.eids=b;g.start_time=c;g.end_time=d;if(e)g.rsvp_status=e;return this.callMethod('events.get',g,f);},events_getMembers:function(a,b){var c={};c.eid=a;return this.callMethod('events.getMembers',c,b);},fbml_refreshImgSrc:function(a,b){var c={};c.url=a;return this.callMethod('fbml.refreshImgSrc',c,b);},fbml_refreshRefUrl:function(a,b){var c={};c.url=a;return this.callMethod('fbml.refreshRefUrl',c,b);},fbml_setRefHandle:function(a,b,c){var d={};d.handle=a;d.fbml=b;return this.callMethod('fbml.setRefHandle',d,c);},intl_uploadNativeStrings:function(a,b){var c={};c.native_strings=a;return this.callMethod('intl.uploadNativeStrings',c,b);},feed_publishUserAction:function(a,b,c,d,e,f,g){var h={};h.template_bundle_id=a.toString();if(b)h.template_data=b;if(c)h.target_ids=c.toString();if(d)h.body_general=d;if(e>0)h.story_size=e;if(f)h.user_message=f;return this.callMethod('feed.publishUserAction',h,g);},friends_get:function(a,b){var c={};if(a)c.flid=a;return this.callMethod('friends.get',c,b);},revokeAuthorization:function(a,b){return this.callMethod('auth.revokeAuthorization',null,b);},preloadFQL_get:function(a){if(FB.Facebook.get_isInCanvas()&&this._isLoggedIn&&FB.XdComm.Server.singleton.get_receiverUrl()){FB.Bootstrap._requireFeatures(['CacheData'],function(){FBIntern.CacheClient.preloadFQLGet(a);});return true;}else{a(Array());return false;}},friends_areFriends:function(a,b,c){var d={};d.uids1=a.toString();d.uids2=b.toString();return this.callMethod('friends.areFriends',d,c);},friends_getAppUsers:function(a){return this.callMethod('friends.getAppUsers',null,a);},friends_getLists:function(a){return this.callMethod('friends.getLists',null,a);},groups_get:function(a,b,c){var d={};if(a)d.uid=a;if(b)d.gids=b.toString();return this.callMethod('groups.get',d,c);},groups_getMembers:function(a,b){var c={};c.gid=a;return this.callMethod('groups.getMembers',c,b);},privacy_canSee:function(a,b,c){var d={};d.uids=a.toString();d.whats=b.toString();return this.callMethod('privacy.canSee',d,c);},notifications_get:function(a){var b={};return this.callMethod('notifications.get',b,a);},notifications_send:function(a,b,c){var d={};d.to_ids=a.toString();d.notification=b;return this.callMethod('notifications.send',d,c);},notifications_sendEmail:function(a,b,c,d,e){var f={};f.recipients=a.toString();f.subject=b;if(c)f.text=c;if(d)f.fbml=d;return this.callMethod('notifications.sendEmail',f,e);},pages_getInfo:function(a,b,c,d){var e={};e.fields=a.toString();e.page_ids=b.toString();if(c)e.uid=c;return this.callMethod('pages.getInfo',e,d);},pages_isAdmin:function(a,b){var c={};c.page_id=a;return this.callMethod('pages.isAdmin',c,b);},pages_isAppAdded:function(a,b){var c={};c.page_id=a;return this.callMethod('pages.isAppAdded',c,b);},pages_isFan:function(a,b,c){var d={};d.page_id=a;d.uid=b;return this.callMethod('pages.isFan',d,c);},photos_addTag:function(a,b,c,d,e,f,g){var h={};h.pid=a;if(f){h.tags=f;}else{if(b){h.tag_uid=b;}else if(c){h.tag_text=c;}else FB.FBDebug.logLine(1,'Either tag_uid or tag_text must specified');h.x=d;h.y=e;}return this.callMethod('photos.addTag',h,g);},photos_createAlbum:function(a,b,c,d){var e={};e.name=a;e.location=b;e.description=c;return this.callMethod('photos.createAlbum',e,d);},photos_get:function(a,b,c,d){var e={};if(a)e.subj_id=a;if(b)e.aid=b;if(c)e.pids=c.toString();return this.callMethod('photos.get',e,d);},photos_getAlbums:function(a,b,c){var d={};if(a)d.uid=a;if(b)d.aids=b.toString();return this.callMethod('photos.getAlbums',d,c);},photos_getTags:function(a,b){var c={};c.pids=a.toString();return this.callMethod('photos.getTags',c,b);},users_getInfo:function(a,b,c){var d={};d.uids=a.toString();d.fields=b.toString();return this.callMethod('users.getInfo',d,c);},users_getLoggedInUser:function(a){var b={};return this.callMethod('users.getLoggedInUser',b,a);},users_hasAppPermission:function(a,b){var c={};c.ext_perm=a;return this.callMethod('users.hasAppPermission',c,b);},users_isAppAdded:function(a){var b={};return this.callMethod('users.isAppUser',b,a);},users_isAppUser:function(a){var b={};return this.callMethod('users.isAppUser',b,a);},users_setStatus:function(a,b,c,d){var e={};e.status=a;e.clear=b;e.status_includes_verb=c;return this.callMethod('users.setStatus',e,d);},stream_get:function(a,b,c,d,e,f){var g={};g.source_ids=a;g.start_time=b;g.end_time=c;g.limit=d;g.filter_key=e;return this.callMethod('stream.get',g,f);},stream_getComments:function(a,b){var c={};c.post_id=a;return this.callMethod('stream.getComments',c,b);},stream_getFilters:function(a){return this.callMethod('stream.getFilters',{},a);},fql_query:function(a,b){var c={};c.query=a;return this.callMethod('fql.query',c,b);},profile_setFBML:function(a,b,c,d,e,f){var g={};if(a)g.uid=a;g.profile=b;g.profile_action=c;g.mobile_profile=d;g.profile_main=e;return this.callMethod('profile.setFBML',g,f);},profile_getFBML:function(a,b){var c={};c.uid=a;return this.callMethod('profile.getFBML',c,b);},callMethod:function(a,b,c){var d=!this._session&&!FB.Facebook.appSecret&&a!=='fql.query',e=this._generateJsonRequest(a,b);if(typeof(c)!=='function'){var f=new FB.PendingResult();if(!d){c._api=this;c._addStep(e,f);}else f.setPendingResult(null,FBIntern.Utility.createException('Invalid session state',FB.ApiErrorCode.invalid_session_key));return f;}else{var g=(c);if(!d){e.callback=FB.bind(function(h,i){if(!i&&(i=this._checkError(h)))h=null;g(h,i);},this);e.sendRequest();}else g(null,FBIntern.Utility.createException('Invalid session state',FB.ApiErrorCode.invalid_session_key));return null;}},_checkError:function(a){var b=a;if(!FB.Sys.isUndefined(b.error_code)){FB.FBDebug.logLine(1,'API failed with error code = '+FB.Enum.toString(FB.ApiErrorCode,b.error_code));if(b.error_code===FB.ApiErrorCode.invalid_session_key){FB.FBDebug.logLine(1,'Bad session key, clear it');this.set_session(null);}return FBIntern.Utility.createException(b.error_msg,b);}return null;},_generateJsonRequest:function(a,b){if(!b)b={};var c=b;for(var d in c){var e={key:d,value:c[d]},f=typeof(e.value);if(f==='boolean'){b[e.key]=(b[e.key])?1:0;}else if(f==='object')b[e.key]=FB.JSON.serialize(e.value);}b.method=a;b.api_key=this._apiKey;b.format='JSON';var g=(new Date()).getMilliseconds();if(g===this._lastCallId)g=this._lastCallId+1;this._lastCallId=g;b.call_id=g;if(!b.v)b.v=FB.Facebook.version;if(this._session){FB.FBDebug.writeLine('session key = '+this._session.session_key);b.session_key=this._session.session_key;}if(FB.Facebook.appSecret){b.sig=this._generateSignature(b,FB.Facebook.appSecret);}else if(this._session&&this._session.secret){b.ss=1;b.sig=this._generateSignature(b,this._session.secret);}var h=new FB.StringBuilder(),i=b;for(var j in i){var e={key:j,value:i[j]};if(!h.get_isEmpty())h.append('&');h.append(e.key+'='+encodeURIComponent(e.value));}var k=this._serverAddress;k+=('?method='+b.method);var l=h.toString(),m={};m['Content-Type']='application/x-www-form-urlencoded';var n=new FB._xdJsonRequest(this._xdHttpClient,'POST',k,l,m);return n;},get_apiKey:function(){return this._apiKey;},_convertDictKeysToList:function(a){var b=[],c=a;for(var d in c){var e={key:d,value:c[d]};FB.Sys.add(b,e.key);}return b;},_generateSignature:function(a,b){var c=new FB.StringBuilder(),d=this._convertDictKeysToList(a);d.sort();var e=new FB.ArrayEnumerator(d);while(e.moveNext()){var f=e.get_current();c.append(f+'='+a[f]);}c.append(b);var g=FB.Sys.trim(FBIntern.Md5.computeHashToString(c.toString()));return g;},_apiKey:null,_session:null,_serverAddress:null,_lastCallId:0,_xdHttpClient:null,_isLoggedIn:false});FB.provide('FB.ApiClient',{_onLoad:function(){FB.ApiClient.createSessionDelegate=FB.ApiClient.defaultCreateSession;},sessionIsExpired:function(a){if(!a.expires){return false;}else if(a.expires!==-1){var b=Math.round((new Date()).getTime()/1000),c=a.expires,d=!(c>b);return d;}return true;},defaultCreateSession:function(a,b){window.location=a._createLoginUrl();},getSessionFromSigParams:function(a){var b='fb_sig_session_key',c='fb_sig_user',d='fb_sig_expires',e='fb_sig_ss',f='fb_sig_base_domain',g='fb_sig_cookie_sig';if(FB.Sys.containsKey(a,g)&&FB.Sys.containsKey(a,b)&&FB.Sys.containsKey(a,c)&&FB.Sys.containsKey(a,d)&&FB.Sys.containsKey(a,e)){var h=a[g],i=a[c],j=a[e],k=a[b],l=parseInt(a[d]),m=a[f];if(h&&i&&j&&k&&l!==-1){var n=FB._create_SessionRecord(k,i,l,j,m,h);return n;}}return null;},_getSessionFromUrl:function(a){var b='session',c=new FBIntern.Uri(a);if(FB.Sys.containsKey(c.get_queryParameters(),b)){var d=c.get_queryParameters()[b];return FB.JSON.deserialize(d);}var e=c.get_queryParameters();return FB.ApiClient.getSessionFromSigParams(e);}});
FB.provide('FB.ConnectState',{connected:1,userNotLoggedIn:2,appNotAuthorized:3});
FB.provide('FB.DialogType',{popUp:0,iframe:1,canvas:2});
FB.subclass('FB.XdComm.XdRpcClient','FB.Class',{init:function(a,b,c){this._requestQueue={};this._serverEndPoint=c;this._rpcClientName=(b)?b:FB.XdComm.Server.singleton.getUniqueHandlerName('rpcClient');this._rcpServerName=a;FB.XdComm.Server.singleton.registerDataHandler(b,FB.bind(this._onDataReceived,this));},send:function(a,b,c){FB.FBDebug.logLine(3,'XdRpcClient.Send: '+a);var d=this._idCount++,e=[d,this._rpcClientName,a,b,(c)?true:false];this._requestQueue[d.toString()]=c;FB.XdComm.Server.singleton.send(this._serverEndPoint,this._rcpServerName,e);},_onDataReceived:function(a,b){var c=a,d=c[0],e=this._requestQueue[d];if(e)e(c[1]);},detachClient:function(){FB.XdComm.Server.singleton.unregisterDataHandler(this._rpcClientName);},_serverEndPoint:null,_rpcClientName:null,_rcpServerName:null,_idCount:0});
FB._create_XdRpcMethodInfo=function(a,b){var c={};FB.FBDebug.assert((!a)^(!b),'One and only one of method or asyncMethod parameters must not be null.');c.method=a;c.asyncMethod=b;return c;};
FB.subclass('FB.XdComm.XdRpcServer','FB.Class',{init:function(a,b){if(b){this.registeredMethodMap=b;}else this.registeredMethodMap={};FB.XdComm.Server.singleton.registerDataHandler(a,FB.bind(this._onDataReceived,this));},_onDataReceived:function(a,b){var c=a;if(c.length!==5)FB.FBDebug.logLine(1,'XdRpcServer.OnDataReceived: invalid parameters.');var d=c[0],e=c[1],f=c[2],g=c[3],h=c[4];if(!FB.Sys.containsKey(this.registeredMethodMap,f)){FB.FBDebug.logLine(1,'XD RPC server: method '+f+' is not allowed or doesn\'t exist.');return;}var i=this.registeredMethodMap[f];FB.FBDebug.logLine(3,'XdRpcServer.Received: '+f);if(i.method){var j=i.method(g,b);if(h)FB.XdComm.Server.singleton.send(b,e,[d,j]);}else if(i.asyncMethod){i.asyncMethod(g,FB.bind(function(k){if(h)FB.XdComm.Server.singleton.send(b,e,[d,k]);},this),b);}else FB.FBDebug.logLine(1,'MethodInfo for '+f+' does not contain any function pointers.');},registeredMethodMap:null});
FB.provide('FB._contentSizeMethod',{oldMethod:0,newOnlyForFbml:1,newMethod:2});
FB.subclass('FB.CanvasClient','FB.Class',{init:function(){}});FB.provide('FB.CanvasClient',{_onLoad:function(){FB.CanvasClient.serverReceiverUrl=FBIntern.Utility.getFacebookUrl('static.ak')+'xd_receiver_v0.4.php?r='+FBIntern.FbGlobals.get_fB_StaticResourceVersions().www_channel;FB.CanvasClient.allowWidthChange=false;FB.CanvasClient.__windowSizeChangedCallback=null;FB.CanvasClient._rpcClient=null;FB.CanvasClient._rpcServer=null;FB.CanvasClient._lastSize=FB._create_Size(-1,-1);FB.CanvasClient._timer=-1;FB.CanvasClient._timerInternal=100;FB.CanvasClient._modifyBodyStyle=true;FB.CanvasClient._urlHandler=FB.CanvasClient.defaultUrlHandler;FB.CanvasClient._allowCallback=null;FB.CanvasClient._cancelCallback=null;FB.CanvasClient._feedCallback=null;FB.CanvasClient._isRenderFbml=false;FB.CanvasClient._allowCallback=function(a){};FB.CanvasClient._cancelCallback=Delegate.Null;FB.CanvasClient._feedCallback=Delegate.Null;},_ensureRpcClient:function(){if(!FB.CanvasClient._rpcClient){var a=new FB.XdComm.EndPoint(null,FB.XdComm.PageRelation.parent,FB.CanvasClient.serverReceiverUrl);a.flashOrigin=FB.CanvasClient._flashOrigin;FB.CanvasClient._rpcClient=new FB.XdComm.XdRpcClient('iframeOuterServer','iframeInnerClient',a);}},run:function(){if(!FB.CanvasClient._rpcServer){var a={loadNewUrl:FB._create_XdRpcMethodInfo(FB.CanvasClient.loadNewUrl,null),loginResponse:FB._create_XdRpcMethodInfo(FB.CanvasClient.loginResponse,null),feedResponse:FB._create_XdRpcMethodInfo(FB.CanvasClient.feedResponse,null)},b='iframeInnerServer';FB.CanvasClient._rpcServer=new FB.XdComm.XdRpcServer(b,a);FB.CanvasClient._rpcClient.send('setInnerReceiver',{receiverUrl:FB.XdComm.Server.singleton.get_receiverUrl()},null);}},get_timerInterval:function(){return FB.CanvasClient._timerInternal;},set_timerInterval:function(a){FB.CanvasClient._timerInternal=a;return a;},startTimerToSizeToContent:function(){FB.FBDebug.logLine(4,'CanvasClient: StartTimerToSizeToContent');FB.CanvasClient.setSizeToContent();if(FB.CanvasClient._timer===-1)FB.CanvasClient._timer=window.setInterval(FB.bind(FB.CanvasClient.setSizeToContent),FB.CanvasClient._timerInternal);},stopTimerToSizeToContent:function(){if(FB.CanvasClient._timer!==-1){window.clearInterval(FB.CanvasClient._timer);FB.CanvasClient._timer=-1;}},setSizeToContent:function(){if(FB.CanvasClient.get__isInDialog()){FB.CanvasClient._sizeDialogToContent();return;}var a=document.documentElement;if(FB.CanvasClient._modifyBodyStyle)a.style.overflow='hidden';var b=FB.CanvasClient._computeContentSize();if(FB.CanvasClient.allowWidthChange){if(b.w!==FB.CanvasClient._lastSize.w||b.h!==FB.CanvasClient._lastSize.h){FB.CanvasClient._lastSize=b;FB.CanvasClient._setCanvasSize(b.w.toString()+'px',b.h.toString()+'px',null);}}else if(b.h!==FB.CanvasClient._lastSize.h){FB.CanvasClient._lastSize=b;FB.CanvasClient.setCanvasHeight(b.h.toString()+'px',null);}},_sizeDialogToContent:function(){var a=FBIntern.Utility.get_windowSize(),b=FBIntern.Utility.get_documentSize(),c=b.h-a.h,d=b.w-a.w;if(c||d){FB.FBDebug.logLine(2,FB.Sys.format('CanvasClient: resize dialog by ({0}, {1})',d,c));try{window.resizeBy(d,c);}catch(e){FB.FBDebug.logLine(2,FB.Sys.format('CanvasClient: resize faield'));}}},setCanvasHeight:function(a,b){FB.FBDebug.logLine(2,'CanvasClient: set canvas height to '+a);FB.CanvasClient._ensureRpcClient();FB.CanvasClient._rpcClient.send('setCanvasHeight',a,b);},_setCanvasSize:function(a,b,c){FB.FBDebug.logLine(2,FB.Sys.format('CanvasClient: set canvas size to {0}, {1}',a,b));FB.CanvasClient._ensureRpcClient();FB.CanvasClient._rpcClient.send('setCanvasSize',{w:a,h:b},c);},getCanvasInfo:function(a){FB.CanvasClient._ensureRpcClient();FB.CanvasClient._rpcClient.send('getCanvasInfo',null,a);},scrollTo:function(a,b,c){FB.CanvasClient._ensureRpcClient();FB.CanvasClient._rpcClient.send('scrollTo',FB._create_Point(a,b),c);},changeUrlSuffix:function(a,b){FB.CanvasClient._ensureRpcClient();FB.CanvasClient._rpcClient.send('changeUrlSuffix',a,b);},syncUrl:function(){FB.CanvasClient._ensureRpcClient();var a=document.location;FB.CanvasClient._rpcClient.send('refreshUrl',a,null);FB.CanvasClient.run();},requireLogin:function(a,b){FB.CanvasClient._ensureRpcClient();FB.CanvasClient.run();FB.CanvasClient._allowCallback=a;FB.CanvasClient._cancelCallback=b;FB.CanvasClient._rpcClient.send('requireLogin',null,null);},closeLogin:function(){FB.CanvasClient._ensureRpcClient();FB.CanvasClient.run();FB.CanvasClient._rpcClient.send('closeLogin',null,null);},loginResponse:function(a,b){if(a){FB.CanvasClient._allowCallback(a);}else FB.CanvasClient._cancelCallback();return null;},showFeedDialog:function(a,b,c,d,e,f,g){FB.CanvasClient._ensureRpcClient();FB.CanvasClient.run();FB.CanvasClient._feedCallback=e;var h={template_bundle_id:a,template_data:b,body_general:c,target_id:d,user_message_prompt:f,user_message:g};FB.CanvasClient._rpcClient.send('showFeedDialog',h,null);},feedResponse:function(a,b){FB.CanvasClient._feedCallback();return null;},setUrlHandler:function(a){FB.CanvasClient._urlHandler=a;},loadNewUrl:function(a,b){var c=a;FB.FBDebug.logLine(2,FB.Sys.format('CanvasClient: set internal url to  {0}',c));FB.CanvasClient._urlHandler(c);return null;},defaultUrlHandler:function(a){window.location.replace(a);},go:function(a){FB.CanvasClient._ensureRpcClient();FB.CanvasClient._rpcClient.send('goURI',a,null);},add_windowSizeChanged:function(a){var b=FB.CanvasClient.__windowSizeChangedCallback;FB.CanvasClient.add__windowSizeChangedCallback(a);if(!b){FB.CanvasClient._ensureRpcClient();FB.CanvasClient._rpcClient.send('attachToWindowResizeEvent',null,FB.CanvasClient._onRpcCompleted);}},remove_windowSizeChanged:function(a){FB.CanvasClient.remove__windowSizeChangedCallback(a);},_onRpcCompleted:function(a){if(FB.CanvasClient.__windowSizeChangedCallback)FB.CanvasClient.__windowSizeChangedCallback(a);},_computeContentSize:function(){var a=document.body,b=document.documentElement,c=0,d,e=FBIntern.Utility.getSiteVar('canvas_client_compute_content_size_method',FB._contentSizeMethod.oldMethod);if((e===FB._contentSizeMethod.newOnlyForFbml&&FB.CanvasClient._isRenderFbml)||e===FB._contentSizeMethod.newMethod){d=Math.max(Math.max(a.offsetHeight,a.scrollHeight)+a.offsetTop,Math.max(b.offsetHeight,b.scrollHeight)+b.offsetTop);}else{if(FBIntern.AppInfo.get_singleton().get_hostInfo().get_hostName()===FBIntern.HostName.IE){d=Math.max(a.offsetHeight,a.scrollHeight)+a.offsetTop;}else d=b.offsetHeight+b.offsetTop;if(window.Dialog)d=Math.max(d,Dialog.max_bottom);}if(FB.CanvasClient.allowWidthChange){if(a.offsetWidth<a.scrollWidth){c=a.scrollWidth+a.offsetLeft;}else{var f=a.childNodes;c=0;for(var g=0;g<f.length;g++){var h=f[g],i=h.offsetWidth+h.offsetLeft;if(i>c)c=i;}}if(b.clientLeft>0)c+=(b.clientLeft*2);if(b.clientTop>0)d+=(b.clientTop*2);}return FB._create_Size(c,d);},get__isInDialog:function(){return window.opener&&window.opener!==window.self;},add__windowSizeChangedCallback:function(a){FB.CanvasClient.__windowSizeChangedCallback=FB.Delegate.combine(FB.CanvasClient.__windowSizeChangedCallback,a);},remove__windowSizeChangedCallback:function(a){FB.CanvasClient.__windowSizeChangedCallback=FB.Delegate.remove(FB.CanvasClient.__windowSizeChangedCallback,a);}});
FB.subclass('FB.IFrameUtil._resizeUtil','FB.Class',{init:function(a){this.allowWidthChange=a;},setCanvasHeight:function(a,b){var c=a;FB.FBDebug.logLine(2,'ResizeUtil: set canvas height to '+c);if(!c){FB.FBDebug.logLine(1,'Called ResizeUtil.SetCanvasHeight() with invalid input parameters.');}else{var d=this.getIFrameElement(b.frameName);if(d)this.resizeIframe(d,null,c);}return null;},setCanvasSize:function(a,b){var c=a,d=c.w,e=c.h;FB.FBDebug.logLine(2,FB.Sys.format('ResizeUtil: set canvas size to {0}, {1}',d,e));if(e){var f=this.getIFrameElement(b.frameName);if(f)this.resizeIframe(f,null,e);}if(d)if(this.allowWidthChange){var f=this.getIFrameElement(b.frameName);if(f)this.resizeIframe(f,d,null);}else FB.FBDebug.logLine(1,'Iframe width change is disallowed.');return null;},getIFrameElement:function(a){var b=document.getElementsByTagName('iframe');for(var c=0;c<b.length;c++){var d=b[c];if(d.name===a)return d;}return null;},resizeIframe:function(a,b,c){if(a.resizeHandler){a.resizeHandler((b==null)?null:parseInt(b),(c==null)?null:parseInt(c));}else{if(b!=null)a.style.width=b;if(c!=null)a.style.height=c;}},allowWidthChange:false});
FB.subclass('FB.IFrameUtil._canvasUtil','FB.IFrameUtil._resizeUtil',{init:function(a){this._super(a);},getCanvasInfo:function(a,b){var c=this.getIFrameElement(b.frameName);if(c){var d=Vector2.getViewportDimensions(),e=Vector2.getDocumentDimensions(),f=Vector2.getScrollPosition(null),g=Vector2.getElementPosition(c,'document'),h={window:{w:d.x,h:d.y},page:{w:e.x,h:e.y},scrollPos:{x:f.x,y:f.y},canvas:{w:c.offsetWidth,h:c.offsetHeight},canvasPos:{x:g.x,y:g.y}};return h;}else return null;},changeUrlSuffix:function(a,b){var c=a;PlatformCanvasController.singleton.changeUrlSuffix(c,false);return null;},refreshUrl:function(a,b){var c=a;PlatformCanvasController.refreshUrl(c);return null;},scrollTo:function(a,b){var c=a,d=new Vector2(c.x,c.y,'document');DOMScroll.scrollTo(d,false);return null;},attachToWindowResizeEvent:function(a,b,c){this.add_windowSizeChangedCallback(b);FBIntern.Utility.addEventListener(window.self,'resize',FB.bind(function(d){if(this.__windowSizeChangedCallback){var e=this.getCanvasInfo(null,c);this.__windowSizeChangedCallback(e);}},this));},requireLogin:function(a,b,c){PlatformCanvasController.singleton.requireLogin();},goURI:function(a,b,c){var d=a;PlatformCanvasController.singleton.goURI(d);},closeLogin:function(a,b,c){PlatformCanvasController.singleton.closeLogin();},showFeedDialog:function(a,b,c){var d=a;PlatformCanvasController.singleton.showFeedDialog(d.template_bundle_id,d.template_data,d.body_general,d.target_id,d.user_message_prompt,d.user_message);},add_windowSizeChangedCallback:function(a){this.__windowSizeChangedCallback=FB.Delegate.combine(this.__windowSizeChangedCallback,a);},remove_windowSizeChangedCallback:function(a){this.__windowSizeChangedCallback=FB.Delegate.remove(this.__windowSizeChangedCallback,a);},__windowSizeChangedCallback:null});
FB.subclass('FB.IFrameUtil.CanvasUtilServer','FB.Class',{init:function(){}});FB.provide('FB.IFrameUtil.CanvasUtilServer',{_onLoad:function(){FB.IFrameUtil.CanvasUtilServer._rpcServer=null;FB.IFrameUtil.CanvasUtilServer._rpcClient=null;FB.IFrameUtil.CanvasUtilServer._canvasUtil=null;},run:function(a,b){FB.IFrameUtil.CanvasUtilServer.iframeName=b;if(!FB.IFrameUtil.CanvasUtilServer._rpcServer){FB.IFrameUtil.CanvasUtilServer._canvasUtil=new FB.IFrameUtil._canvasUtil(a);var c={setCanvasHeight:FB._create_XdRpcMethodInfo(FB.bind(FB.IFrameUtil.CanvasUtilServer._canvasUtil.setCanvasHeight,FB.IFrameUtil.CanvasUtilServer._canvasUtil),null),setCanvasSize:FB._create_XdRpcMethodInfo(FB.bind(FB.IFrameUtil.CanvasUtilServer._canvasUtil.setCanvasSize,FB.IFrameUtil.CanvasUtilServer._canvasUtil),null),getCanvasInfo:FB._create_XdRpcMethodInfo(FB.bind(FB.IFrameUtil.CanvasUtilServer._canvasUtil.getCanvasInfo,FB.IFrameUtil.CanvasUtilServer._canvasUtil),null),scrollTo:FB._create_XdRpcMethodInfo(FB.bind(FB.IFrameUtil.CanvasUtilServer._canvasUtil.scrollTo,FB.IFrameUtil.CanvasUtilServer._canvasUtil),null),changeUrlSuffix:FB._create_XdRpcMethodInfo(FB.bind(FB.IFrameUtil.CanvasUtilServer._canvasUtil.changeUrlSuffix,FB.IFrameUtil.CanvasUtilServer._canvasUtil),null),refreshUrl:FB._create_XdRpcMethodInfo(FB.bind(FB.IFrameUtil.CanvasUtilServer._canvasUtil.refreshUrl,FB.IFrameUtil.CanvasUtilServer._canvasUtil),null),setInnerReceiver:FB._create_XdRpcMethodInfo(FB.IFrameUtil.CanvasUtilServer.setInnerReceiver,null),attachToWindowResizeEvent:FB._create_XdRpcMethodInfo(null,FB.bind(FB.IFrameUtil.CanvasUtilServer._canvasUtil.attachToWindowResizeEvent,FB.IFrameUtil.CanvasUtilServer._canvasUtil)),requireLogin:FB._create_XdRpcMethodInfo(null,FB.bind(FB.IFrameUtil.CanvasUtilServer._canvasUtil.requireLogin,FB.IFrameUtil.CanvasUtilServer._canvasUtil)),closeLogin:FB._create_XdRpcMethodInfo(null,FB.bind(FB.IFrameUtil.CanvasUtilServer._canvasUtil.closeLogin,FB.IFrameUtil.CanvasUtilServer._canvasUtil)),goURI:FB._create_XdRpcMethodInfo(null,FB.bind(FB.IFrameUtil.CanvasUtilServer._canvasUtil.goURI,FB.IFrameUtil.CanvasUtilServer._canvasUtil)),showFeedDialog:FB._create_XdRpcMethodInfo(null,FB.bind(FB.IFrameUtil.CanvasUtilServer._canvasUtil.showFeedDialog,FB.IFrameUtil.CanvasUtilServer._canvasUtil))};FB.FBDebug.assert(FB.XdComm.Server.singleton.get_receiverUrl(),'FB.XdComm.Server not initialized');FB.IFrameUtil.CanvasUtilServer._rpcServer=new FB.XdComm.XdRpcServer('iframeOuterServer',c);}else if(a&&!FB.IFrameUtil.CanvasUtilServer._canvasUtil.allowWidthChange)FB.IFrameUtil.CanvasUtilServer._canvasUtil.allowWidthChange=true;},setInnerReceiver:function(a,b){var c=a;FB.FBDebug.logLine(2,FB.Sys.format('CanvasClient: set innner url to  {0}',c.receiverUrl));FB.IFrameUtil.CanvasUtilServer.refreshRpcClient(c.receiverUrl);return null;},loadNewUrl:function(a){FB.IFrameUtil.CanvasUtilServer.ensureRpcClient();FB.IFrameUtil.CanvasUtilServer._rpcClient.send('loadNewUrl',a,null);},loginResponse:function(a,b){FB.IFrameUtil.CanvasUtilServer.ensureRpcClient();if(!a){FB.IFrameUtil.CanvasUtilServer._rpcClient.send('loginResponse',null,null);}else FB.IFrameUtil.CanvasUtilServer._rpcClient.send('loginResponse',b,null);},feedResponse:function(){FB.IFrameUtil.CanvasUtilServer.ensureRpcClient();FB.IFrameUtil.CanvasUtilServer._rpcClient.send('feedResponse',null,null);},refreshRpcClient:function(a){FB.FBDebug.assert(a,'Inner receiver url is null.');if(FB.IFrameUtil.CanvasUtilServer._rpcClient)FB.IFrameUtil.CanvasUtilServer._rpcClient.detachClient();var b=new FB.XdComm.EndPoint(FB.IFrameUtil.CanvasUtilServer.iframeName,FB.XdComm.PageRelation.child,a);b.UID=Math.floor(Math.random()*1e+06);FB.IFrameUtil.CanvasUtilServer._rpcClient=new FB.XdComm.XdRpcClient('iframeInnerServer','iframeOuterClient',b);},ensureRpcClient:function(){FB.FBDebug.assert(FB.IFrameUtil.CanvasUtilServer._rpcClient,'Inner iframe server not ready.');}});
FB.subclass('FB.IFrameUtil.ResizeUtilServer','FB.Class',{init:function(){}});FB.provide('FB.IFrameUtil.ResizeUtilServer',{run:function(){FB.IFrameUtil.CanvasUtilServer.run(true);}});
FB.provide('FBIntern.Intl',(function(){var a=('['+'.!?'+'\u3002'+'\uFF01'+'\uFF1F'+'\u0964'+'\u2026'+'\u0EAF'+'\u1801'+'\u0E2F'+'\uFF0E'+']');function b(e){if(typeof e!='string')return false;return e.match(new RegExp(a+'['+')"'+"'"+'\u00BB'+'\u0F3B'+'\u0F3D'+'\u2019'+'\u201D'+'\u203A'+'\u3009'+'\u300B'+'\u300D'+'\u300F'+'\u3011'+'\u3015'+'\u3017'+'\u3019'+'\u301B'+'\u301E'+'\u301F'+'\uFD3F'+'\uFF07'+'\uFF09'+'\uFF3D'+'\s'+']*$'));}function c(e,f){if(f!==undefined)if(typeof f!='object'){FB.Debug.writeLine('intl.js: the 2nd argument must be a keyed array (not a string) '+'for tx('+e+', ...)');}else{var g;for(var h in f)if(f.hasOwnProperty(h)){if(b(f[h])){g=new RegExp('\{'+h+'\}'+a+'*','g');}else g=new RegExp('\{'+h+'\}','g');e=e.replace(g,f[h]);}}return e;}function d(e,f){if(typeof _string_table=='undefined')return null;return c(_string_table[e],f);}d._=c;return {tx:d,_tx:c};})());
FB.subclass('FB.UI.UIElement','FB.Class',{init:function(){},get_domElement:function(){return this._domElement;},set_domElement:function(a){this._domElement=a;return a;},setLeft:function(a){if(FB.localeIsRTL){this._domElement.style.right=a.toString()+'px';}else this._domElement.style.left=a.toString()+'px';},setTop:function(a){this._domElement.style.top=a.toString()+'px';},_domElement:null});FB.provide('FB.UI.UIElement',{addCssClass:function(a,b){var c=' '+a.className+' ',d=' '+b+' ';if(c.indexOf(d)<0)a.className=a.className+' '+b;},containsCssClass:function(a,b){var c=' '+a.className+' ';return c.indexOf(' '+b+' ')>=0;},removeCssClass:function(a,b){var c=' '+a.className+' ',d=' '+b+' ',e=c.indexOf(d);if(e>=0){var f=c.substring(1,e)+c.substring(e+d.length,c.length-1);a.className=f;}}});
FB.provide('FB.UI.PopupPlacement',{center:1,topCenter:2,hidden:3});
FB.subclass('FB.UI.Popup','FB.UI.UIElement',{init:function(){this._placement=FB.UI.PopupPlacement.center;this._offset=FB._create_Point(0,0);this._popupHeight=-1;this._popupWidth=-1;this._super();},setContentWidth:function(a){this._popupWidth=a+FB.UI.Popup._borderSize;},setContentHeight:function(a){this._popupHeight=a+FB.UI.Popup._borderSize;},getContentWidth:function(){if(this._popupWidth<0)return -1;return this._popupWidth-FB.UI.Popup._borderSize;},getContentHeight:function(){if(this._popupHeight<0)return -1;return this._popupHeight-FB.UI.Popup._borderSize;},show:function(){if(!this._loadedInDom){FB.UI.UIElement.addCssClass(this.get_domElement(),'fb_popup');FB.UI.Popup.get__popupContainer().appendChild(this.get_domElement());this._loadedInDom=true;}this.sizing();this.onAfterShow();},sizing:function(){if(!this._loadedInDom)return false;if(this._popupWidth>=0)this.get_domElement().style.width=this._popupWidth.toString()+'px';if(this._popupHeight>=0)this.get_domElement().style.height=this._popupHeight.toString()+'px';var a=FB._create_Size(this.get_domElement().offsetWidth,this.get_domElement().offsetHeight),b=null,c=FBIntern.Utility.get_windowSize(),d=document.documentElement,e=(this.hidden)?FB.UI.PopupPlacement.hidden:this.get_placement(),f;if(document.documentElement&&document.documentElement.scrollTop>0){f=document.documentElement.scrollTop;}else f=document.body.scrollTop;switch(e){case FB.UI.PopupPlacement.topCenter:b=FB._create_Point(d.scrollLeft+c.w/2,f+125);b.x-=(a.w/2);break;case FB.UI.PopupPlacement.center:b=FB._create_Point(d.scrollLeft+c.w/2,f+c.h/2);b.x-=(a.w/2);b.y-=(a.h/2);break;case FB.UI.PopupPlacement.hidden:b=FB._create_Point(-100-a.w,-100-a.h);break;}b.x+=this._offset.x;b.y+=this._offset.y;if(b.x<0)b.x=0;if(b.y<0&&e!==FB.UI.PopupPlacement.hidden)b.y=0;this.setLeft(b.x);this.setTop(b.y);return true;},onAfterShow:function(){},close:function(a){if(this.__closing)this.__closing(a);if(FBIntern.AppInfo.get_singleton().get_hostInfo().get_hostName()!==FBIntern.HostName.IE){FB.UI.Popup.get__popupContainer().removeChild(this.get_domElement());}else{var b=this.get_domElement();b.style.display='none';window.setTimeout(FB.bind(function(){if(b.parentNode)b.parentNode.removeChild(b);},this),4000);}if(this.__closed)this.__closed(a);},get_placementTarget:function(){return this._placementTarget;},set_placementTarget:function(a){this._placementTarget=a;return a;},get_offset:function(){return this._offset;},set_offset:function(a){this._offset=a;return a;},get_placement:function(){return this._placement;},set_placement:function(a){this._placement=a;return a;},add_closing:function(a){this.__closing=FB.Delegate.combine(this.__closing,a);},remove_closing:function(a){this.__closing=FB.Delegate.remove(this.__closing,a);},__closing:null,add_closed:function(a){this.__closed=FB.Delegate.combine(this.__closed,a);},remove_closed:function(a){this.__closed=FB.Delegate.remove(this.__closed,a);},__closed:null,_placementTarget:null,_loadedInDom:false,hidden:false});FB.provide('FB.UI.Popup',{_onLoad:function(){FB.UI.Popup._borderSize=20;FB.UI.Popup._popupContainer=null;},get__popupContainer:function(){if(!FB.UI.Popup._popupContainer){FB.UI.Popup._popupContainer=FB.$('fb_popupContainer');if(!FB.UI.Popup._popupContainer){var a=document.createElement('div');a.className='fb_resetstyles fb_popupContainer';FB.UI.Popup._popupContainer=document.body.appendChild(a);}}else FB.UI.Popup._popupContainer=document.body.appendChild(FB.UI.Popup._popupContainer);return FB.UI.Popup._popupContainer;}});
FB.subclass('FB.UI.DomResources','FB.Class',{init:function(){}});FB.provide('FB.UI.DomResources',{_onLoad:function(){FB.UI.DomResources._dicts=[];},addResourceDict:function(a){FB.Sys.add(FB.UI.DomResources._dicts,a);},getResourceById:function(a){var b=FB.UI.DomResources._dicts.length,c;for(var d=0;d<b;d++){c=((FB.UI.DomResources._dicts[d])).getClonedElement(a);if(c)return c;}return null;}});
FB.subclass('FBIntern.UIHelper','FB.Class',{init:function(){}});FB.provide('FBIntern.UIHelper',{findElementById:function(a,b){if(a.id===b)return a;var c=a.childNodes.length;for(var d=0;d<c;d++){var e=a.childNodes[d],f=FBIntern.UIHelper.findElementById(e,b);if(f)return f;}return null;}});
FB.subclass('FB.UI.PopupDialog','FB.UI.Popup',{init:function(a,b,c,d){this._super();this._content=b;this._showLoading=c;if(d)this.hidden=true;this.set_domElement(FB.UI.DomResources.getResourceById('fb_pop_dialog_table'));this._contentParent=FBIntern.UIHelper.findElementById(this.get_domElement(),'fb_dialog_content');this._header=FBIntern.UIHelper.findElementById(this.get_domElement(),'fb_dialog_header');this._header.innerHTML=FB.Sys.htmlEncode(a);var e=FBIntern.UIHelper.findElementById(this.get_domElement(),'fb_dialog_cancel_button');this._loader=FBIntern.UIHelper.findElementById(this.get_domElement(),'fb_dialog_loading_spinner');if(e)FBIntern.Utility.addEventListener(e,'click',FB.bind(this._onCloseButtonClicked,this));if(b)this._contentParent.appendChild(b);this._content.resizeHandler=FB.bind(function(f,g){if(f!=null){var h=parseInt(this._content.style.width);if(isNaN(h)||this.getContentWidth()<0){content_width=f+this._header.offsetWidth+FB.UI.PopupDialog._horizontalBorderSize;this.setContentWidth(content_width);}else if(f>h)this.setContentWidth(f-h+this.getContentWidth());}if(g!=null){var i=parseInt(this._content.style.height);if(isNaN(i)||this.getContentHeight()<0){content_height=g+this._header.offsetHeight+FB.UI.PopupDialog._verticalBorderSize;this.setContentHeight(content_height);}else if(g>=i)this.setContentHeight(g-i+this.getContentHeight());}this.sizing();},this);},sizing:function(){var a=this._super();if(!a)return false;if(this.getContentWidth()>=0){width=this.getContentWidth()-FB.UI.PopupDialog._horizontalBorderSize;this._content.style.width=width+'px';}if(this.getContentHeight()>=0){height=this.getContentHeight()-this._header.offsetHeight-FB.UI.PopupDialog._verticalBorderSize;this._content.style.height=height+'px';}return true;},_onCloseButtonClicked:function(a){this.close(false);},get__content:function(){return this._content;},set__content:function(a){if(this._content)this._contentParent.removeChild(this._content);this._content=a;this._contentParent.appendChild(this._content);return a;},get_id:function(){if(!this._id){if(!FB.UI.PopupDialog._dialogWithIds)FB.UI.PopupDialog._dialogWithIds={};this._id=FB.Sys.getKeyCount(FB.UI.PopupDialog._dialogWithIds).toString()+'_'+Math.random().toString();FB.UI.PopupDialog._dialogWithIds[this._id]=this;FB.UI.PopupDialog._enableXdTitleChange();}return this._id;},get__title:function(){this._header=FBIntern.UIHelper.findElementById(this.get_domElement(),'fb_dialog_header');return this._header.innerHTML;},set__title:function(a){this._header=FBIntern.UIHelper.findElementById(this.get_domElement(),'fb_dialog_header');this._header.innerHTML=FB.Sys.htmlEncode(a);return a;},_createCrossDomainClosingLink:function(a){if(!FB.XdComm.Server.singleton.isDataHandlerRegistered('fbClosingDialog'))FB.XdComm.Server.singleton.registerDataHandler('fbClosingDialog',FB.UI.PopupDialog._onXdClosingDialogHandler);var b={token:this.get_id(),result:a},c=new FB.XdComm.EndPoint(null,FB.XdComm.PageRelation.self,FB.XdComm.Server.singleton.get_receiverUrl());return FB.XdComm.Server.singleton.createUdpUrl('fbClosingDialog',b,c);},onAfterShow:function(){if(this._showLoading){FB.UI.UIElement.addCssClass(this._loader,'fb_dialog_loading');FBIntern.Utility.waitForLoaded(this._content,FB.bind(function(){FB.UI.UIElement.removeCssClass(this._loader,'fb_dialog_loading');if(this.hidden){this.hidden=false;this.sizing();}},this));}},_content:null,_contentParent:null,_header:null,_loader:null,_id:null,_showLoading:false});FB.provide('FB.UI.PopupDialog',{_onLoad:function(){FB.UI.PopupDialog._dialogWithIds=null;FB.UI.PopupDialog._rpcServer=null;FB.UI.PopupDialog._horizontalBorderSize=2;FB.UI.PopupDialog._verticalBorderSize=3;},_createConfirmationDialog:function(a,b,c){var d=new FB.UI.PopupDialog(a,b,false,false);d.add_closing(c);var e=FBIntern.UIHelper.findElementById(b,'fb_confirm'),f=FBIntern.UIHelper.findElementById(b,'fb_cancel');if(e)FBIntern.Utility.addEventListener(e,'click',function(g){d.close(true);});if(f)FBIntern.Utility.addEventListener(f,'click',function(g){d.close(false);});return d;},getById:function(a){if(FB.UI.PopupDialog._dialogWithIds)return FB.UI.PopupDialog._dialogWithIds[a];return null;},_enableXdTitleChange:function(){if(!FB.UI.PopupDialog._rpcServer)FB.UI.PopupDialog._rpcServer=new FB.XdComm.XdRpcServer('popupDialogServer',{changeTitle:FB._create_XdRpcMethodInfo(FB.UI.PopupDialog._rpcChangeTitle,null)});},_rpcChangeTitle:function(a,b){var c=a,d=c.id,e=FB.UI.PopupDialog.getById(d);if(e){e.set__title((c.title));}else FB.FBDebug.logLine(0,'Ignore changeTitle rpc request because we can\'t find the given dialog id = '+d);return null;},_onXdClosingDialogHandler:function(a,b){var c=a,d=c.token,e=c.result,f=FB.UI.PopupDialog.getById(d);if(f){FB.FBDebug.logLine(3,'Close dialog');f.close(e);}else FB.FBDebug.logLine(1,'Invalid token to close dialog: '+d);}});
FB.provide('FB.FeedStorySetting',{preview:1,autoaccept:2,doNotSend:3});
FB._create_UserInfoRecord=function(a,b,c,d){var e={};e.connectState=a;e.oneLineStorySetting=b;e.shortStorySetting=c;e.inFacebook=d;return e;};
FB.provide('FB.RequireConnect',{doNotRequire:0,require:1,promptConnect:2});
FB.subclass('FB.UI.DomResDict','FB.Class',{init:function(a){this._docFragment=document.createDocumentFragment();var b=document.createElement('div');b.innerHTML=a;this._docFragment.appendChild(b);},getClonedElement:function(a){var b=FB.UI.DomResDict._getElementInFragment(this._docFragment,'RES_ID_'+a);if(b){return b.cloneNode(true);}else return null;},_docFragment:null});FB.provide('FB.UI.DomResDict',{_getElementInFragment:function(a,b){var c=FBIntern.AppInfo.get_singleton().get_hostInfo();if(c.get_hostName()===FBIntern.HostName.IE&&c.majorVersion<=8){return a.getElementById(b);}else{var d=[],e=a.childNodes,f,g;for(g=0;g<e.length;g++){f=e[g];if(f.nodeType==1)d[d.length]=f;}while(d.length){f=d.shift();if(f.id==b)return f;e=f.childNodes;if(e.length!=0)for(g=0;g<e.length;g++){f=e[g];if(f.nodeType==1)d.push(f);}}return null;}}});
FB.subclass('FB.Helper','FB.Class',{init:function(){}});FB.provide('FB.Helper',{invokeAsCallbackOrRedirect:function(a){if(!a)return;if(FB.Sys.isAssignableFrom(FB.Type.getInstanceType(a),String)){window.location=a;}else{var b=a,c=FB.Facebook.apiClient.get_session();b((c)?c.uid:null);}}});
FB.subclass('FB.UI.FBMLPopupDialog','FB.UI.PopupDialog',{init:function(a,b){var c=document.createElement('div');this._super(a,c,false,false);this.setFBMLContent(b);},setFBMLContent:function(a){this.get__content().setAttribute('fbml','<fb:fbml>'+a+'</fb:fbml>');},setContentWidth:function(a){this._super(a);this.get__content().setAttribute('iframeWidth',a.toString()+'px');},setContentHeight:function(a){this._super(a);this.get__content().setAttribute('iframeHeight',a.toString()+'px');this.get_offset().y=-a/2;},onAfterShow:function(){this._super();var a=this.get__content();FB.Bootstrap._requireFeatures(['XFBML'],function(){serverFbml=new FB.XFBML.ServerFbml(a);FB.XFBML.Host.addElement(serverFbml);});}});
FB.provide('FB.FeedStorySize',{oneLine:1,shortStory:2,full:4});
FB.subclass('FB.SequencerBase','FB.Class',{init:function(){},_completedCallback:null,isParallel:true,_api:null});
FB._create__stepInfo=function(a,b){var c={};c.jsonRequest=a;c.result=b;return c;};
FB.subclass('FB.BatchSequencer','FB.SequencerBase',{init:function(){this.stepsList=[];this._super();},execute:function(a){this._completedCallback=a;var b=this.stepsList.length;if(b>1){var c={},d=[],e=new FB.ArrayEnumerator(this.stepsList);while(e.moveNext()){var f=e.get_current();FB.Sys.add(d,f.jsonRequest._requestBody);}c.method_feed=d;c.serial_only=!this.isParallel;var g=this._api._generateJsonRequest('batch.run',c);g.callback=FB.bind(function(h,i){if(!i&&(i=this._api._checkError(h)))h=null;this._setStepResults(h,i);this.onAllCompleted();},this);g.sendRequest();}else if(b===1){var f=this.stepsList[0];f.jsonRequest.callback=FB.bind(function(h,i){f.result.setPendingResult(h,i);this.onAllCompleted();},this);f.jsonRequest.sendRequest();}else this.onAllCompleted();},_setStepResults:function(a,b){var c=a;FB.FBDebug.assert(!c||c.length===this.stepsList.length,'Malformed batch result');var d=this.stepsList.length;for(var e=0;e<d;e++){var f=(this.stepsList[e]).result;if(b){f.exception=b;f.result=null;}else if(c){var g=c[e],h=FB.JSON.deserialize(g,true);f.setPendingResult(h,null);}}},onAllCompleted:function(){FB.Sys.clear(this.stepsList);if(this._completedCallback){var a=this._completedCallback;this._completedCallback=null;a();}},_addStep:function(a,b){var c=FB._create__stepInfo(a,b);FB.Sys.add(this.stepsList,c);}});
FB.subclass('FB.ImmediateSequencer','FB.BatchSequencer',{init:function(a){this._super();this.isParallel=false;this._callback=a;},_addStep:function(a,b){this.pendingResult=b;this._super(a,b);this.execute(null);},onAllCompleted:function(){FB.Sys.clear(this.stepsList);if(this._callback)this._callback(this.pendingResult.result,this.pendingResult.exception);},pendingResult:null,_callback:null});
FB.subclass('FB.FeedDialogInfo','FB.Class',{init:function(a,b,c,d){this.parameters=a;this.callback=b;this.showLoginDialog=c;this.userMessageObj=d;},parameters:null,callback:null,showLoginDialog:false,userMessageObj:null});
FB.subclass('FB.SessionDialog','FB.Class',{init:function(){this._connect=FB.Connect._singleton;this._timerId=-1;this._channelUrl=FB.XdComm.Server.singleton.get_receiverUrl();this._cancelChannelUrl=FB.XdComm.Server.singleton.get_receiverUrl();this._apiKey=FB.Facebook.apiKey;this._initializeSession=true;},setIsUserActionHint:function(a){this._isUserActionHint=a;return this;},setUseBrowserPopup:function(a){return this;},setTarget:function(a){this._overrideTarget=a;return this;},setInitializeSession:function(a){this._initializeSession=a;return this;},setChannelUrl:function(a){this._channelUrl=a;return this;},setCancelChannelUrl:function(a){this._cancelChannelUrl=a;return this;},setApiKey:function(a){this._apiKey=a;return this;},_onCancelLoginHandler:function(a,b){this._cancelCallback();},_cancelCallback:function(){if(this.__canceled)this.__canceled();this.destroy(true);},_sessionCallback:function(){if(!this._session)this._session=FB.Facebook.apiClient.get_session();if(this.__sessionGranted)this.__sessionGranted(this._session);this.destroy();},_handleSession:function(a,b){switch(a){case FB.ConnectState.userNotLoggedIn:this._show(false,b,true);break;case FB.ConnectState.appNotAuthorized:this._show(true,b,true);break;default:break;}},_ensureHandlers:function(){if(!FB.XdComm.Server.singleton.isDataHandlerRegistered('fbLogin'))FB.XdComm.Server.singleton.registerDataHandler('fbLogin',FB.bind(this._onLoginHandler,this));if(!FB.XdComm.Server.singleton.isDataHandlerRegistered('fbCancelLogin'))FB.XdComm.Server.singleton.registerDataHandler('fbCancelLogin',FB.bind(this._onCancelLoginHandler,this));},_onLoginHandler:function(a,b){this._close();var c=FB.Connect._singleton,d=a,e=(a).split('&');this._session=FB.JSON.deserialize(e[0],true);if(this._initializeSession){this._connect._setupSession(this._session);}else this._sessionCallback();},_show:function(a,b,c){this._ensureHandlers();if(FB.Facebook.get_isInCanvas()){this._showCanvasDialog();}else{var d=this._createLoginUrl((a)?'tos.php':'login.php');if(b||!c)this._showBrowserPopup(d,a);if(!this._authWindow){FB.FBDebug.logLine(1,'Popup got blocked');if(c){this._showPopupBlockedWarning(FB.bind(function(){this._show(a,true,false);},this));}else FB.Facebook.apiClient.requireLogin(null);}}if(FB.Facebook.apiClient)FB.Facebook.apiClient.get_sessionWaitable().waitUntilReady(FB.bind(this._connect._apiClient_SessionReady,this._connect));},_showPopupBlockedWarning:function(a){var b=FBIntern.FbGlobals.get_fB_StaticResourceVersions(),c=b.login_img_white_medium_long,d=document.createElement('div');d.innerHTML=('<div class="fb_popup_blocked">'+'<div class="fb_confirmation_stripes"></div>'+'<div class="fb_popup_blocked_inner">'+FBIntern.Intl.tx._("This site requires that you Connect with Facebook.")+'<img id="fb_popup_blocked_connect" src="'+c+'" />'+'</div>'+'<div class="fb_popup_blocked_buttons">'+'<input id="fb_popup_blocked_cancel" '+'type="button" '+'value="Cancel" />'+'</div>'+'</div>');var e=FB.bind(function(i){this._warningDialog=null;if(!i)this._cancelCallback();},this),f=new FB.UI.PopupDialog(FBIntern.Intl.tx._("Connect with Facebook to Continue"),d,false,false);f.add_closing(e);var g=FBIntern.UIHelper.findElementById(d,'fb_popup_blocked_connect');FBIntern.Utility.addEventListener(g,'click',FB.bind(function(i){f.close(true);a();},this));var h=FBIntern.UIHelper.findElementById(d,'fb_popup_blocked_cancel');FBIntern.Utility.addEventListener(h,'click',FB.bind(function(i){f.close(false);},this));this._warningDialog=f;f.show();},_showCanvasDialog:function(){if(this._isActive){this._dialogType=FB.DialogType.canvas;this._fbmlDialog=true;FB.CanvasClient.requireLogin(FB.bind(function(a){this._session=a;if(this._initializeSession)this._connect._setupSession(this._session);this._sessionCallback();},this),FB.bind(this._cancelCallback,this));}},_showBrowserPopup:function(a,b){var c=FBIntern.Utility.get_windowLocation(),d=FBIntern.Utility.get_windowSize(),e=FB._create_Size(627,326),f=FB._create_Point(Math.max(0,c.x+(d.w-e.w)/2),Math.max(0,c.y+(d.h-e.h)/2));this._close();if(this._isActive){this._dialogType=FB.DialogType.popUp;var g=FB.Sys.format('location=yes,left={0},top={1},width={2},height={3},resizable=yes',f.x,f.y,e.w,e.h);this._authWindow=window.open(a,'_blank',g,true);this._monitorPopupWindowClosed();}},isActive:function(){if(this._isActive&&this._dialogType===FB.DialogType.popUp)if(!this._authWindow||this._authWindow.closed)this._isActive=false;return this._isActive;},focus:function(){if(this._dialogType===FB.DialogType.popUp)this._authWindow.focus();},_createLoginUrl:function(a){var b,c,d;b='_opener';c='popup';d=FB.XdComm.PageRelation.opener;if(this._overrideTarget)b=this._overrideTarget;var e=new FB.XdComm.EndPoint(null,d,this._cancelChannelUrl),f=FB.XdComm.Server.singleton,g=f.get_GUID(),h;if(FB.XdComm.Server.singleton._useXdProxy()){h=(f._createXdProxyBase(e)+'guid='+g);}else h=FBIntern.Uri.addQueryParameters(this._channelUrl,'fb_login&#fname='+b+'&guid='+g);var i=f.createUdpUrl('fbCancelLogin',null,e),j={return_session:1,nochrome:1,fbconnect:1,extern:FB.Facebook.get_isInConnect(),display:c,api_key:this._apiKey,v:FB.Facebook.version,next:h,cancel_url:i,channel_url:this._channelUrl};if(FB.Sys.containsKey(FB.Facebook.appSettings,'permsToRequestOnConnect'))j.req_perms=FB.Facebook.appSettings.permsToRequestOnConnect;return FBIntern.Utility.createFacebookUrl('www',a,j,false);},request:function(){this._isActive=true;var a=FBIntern.Utility.get_isInUserActionCallstack()||this._isUserActionHint;if(!FB.Connect.get_status().get_isReady()&&a){this._waitForDialog();this._handleSession(FB.ConnectState.userNotLoggedIn,a);}else FB.Connect.get_status().waitUntilReady(FB.bind(function(b){var c=b;if(c===FB.ConnectState.connected){this._sessionCallback();}else{this._waitForDialog();this._handleSession(c,a);}},this));a=false;},listen:function(){this._ensureHandlers();},_waitForDialog:function(){FB.Connect.get_status().waitForValue(FB.ConnectState.connected,FB.bind(this._sessionCallback,this));},_close:function(a){if(this._authWindow){this._authWindow.close();this._authWindow=null;}if(this._fbmlDialog){FB.CanvasClient.closeLogin();this._fbmlDialog=false;}if(this._warningDialog){this._warningDialog.close(!a);this._warningDialog=null;}},destroy:function(a){this._close(a);this.__sessionGranted=null;this.__canceled=null;this._isActive=false;if(FB.XdComm.Server.singleton.isDataHandlerRegistered('fbLogin'))FB.XdComm.Server.singleton.unregisterDataHandler('fbLogin');if(FB.XdComm.Server.singleton.isDataHandlerRegistered('fbCancelLogin'))FB.XdComm.Server.singleton.unregisterDataHandler('fbCancelLogin');},add_sessionGranted:function(a){this.__sessionGranted=FB.Delegate.combine(this.__sessionGranted,a);},remove_sessionGranted:function(a){this.__sessionGranted=FB.Delegate.remove(this.__sessionGranted,a);},__sessionGranted:null,addSessionHandler:function(a){this.add_sessionGranted(a);return this;},add_canceled:function(a){this.__canceled=FB.Delegate.combine(this.__canceled,a);},remove_canceled:function(a){this.__canceled=FB.Delegate.remove(this.__canceled,a);},__canceled:null,addCancelHandler:function(a){this.add_canceled(a);return this;},_monitorPopupWindowClosed:function(){if(this._authWindow&&this._timerId===-1)this._timerId=window.setInterval(FB.bind(function(){if(this._authWindow&&this._authWindow.closed){this._authWindow=null;window.clearInterval(this._timerId);this._timerId=-1;this._cancelCallback();}},this),200);},_isActive:false,_isUserActionHint:true,_authWindow:null,_fbmlDialog:false,_warningDialog:null,_apiKey:null,_channelUrl:null,_cancelChannelUrl:null,_overrideTarget:null,_session:null,_initializeSession:false,_dialogType:0});FB.provide('FB.SessionDialog',{_onLoad:function(){FB.SessionDialog._singleton=null;},closeAll:function(){if(FB.SessionDialog._singleton){FB.SessionDialog._singleton.destroy();FB.SessionDialog._singleton=null;}},make:function(){FB.SessionDialog.closeAll();FB.SessionDialog._singleton=new FB.SessionDialog();return FB.SessionDialog._singleton;},getActive:function(){if(FB.SessionDialog._singleton&&FB.SessionDialog._singleton.isActive())return FB.SessionDialog._singleton;return null;}});
FB.subclass('FB.Connect','FB.Class',{init:function(){this._status=new FB.SimpleWaitable();},get__userInfo:function(){return this._userInfo;},set__userInfo:function(a){if(a!==this._userInfo){this._userInfo=a;this._setInfoCookies(a);}return a;},_getInfoFromCookies:function(){if(FB.Facebook.appSettings.doNotUseCachedConnectState)return null;var a=FB.JSON.deserialize(FBIntern.Cookie.getValue('fbsetting_'+FB.Facebook.apiKey));if(a&&(a.connectState===FB.ConnectState.userNotLoggedIn||a.connectState===FB.ConnectState.appNotAuthorized||a.connectState===FB.ConnectState.connected)&&a.oneLineStorySetting>0&&a.shortStorySetting>0)return a;return null;},_setInfoCookies:function(a){if(FB.Facebook.appSettings.disableCookies)return;if(a&&a.oneLineStorySetting>0&&a.shortStorySetting>0){FBIntern.Cookie.set('fbsetting_'+FB.Facebook.apiKey,FB.JSON.serialize(a),'/',FB.Facebook.get_baseDomain(),1);}else if(!a)FBIntern.Cookie.clear('fbsetting_'+FB.Facebook.apiKey,'/',FB.Facebook.get_baseDomain());},_ensureQueryStatus:function(){if(!this._loginStatusIFrameCreated){var a=this._getInfoFromCookies();if(a&&(a.connectState===FB.ConnectState.userNotLoggedIn||a.connectState===FB.ConnectState.appNotAuthorized||a.connectState===FB.ConnectState.connected)){this.set__userInfo(a);this._status._setResult(a.connectState);}this._refreshQueryStatus();}},_refreshQueryStatus:function(){if(!this._loginStatusIFrameCreated||this._pollTries>0){this._loginStatusIFrameCreated=true;if(this._pollTries>0)this._pollTries--;var a=this._getInfoFromCookies(),b=0;if(a)b=(a.inFacebook)?1:2;this._setInfoCookies(null);if(!this._rpcServer)this._rpcServer=new FB.XdComm.XdRpcServer('loginServer',{InitLogin:FB._create_XdRpcMethodInfo(FB.bind(this._initLogin,this),null)});this._ensureLoginHandler();FB.FBDebug.assert(FB.Facebook.apiKey,'API key can\'t be null');var c={api_key:FB.Facebook.apiKey,extern:b,channel:FB.XdComm.Server.singleton.get_receiverUrl()};if(FB.Facebook.appSettings.fetchSignedPublicSessionData)c.public_session_data=1;var d=FB.Facebook.get_iframeSignature();if(d)c.iframe_key=d;var e=FB.XdComm.Server.singleton.getUniqueOrigin();if(e)c.origin=e;var f=FBIntern.Utility.createFacebookUrl('www','extern/login_status.php',c,false);FB.XdComm.Server.singleton.createNamedHiddenIFrame('loginStatus',f,null,null);}},_ensureLoginHandler:function(){if(!FB.XdComm.Server.singleton.isDataHandlerRegistered('fbLogout'))FB.XdComm.Server.singleton.registerDataHandler('fbLogout',FB.bind(this._onLogoutHandler,this));},_onLogoutHandler:function(a,b){FB.FBDebug.logLine(2,'User logged out');if(this._logoutIframe){if(this._logoutIframe.parentNode)this._logoutIframe.parentNode.removeChild(this._logoutIframe);this._logoutIframe=null;}FB.Facebook.apiClient.set_session(null);this.set__userInfo(null);this._status._setResult(FB.ConnectState.userNotLoggedIn);if(this._logoutCallback)this._logoutCallback(true);},_setupSession:function(a){var b=FB.Connect._singleton;this._setInfoCookies(null);FB.Facebook.apiClient.set_session(a);},_closeAllDialogs:function(a){FB.SessionDialog.closeAll();if(this._permissionDialog){this._permissionDialog.close(false);this._permissionDialog=null;}if(a)a();},switchUser:function(){this._closeAllDialogs(FB.bind(function(){FB.Connect.requireSession(null);},this));},_initLogin:function(a,b){var c=a,d=c.session,e=c.settings,f=c.connectState,g=e.feedStorySettings;FB.Facebook.set_baseDomain(c.baseDomain);FB.Facebook.locale=e.locale;window.FB.locale=FB.Facebook.locale;this._publicSessionData=c.publicSessionData;this._perms=c.perms;var h,i;if(g){h=g.one_line;i=g['short'];}else{h=FB.FeedStorySetting.doNotSend;i=FB.FeedStorySetting.doNotSend;}var j=e.inFacebook;FB.Facebook.isInConnect=(j)?1:2;if(!FB.isSecure()&&c.https)FB._secure=true;this.set__userInfo(FB._create_UserInfoRecord(f,h,i,j));switch(f){case FB.ConnectState.userNotLoggedIn:FB.Facebook.apiClient.set_session(null);this._status._setResult(FB.ConnectState.userNotLoggedIn);break;case FB.ConnectState.appNotAuthorized:FB.Facebook.apiClient.set_session(null);this._status._setResult(FB.ConnectState.appNotAuthorized);break;case FB.ConnectState.connected:FB.Facebook.apiClient.set_session(d);this._status._setResult(FB.ConnectState.connected);break;}if(f===FB.ConnectState.connected){if(this._onConnectedCallback)this._onConnectedCallback();this._pollTries=0;this._onConnectedCallback=null;}else if(this._pollTries>0){window.setTimeout(FB.bind(function(){this._refreshQueryStatus();},this),this._pollInterval);}else this._onConnectedCallback=null;return null;},_apiClient_SessionReady:function(a){this._status._setResult(FB.ConnectState.connected);},_facebookIFrame:function(a,b,c){a.open();var d=new FB.StringBuilder();d.append('\n<!DOCTYPE html PUBLIC \"-//W3C//DTD XHTML 1.0 Strict//EN\" \"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd\">\n<html xmlns=\"http://www.w3.org/1999/xhtml\" >\n<head><title></title></head>\n<body>');var e=FBIntern.Utility.createFacebookUrl('www',b,{},false);d.append(FB.Sys.format('<form method=\"post\" action=\"{0}\" id=\"tempform\" name=\"tempform\" >',e));var f=c;for(var g in f){var h={key:g,value:f[g]};d.append(FB.Sys.format('<input type=\"hidden\" name=\"{0}\" id=\"{1}\" value=\"{2}\"  />',h.key,h.key,FB.Sys.htmlEncode(h.value)));}d.append('\n</form>\n    <script type=\"text/javascript\">\n      window.setTimeout(function(){document.forms[\'tempform\'].submit();}, 0);\n    </script>\n</body>\n</html>\n        ');var i=d.toString();a.write(i);a.close();},get__isInConnect:function(){var a=FB.Connect._singleton.get__userInfo();if(!a){return 0;}else return (a.inFacebook)?1:2;},_loginStatusIFrameCreated:false,_pollInterval:0,_pollTries:0,_onConnectedCallback:null,_rpcServer:null,_feedformDialog:null,_shareDialog:null,_permissionDialog:null,_feedformNum:0,_sessionlessFeedFrameNum:0,_userInfo:null,_logoutCallback:null,_logoutIframe:null,_sessionlessPublishCallback:null,_publicSessionData:null,_popupWindows:{}});FB.provide('FB.Connect',{_onLoad:function(){FB.Connect._singleton=new FB.Connect();FB.Connect._logoutMethod_infoDialog='info_dialog';FB.Connect._logoutMethod_prompt='prompt';FB.Connect._logoutMethod_noUI='no_ui';FB.Connect._logoutMethod=FB.Connect._logoutMethod_infoDialog;var a='\n     <table id=\"RES_ID_fb_pop_dialog_table\" class=\"fb_pop_dialog_table\">\n       <tr>\n         <td class=\"fb_pop_topleft\"></td>\n         <td class=\"fb_pop_border\"></td>\n         <td class=\"fb_pop_topright\"></td>\n       </tr>\n       <tr>\n         <td class=\"fb_pop_border\"></td>\n         <td class=\"fb_pop_content\" id=\"pop_content\">\n           <div class =\"fb_pop_content_container\">\n              <h2 class=\"fb_resetstyles\">\n                <div class=\"fb_dialog_icon\"></div>\n                <span class=\"fb_dialog_header\" id=\"fb_dialog_header\"></span>\n                <div class=\"fb_dialog_loading_spinner\" id=\"fb_dialog_loading_spinner\">&nbsp;</div>\n                <a id=\"fb_dialog_cancel_button\" class=\"fb_dialog_cancel_button\" title=\"close dialog\" href=\"#\" onclick=\"return false;\">&nbsp;</a>\n              </h2>\n              <div id=\"fb_dialog_content\" class=\"fb_dialog_content\"></div>\n           </div>\n         </td>\n         <td class=\"fb_pop_border\"></td>\n       </tr>\n       <tr>\n         <td class=\"fb_pop_bottomleft\"></td>\n         <td class=\"fb_pop_border\"></td>\n         <td class=\"fb_pop_bottomright\"></td>\n       </tr>\n    </table>\n    <div id=\"RES_ID_fb_logout_confirmation\" class=\"fb_logout_confirm_content\">\n      <div class=\"fb_confirmation_stripes\"></div>\n      <div class=\"fb_confirmation_content\">';a+='<p>'+FBIntern.Intl.tx._("Do you want to log out of both this site and Facebook?")+'</p>';a+='\n      </div>\n      <div class=\"fb_dialog_buttons\">';a+='<input id=\"fb_confirm\" type=\"button\" '+'class=\"fb_inputsubmit\" value=\"'+FBIntern.Intl.tx._("Log out")+'\"/>';a+='<input id=\"fb_cancel\" type=\"button\" '+'class=\"fb_inputbutton fb_inputaux\" value=\"'+FBIntern.Intl.tx._("Cancel")+'\"/>';a+='\n        </div>\n    </div>\n    <div id=\"RES_ID_fb_logout_info\" class=\"fb_logout_confirm_content\">\n      <div class=\"fb_confirmation_stripes\"></div>\n      <div class=\"fb_confirmation_content\">';a+='<p>'+FBIntern.Intl.tx._("You are logging out of both this site and Facebook.")+'</p>';a+='\n      </div>\n      <div class=\"fb_dialog_buttons\">';a+='<input id=\"fb_confirm\" type=\"button\" '+'class=\"fb_inputsubmit\" value=\"'+FBIntern.Intl.tx._("Close")+'\"/>';a+='\n       </div>\n   </div>';FB.UI.DomResources.addResourceDict(new FB.UI.DomResDict(a));},get_status:function(){var a=FB.Connect._singleton;a._ensureQueryStatus();return a._status;},_getLogoutUrl:function(a){var b={api_key:FB.Facebook.apiKey,session_key:FB.Facebook.apiClient.get_session().session_key,extern:FB.Connect._singleton.get__isInConnect(),next:a};return FBIntern.Utility.createFacebookUrl('www','logout.php',b,false);},logout:function(a){FB.Connect._handleLogout(a,function(b){if(b){var c=FB.Connect._singleton,d=FB.XdComm.Server.singleton,e=FB.XdComm.Server.singleton.get_GUID(),f;if(d._useXdProxy()){var g=new FB.XdComm.EndPoint(null,FB.XdComm.PageRelation.self,d.get_receiverUrl());f=(d._createXdProxyBase(g)+'guid='+e+'&session=loggedout');}else f=FBIntern.Uri.addQueryParameters(d.get_receiverUrl(),'fb_login&fname=_parent&guid='+e+'&session=loggedout');c._ensureLoginHandler();c._logoutCallback=a;var h=FB.Connect._getLogoutUrl(f);c._logoutIframe=d.createNamedHiddenIFrame('fbLogout',h,'fb_logout',null);}else if(a)a(false);});},logoutAndRedirect:function(a){FB.Connect._handleLogout(null,function(b){if(b){var c=FB.Connect._singleton,d=FBIntern.Uri.create(new FBIntern.Uri(document.URL),a).get_uriString(),e=FB.Connect._getLogoutUrl(d);c.set__userInfo(null);FB.Facebook.apiClient.set_session(null);window.location=e;}});},ifUserConnected:function(a,b){FB.Connect.get_status().waitForCondition(function(c){FB.Connect._handleConnectStateLogout(a,b,c);return false;});},_handleConnectStateLogout:function(a,b,c){if(c.get_isReady())window.setTimeout(function(){var d=c.result===FB.ConnectState.connected;FB.Helper.invokeAsCallbackOrRedirect((d)?a:b);},0);},listenForIframeConnect:function(){var a=FB.Connect._singleton;FB.Facebook.apiClient.get_sessionWaitable().waitUntilReady(FB.bind(a._apiClient_SessionReady,a));},clientConnectSetup:function(a){var b=FB.Connect._singleton;FB.Connect.listenForIframeConnect();FB.Connect.get_status().add_changed(function(c){var d=FB.Connect.get_status().result;a(d===FB.ConnectState.connected);});},_handleLogout:function(a,b){FB.Connect.get_status().waitUntilReady(function(c){var d=FB.Facebook.apiClient.get_session();if(d){if(FB.Connect._logoutMethod===FB.Connect._logoutMethod_infoDialog){FB.Connect._createInfoDialog(b);}else if(FB.Connect._logoutMethod===FB.Connect._logoutMethod_noUI){b(true);}else FB.UI.PopupDialog._createConfirmationDialog(FBIntern.Intl.tx._("Logging Out of Facebook?"),FB.UI.DomResources.getResourceById('fb_logout_confirmation'),b).show();}else{FB.FBDebug.logLine(2,'Cannot logout because user does not have a session');if(a)a(false);}});},requireSession:function(a,b,c){if(arguments.length===1){if(typeof(a)!=='function'){c=(a);a=null;}}else if(arguments.length===2)if(typeof(b)!=='function'){c=(b);b=null;}var d=FB.SessionDialog.getActive();if(!d){d=FB.SessionDialog.make();d.setIsUserActionHint(c).request();}else d.focus();if(a)FB.Connect.get_status().waitForValue(FB.ConnectState.connected,a);if(b)d.add_canceled(b);},_createInfoDialog:function(a){var b=null;b=FB.UI.PopupDialog._createConfirmationDialog(FBIntern.Intl.tx._("Logged Out of Facebook"),FB.UI.DomResources.getResourceById('fb_logout_info'),function(c){b=null;});b.show();b.add_closed(function(c){if(a)a(true);});window.setTimeout(function(){if(b)b.close(false);},2000);},inviteConnectUsers:function(){FB.Facebook.get_sessionWaitable().waitUntilReady(function(a){var b=new FB.UI.FBMLPopupDialog(FBIntern.Intl.tx._("Invite Your Friends to Connect"),''),c=b._createCrossDomainClosingLink(false);b.setFBMLContent('<fb:connect-form action=\"'+c+'\" view=\"dialog\" />');b.setContentWidth(474);b.setContentHeight(350);b.show();});},showPermissionDialog:function(a,b,c,d){var e=null;if(a.indexOf('offline_access')>=0){e=function(k){if(!FB.Sys.isNullOrEmpty(k)&&(k).indexOf('offline_access')>=0){FB.Connect.forceSessionRefresh(function(){if(b)b(k);});}else if(b)b(k);};}else if(b)e=b;var f={ext_perm:a};if(c)f.enable_profile_selector=1;if(d){var g=true,h='',i=new FB.ArrayEnumerator(d);while(i.moveNext()){var j=i.get_current();if(!g)h+=',';h+=j;g=false;}f.profile_selector_ids=h;}FB.Connect.showConnectDialog(FBIntern.Intl.tx._("Request for Permission"),'connect/prompt_permissions.php',f,293,628,e);},showAddFriendDialog:function(a,b){var c=null;if(FB.Connect.isUIServerEnabled('friends.add')){if(b)c=function(e){b(e.action);};FB.Connect.showUIServerDialog('friends.add',{id:a},c);return;}if(b)c=function(e){var f=(e==='true')?true:false;b(f);};var d={id:a,display:'dialog'};FB.Connect.showConnectDialog(FBIntern.Intl.tx._("Add Friend"),'addfriend.php',d,-1,540,c);},showConnectDialog:function(a,b,c,d,e,f){FB.Connect.requireSession(function(){FB.IFrameUtil.ResizeUtilServer.run();var g=FB.Connect._singleton,h=FB.XdComm.Server.singleton.createNamedHiddenIFrame('dialogContent'+Math.random().toString(),'','fb_connect_dialog_iframe',null);if(d>0)h.style.height=d+'px';g._permissionDialog=new FB.UI.PopupDialog(a,h,true,false);g._permissionDialog.set_placement(FB.UI.PopupPlacement.topCenter);if(e>0)g._permissionDialog.setContentWidth(e);if(f)g._permissionDialog.add_closed(f);var i=g._permissionDialog._createCrossDomainClosingLink('xxRESULTTOKENxx'),j=FB.XdComm.Server.singleton.get_receiverUrl(),k={api_key:FB.Facebook.apiKey,v:FB.Facebook.version,extern:g.get__isInConnect(),next:i,channel_url:j,dialog_id:encodeURIComponent(g._permissionDialog.get_id())};if(c){var l=c;for(var m in l){var n={key:m,value:l[m]};k[n.key]=n.value;}}var o=FB.XdComm.Server.singleton.getUniqueOrigin();if(o)k.origin=o;k.session_key=FB.Facebook.apiClient.get_session().session_key;h.src=FBIntern.Utility.createFacebookUrl('www',b,k,false);g._permissionDialog.show();});},createApplication:function(a,b){FB.Facebook.get_sessionState().waitUntilReady(function(c){FB.IFrameUtil.ResizeUtilServer.run();var d=FB.Connect._singleton,e=FB.XdComm.Server.singleton.createNamedHiddenIFrame('dialogContent'+Math.random().toString(),'','fb_create_app_iframe',null);e.style.height='214px';e.style.width='448px';var f=new FB.UI.PopupDialog(FBIntern.Intl.tx._("Integrate with Facebook?"),e,true,false);if(b)f.add_closed(b);var g=f._createCrossDomainClosingLink('create-app-return-val'),h=f._createCrossDomainClosingLink(false),i={api_key:FB.Facebook.apiKey,v:FB.Facebook.version,name:a,next:g,cancel:h,channel_url:FB.XdComm.Server.singleton.get_receiverUrl()};e.src=FBIntern.Utility.createFacebookUrl('www','connect/create_app.php',i,false);f.show();});},pollLoginStatus:function(a,b,c){var d=FB.Connect._singleton;if(d.get__userInfo().connectState===FB.ConnectState.connected){if(c)c();return;}d._pollTries=b;d._pollInterval=a;d._onConnectedCallback=c;window.setTimeout(function(){d._refreshQueryStatus();},d._pollInterval);},forceSessionRefresh:function(a){var b=FB.Connect._singleton;++b._pollTries;b._onConnectedCallback=a;b._refreshQueryStatus();},showAddSectionButton:function(a,b){},_showAddSectionDialog:function(a){},streamPublish:function(a,b,c,d,e,f,g,h){var i=FB.Connect._singleton;if(g&&FB.Connect._singleton._perms&&FB.Connect._singleton._perms.extended&&FB.Sys.contains(FB.Connect._singleton._perms.extended,'publish_stream')){var j=new FB.ImmediateSequencer(function(m,n){if(f)f(m,n,{user_message:a});}),k={};k.message=a;k.attachment=b;k.action_links=c;k.target_id=d;FB.Facebook.apiClient.callMethod('stream.publish',k,j);return true;}var l={message:a,attachment:b,action_links:c,target_id:d,actor_id:h,user_message_prompt:e};return FB.Connect._ShowFeedDialogGeneric(l,FB.RequireConnect.doNotRequire,f,true,null);},showFeedDialog:function(a,b,c,d,e,f,g,h,i){var j=null,k=i;if(i){var l=false;l=(typeof i=='string');if(l){j=i;k=null;}else j=k.value;}var m={message:j,template_id:a,template_data:b,body_general:d,user_message_prompt:h,to_ids:c};return FB.Connect._ShowFeedDialogGeneric(m,f,g,false,k);},_ShowFeedDialogGeneric:function(a,b,c,d,e){var f=a.to_ids,g=a.target_id,h=a.actor_id,i=FB.Facebook.apiClient.get_session(),j=(i)?i.uid:null;if(!g&&f&&f.length>0){g=f[0];a.target_id=g;delete a.to_ids;}var k;if(h&&h!=j){k=FBIntern.Intl.tx._("Post to the Page's Wall");}else if(g&&g!=j){k=FBIntern.Intl.tx._("Post to Your Friend's Wall");}else k=FBIntern.Intl.tx._("Post to Your Wall");if(c)var l=function(m){var n=null,o=null;if(m&&m.post_id){FB.Facebook.apiClient.fql_query('select message from stream where post_id="'+m.post_id+'"',function(p){var q=null;if(p&&p.length>0)q={user_message:p[0].message};c(m.post_id,null,q);});}else c(null,null,null);};FB.Connect._prepareFeedDialogParameters(a);FB.Connect.get_status().waitUntilReady(function(m){var n=function(){FB.Connect.showUIServerDialog('stream.publish',a,l,k);},o=m;if(b===FB.RequireConnect.require&&o!==FB.ConnectState.connected){c(null,null,null);}else if(b===FB.RequireConnect.promptConnect&&o!==FB.ConnectState.connected){FB.Connect.requireSession(n,function(){c(null,null,null);});}else n();});return true;},_prepareFeedDialogParameters:function(a){var b=FB.Connect._singleton,c=['template_data','attachment','action_links','to_ids'],d=new FB.ArrayEnumerator(c);while(d.moveNext()){var e=d.get_current();if(a[e])a[e]=FB.JSON.serialize(a[e]);}var f=a;for(var g in f){var h={key:g,value:f[g]};if(!a[h.key])delete a[h.key];}},showShareDialog:function(a,b){var c=FB.Connect._singleton;if(c._shareDialog)b();FB.Connect.get_status().waitUntilReady(function(d){var e=d;if(e!==FB.ConnectState.connected){var f={u:encodeURIComponent(a),src:'connect',api_key:FB.Facebook.apiKey};window.open(FBIntern.Utility.createFacebookUrl('www','sharer.php',f,false),'sharer','toolbar=0,status=0,width=626,height=436');}else{if(!this.shareFrameCounter)this.shareFrameCounter=0;var g='fb_share_iframe_'+this.shareFrameCounter++,h=FB.XdComm.Server.singleton.createNamedHiddenIFrame(g,FB.XdComm.Server.singleton.get_receiverUrl(),'fb_shareIFrame','frameborder=\"0\"'),i=FBIntern.Intl.tx._("Share this story?");c._shareDialog=new FB.UI.PopupDialog(i,h,true,true);c._shareDialog.set_placement(FB.UI.PopupPlacement.topCenter);c._shareDialog.add_closed(function(k){c._shareDialog=null;if(b)b();});var j=c._shareDialog._createCrossDomainClosingLink(false);c._shareDialog.setContentWidth(650);c._shareDialog.setContentHeight(175);c._shareDialog.show();FBIntern.Utility.getIFrameDocument(g,h,function(k){c._facebookIFrame(k,'sharer.php?u='+encodeURIComponent(a)+'&src=connect&apikey='+FB.Facebook.apiKey,{channel_url:FB.XdComm.Server.singleton.get_receiverUrl(),close_url:j,display:'dialog',session_key:FB.Facebook.apiClient.get_session().session_key,extern:c.get__isInConnect()});});}});},isUIServerEnabled:function(a){if(!FB.dynData)return false;return FB.dynData.ui_server_dialogs[a];},showUIServerDialog:function(a,b,c,d){var e=FB.Connect._singleton.get__isInConnect(),f=FB.XdComm.Server.singleton.get_receiverUrl(),g={api_key:FB.Facebook.apiKey,method:a,channel:f,extern:e};FB.copy(g,b);if(!d)d=FB.Connect.getUIServerDialogProperty(a,'title');FB.Connect.get_status().waitUntilReady(function(h){var i=h;if(i===FB.ConnectState.connected){FB.Connect._showUIServerIframe(a,g,c,d);}else FB.Connect._showUIServerWindow(a,g,c,d);});},_popupWindowCloseHandler:function(a){var b=a.token,c=a.result,d=FB.Connect._singleton._popupWindows[b];if(d){if(d.callback)d.callback(c);d.win.close();}else FB.FBDebug.logLine(1,'Invalid token to close popup window: '+b);},_showUIServerWindow:function(a,b,c,d){b.display='popup';if(!FB.XdComm.Server.singleton.isDataHandlerRegistered('fbClosingPopupWindow'))FB.XdComm.Server.registerSimpleHandler('fbClosingPopupWindow',FB.Connect._popupWindowCloseHandler);var e="popup_window_"+Math.random().toString(),f=new FB.XdComm.EndPoint(null,FB.XdComm.PageRelation.opener,b.channel),g={token:e,result:'xxRESULTTOKENxx'};b.next=FB.XdComm.Server.singleton.createUdpUrl('fbClosingPopupWindow',g,f);var h=FB.Connect.getUIServerDialogProperty(a,'width'),i=FB.Connect.getUIServerDialogProperty(a,'height'),j=FBIntern.Utility.get_windowLocation(),k=FBIntern.Utility.get_windowSize(),l=FB._create_Size(h,i),m=FB._create_Point(Math.max(0,j.x+(k.w-l.w)/2),Math.max(0,j.y+(k.h-l.h)/2)),n=FB.Sys.format('location=yes,left={0},top={1},width={2},height={3},resizable=yes',m.x,m.y,l.w,l.h),o=FBIntern.Utility.createFacebookUrl('www','connect/uiserver.php',{},false),p=FBIntern.Uri.createQueryString(b);if(o.length+p.length>=2000){var q=window.open('about:blank','_blank',n);b.url_overflow=1;FB.Connect._singleton._facebookIFrame(q.document,'connect/uiserver.php',b);}else{o=FBIntern.Uri.addQueryParameters(o,p);var q=window.open(o,'_blank',n);}FB.Connect._singleton._popupWindows[e]={win:q,callback:c};},_showUIServerIframe:function(a,b,c,d){b.display='iframe';b.session_key=FB.Facebook.apiClient.get_session().session_key;var e="fb_dialog_iframe_"+Math.random().toString();FB.IFrameUtil.ResizeUtilServer.run();var f=FB.XdComm.Server.singleton.createNamedHiddenIFrame(e,b.channel,'fb_dialogIFrame',null),g=new FB.UI.PopupDialog(d,f,true,false),h=FB.Connect.getUIServerDialogProperty(a,'width'),i=FB.Connect.getUIServerDialogProperty(a,'height');g.setContentWidth(h);g.setContentHeight(i);g.set_placement(FB.UI.PopupPlacement.topCenter);if(c)g.add_closed(function(l){c(l);});g.show();b.next=g._createCrossDomainClosingLink('xxRESULTTOKENxx');var j=FBIntern.Utility.createFacebookUrl('www','connect/uiserver.php',{},false),k=FBIntern.Uri.createQueryString(b);if(j.length+k.length>=2000){FBIntern.Utility.getIFrameDocument(e,f,function(l){b.url_overflow=1;FB.Connect._singleton._facebookIFrame(l,'connect/uiserver.php',b);});}else{j=FBIntern.Uri.addQueryParameters(j,k);f.src=j;}},getUIServerDialogProperty:function(a,b){var c={'bookmark.add':{title:FBIntern.Intl.tx._("Bookmark Application"),width:460,height:226},'profile.addTab':{title:FBIntern.Intl.tx._("Add Profile Tab"),width:460,height:230},'friends.add':{title:FBIntern.Intl.tx._("Add Friend"),width:460,height:230},'stream.publish':{title:FBIntern.Intl.tx._("Post to Your Wall"),width:600,height:230},'default':{title:FBIntern.Intl.tx._("Log In"),width:460,height:250}};if(c.hasOwnProperty(a)&&c[a].hasOwnProperty(b))return c[a][b];if(c['default'].hasOwnProperty(b))return c['default'][b];return null;},showBookmarkDialog:function(a){FB.Connect.showUIServerDialog('bookmark.add',{},a);},showProfileTabDialog:function(a){FB.Connect.showUIServerDialog('profile.addTab',{},a);},get_loggedInUser:function(){var a=FB.Facebook.apiClient.get_session();return (a)?a.uid:null;},getSignedPublicSessionData:function(a){var b=FB.Connect._singleton;FB.Connect.get_status().waitUntilReady(function(c){if(b._publicSessionData&&FB.Facebook.apiClient.get_session()){a(b._publicSessionData,null);}else if(!FB.Facebook.apiClient.get_session()){a(null,null);}else FB.Facebook.apiClient.auth_getSignedPublicSessionData(new FB.ImmediateSequencer(a));});},addSignedPublicSessionDataToUrl:function(a,b){FB.Connect.getSignedPublicSessionData(function(c,d){if(c)a=FBIntern.Uri.addQueryParameters(a,'public_session_data='+encodeURIComponent(FB.JSON.serialize(c)));b(a,null);});},_showStandardDialog:function(a,b,c,d){var e=new FB.UI.PopupDialog(a,b,true,true);e.setContentWidth(c);e.setContentHeight(d);e.set_placement(FB.UI.PopupPlacement.topCenter);e.show();return e;}});
FB.MonitorSender={createPayload:function(){var a=[],b=Math.min(FB.MonitorSender.MAX_SEND,FB.Monitor.loggingQueue.length);for(var c=0;c<b;c++)a.push(FB.Monitor.loggingQueue.pop());return FB.JSON.serialize(a);},send:function(){var a=FB.Facebook.apiClient&&FB.Facebook.apiClient.get_apiKey();if(!a)return false;var b=document.createElement('img');b.setAttribute('src',FBIntern.Utility.createFacebookUrl('www','impression.php',{lid:100,api_key:a,url:window.location.toString(),pv:FB.MonitorSender.getPageviewId(),payload:FB.MonitorSender.createPayload()},false));FB.HiddenContainer.get().appendChild(b);return true;},getPageviewId:function(){if(!FB.MonitorSender.pageviewId)FB.MonitorSender.pageviewId=(new Date()).getTime()+'.'+Math.floor(Math.random()*100000).toString();return FB.MonitorSender.pageviewId;},pageviewId:null,MAX_SEND:10};
FB.subclass('FB.XdHttpRequestServer','FB.Class',{init:function(){}});FB.provide('FB.XdHttpRequestServer',{_onLoad:function(){FB.XdHttpRequestServer._rootUrl=null;FB.XdHttpRequestServer._allowedUrlFilter=null;FB.XdHttpRequestServer._allowedUrls=null;},main:function(a){var b=a.receiver;if(FB.Sys.containsKey(a,'allowed_url_filter'))FB.XdHttpRequestServer._allowedUrlFilter=new RegExp(a.allowed_url_filter);if(FB.Sys.containsKey(a,'allowed_urls'))FB.XdHttpRequestServer._allowedUrls=a.allowed_urls;var c=new FBIntern.Uri(document.URL);FB.XdHttpRequestServer._rootUrl=c.get_schemeAndDomain();var d=c.get_queryParameters().debug_level;if(d){var e=parseInt(d);if(e>FB.FBDebug.logLevel)FB.FBDebug.logLevel=e;}FB.XdComm.Server.singleton.set_receiverUrl(b);FB.XdComm.Server.singleton.registerDataHandler('http_server',FB.XdHttpRequestServer._onDataReceived);},_isUrlAllowed:function(a){if(FB.XdHttpRequestServer._allowedUrlFilter&&FB.XdHttpRequestServer._allowedUrlFilter.test(a))return true;if(FB.XdHttpRequestServer._allowedUrls){var b=new FB.ArrayEnumerator(FB.XdHttpRequestServer._allowedUrls);while(b.moveNext()){var c=b.get_current();if(c===a)return true;}}return false;},_onDataReceived:function(a,b){var c=a,d=FBIntern.Utility.createXMLHttpRequest(),e=c[2];if(!FB.XdHttpRequestServer._isUrlAllowed(e)){FB.FBDebug.logLine(1,'URL '+e+' is not allowed.');return;}e=FB.XdHttpRequestServer._rootUrl+e;FB.FBDebug.logLine(3,'XdHttpRequestServer: make XHR request to '+e);d.onreadystatechange=function(){if(d.readyState===4){var j=FB._create_XdHttpRequestResult(c[0],d.status,d.statusText,d.responseText);FB.FBDebug.logLine(3,'XdHttpRequestServer: send result back http_client');FB.XdComm.Server.singleton.send(b,'http_client',j);}};d.open(c[1],c[2],true);var f=c[4];if(f){var g=f;for(var h in g){var i={key:h,value:g[h]};d.setRequestHeader(i.key,i.value.toString());}}d.send(c[3]);}});
FB.subclass('FB.XFBML.Data.CacheManager','FB.Class',{init:function(){}});FB.provide('FB.XFBML.Data.CacheManager',{_onLoad:function(){FB.XFBML.Data.CacheManager._maxUsableAge=24*60*60*1000;FB.XFBML.Data.CacheManager._refreshInternal=10*60*1000;FB.XFBML.Data.CacheManager._initialized=new FB.SimpleWaitable();},clearAll:function(){if(FBIntern.Flash.get_xdComm())FBIntern.Flash.get_xdComm().waitUntilReady(function(a){(a).clearAllCache();});},_changeContext:function(a){if(FBIntern.Flash.hasRequireVersion()){FBIntern.Flash.get_xdComm().waitUntilReady(function(b){FB.FBDebug.logLine(3,'CacheManager.ChangeContext to '+a);(b).setCacheContext(a);FB.XFBML.Data.CacheManager._initialized._setResult(true);});}else FB.XFBML.Data.CacheManager._initialized._setResult(true);},_getValue:function(a){try{var c=FBIntern.Flash.get_xdComm();if(c&&c.get_isReady()){var d=(c.result).getCache(a);if(d){d=decodeURIComponent(d);if(FB.FBDebug.logLevel>4)FB.FBDebug.writeLine('CacheManager.GetValue returns '+d);return FB.JSON.deserialize(d);}}}catch(b){FB.FBDebug.logLine(1,'CacheManager.GetValue failed on key '+a+' exception='+b.toString());}return null;},_setValue:function(a,b){try{var d=FBIntern.Flash.get_xdComm();if(d&&d.get_isReady()){var e=FB.JSON.serialize(b);if(FB.FBDebug.logLevel>4)FB.FBDebug.writeLine('CacheManager.SetValue key='+a+', value='+e);d.result.setCache(a,encodeURIComponent(FB.JSON.serialize(b)));}}catch(c){FB.FBDebug.logLine(1,'CacheManager.SetValue failed on key '+a+' exception='+c.toString());}},get__initialized:function(){return FB.XFBML.Data.CacheManager._initialized;}});
FB._create__fqlCache=function(a){var b={};b.fields=a;b.rows={};return b;};
FB._create__cachedItem=function(a,b){var c={};c.data=a;c.createTime=b;return c;};
FB.subclass('FB.DependentWaitable','FB.Waitable',{init:function(){this._dependents=[];this._super();},get_isReady:function(){return this._waitItems<=0;},addDependent:function(a){if(!a.get_isReady()){FB.Sys.add(this._dependents,a);this._waitItems++;a.add_changed(FB.bind(this._dependent_OnReady,this));}},removeAll:function(){var a=new FB.ArrayEnumerator(this._dependents);while(a.moveNext()){var b=a.get_current();b.remove_changed(FB.bind(this._dependent_OnReady,this));}this._dependents=[];this._waitItems=0;},_dependent_OnReady:function(a){a.remove_changed(FB.bind(this._dependent_OnReady,this));this._waitItems--;if(!this._waitItems)this.onChange();},_waitItems:0});
FB.provide('FB.XFBML._elementState',{none:0,onProcessCalled:1,onDataReadyCalled:2,waitForCondition:4,ready:8});
FB.subclass('FB.XFBML.Element','FB.Class',{init:function(a){this._dependents=new FB.DependentWaitable();this.domElement=a;this.domElement._fbElement=this;},process:function(){try{this._state=FB.XFBML._elementState.none;var conditionAttribute=this.getAttribute('condition',null);if(conditionAttribute)if(typeof(conditionAttribute)==='string'){this._conditionResult=eval(conditionAttribute);}else{FB.FBDebug.assert(typeof(conditionAttribute)==='function','Invalid condition value');var conditionFunction=conditionAttribute;this._conditionResult=conditionFunction();}var result=true,resultReady=true,pendingResult=this._conditionResult;if(!FB.Sys.isNullOrUndefined(this._conditionResult))if(FB.Type.getInstanceType(this._conditionResult)===Boolean){result=this._conditionResult;}else{resultReady=pendingResult.get_isReady();result=pendingResult.result;}if(!resultReady){this._state|=FB.XFBML._elementState.waitForCondition;(this._conditionResult).add_changed(FB.bind(this._onConditionChanged,this));}if((resultReady&&result)||(!resultReady&&!this.getAttribute('noPreProcess',false))){this.onProcess();this._state|=FB.XFBML._elementState.onProcessCalled;this._checkDataReady();}else if(resultReady&&!result){this.onConditionFalse();this.set_isReady(true);}}catch(e){FB.Debug.logLine(1,"Failed rendering a XFBML element");}},isValid:function(){var a=this.domElement;while(a)if(a===document.body){return true;}else a=a.parentNode;return false;},refresh:function(){if((this._state&FB.XFBML._elementState.waitForCondition)&&this._conditionResult)(this._conditionResult).remove_changed(FB.bind(this._onConditionChanged,this));this._state=FB.XFBML._elementState.none;this._conditionResult=null;this._dependents.resetChange();this._dependents.removeAll();FB.UI.UIElement.removeCssClass(this.domElement,'FB_ElementReady');this.clearVisual();this.process();},_onConditionChanged:function(a){if(a.get_isReady()){a.remove_changed(FB.bind(this._onConditionChanged,this));this._state&=~FB.XFBML._elementState.waitForCondition;if(a.result){if(!(this._state&FB.XFBML._elementState.onProcessCalled)){this.onProcess();this._state|=FB.XFBML._elementState.onProcessCalled;}this._checkDataReady();}else{this.onConditionFalse();this.set_isReady(true);}}},onConditionFalse:function(){FB.UI.UIElement.addCssClass(this.domElement,'FB_ElementConditionFalse');this.domElement.style.display='none';},get_isReady:function(){return (this._state&FB.XFBML._elementState.ready);},set_isReady:function(a){if(a!==this.get_isReady()){if(a){this._state|=FB.XFBML._elementState.ready;}else this._state&=~FB.XFBML._elementState.ready;if(a){FB.UI.UIElement.addCssClass(this.domElement,'FB_ElementReady');}else FB.UI.UIElement.removeCssClass(this.domElement,'FB_ElementReady');if(this.__isReadyChanged)this.__isReadyChanged(this,null);}return a;},onProcess:function(){},onDataReady:function(){},clearVisual:function(){this.domElement.innerHTML='';},_getAttributeFromList:function(a,b,c){var d=this.getAttribute(a,b),e=new FB.ArrayEnumerator(c);while(e.moveNext()){var f=e.get_current();if(d===f)return f;}return b;},getAttribute:function(a,b){var c=this.domElement.getAttribute(a);if(!c)c=b;return c;},_getBoolAttribute:function(a,b){var c=b,d=this.domElement.getAttribute(a);if(d)c=FB.Sys.parseBool(d);return c;},addDataToWait:function(a){this._dependents.addDependent(a);},_checkDataReady:function(){try{if(this._dependents.get_isReady()){if(!(this._state&FB.XFBML._elementState.waitForCondition))this.onDataReady();}else this._dependents.waitUntilReady(FB.bind(function(b){this._checkDataReady();},this));}catch(a){FB.Debug.logLine(1,"Failed rendering a XFBML element");}},add_isReadyChanged:function(a){this.__isReadyChanged=FB.Delegate.combine(this.__isReadyChanged,a);},remove_isReadyChanged:function(a){this.__isReadyChanged=FB.Delegate.remove(this.__isReadyChanged,a);},__isReadyChanged:null,domElement:null,_conditionResult:null,_state:0});FB.provide('FB.XFBML.Element',{fromDomElement:function(a){return a._fbElement;}});
FB.subclass('FB.XFBML.Common.Constants','FB.Class',{init:function(){}});FB.provide('FB.XFBML.Common.Constants',{_onLoad:function(){FB.XFBML.Common.Constants.gendeR_MALE_SINGULAR='male';FB.XFBML.Common.Constants.gendeR_FEMALE_SINGULAR='female';}});
FB._create_ElementsRegistration=function(a,b,c){var d={};d.nameSpace=a;d.name=b;d.implementationType=c;return d;};
FB.subclass('FB.XFBML.LoginButton','FB.XFBML.Element',{init:function(a){this.status=FB.ConnectState.userNotLoggedIn;this._super(a);FBIntern.Utility.addEventListener(this.domElement,'click',FB.bind(this._onClick,this));this.intl_button=(this.getAttribute('v','1')=='2');if(this.intl_button)this.savedChildren=this.domElement.innerHTML;this.domElement.innerHTML='';this.domElement.appendChild(FB.UI.DomResources.getResourceById('fb_login'));var b=FBIntern.UIHelper.findElementById(this.domElement,'RES_ID_fb_login');if(this.intl_button){b.appendChild(FB.UI.DomResources.getResourceById('fb_login_text'));}else b.appendChild(FB.UI.DomResources.getResourceById('fb_login_image'));this._updateUI(null);FB.Connect.get_status().add_changed(FB.bind(this._updateUI,this));},clearVisual:function(){},_onClick:function(e){if(this.logoutOnClick){FB.Connect.logout(null);}else{var onLoginJS=this.getAttribute('onlogin',''),handlerEnv={enabled:true},onLoginHandler=FB.bind(function(){if(this.enabled)eval(onLoginJS);},handlerEnv),onCancelHandler=FB.bind(function(){this.enabled=false;},handlerEnv);FB.Connect.requireSession(onLoginHandler,onCancelHandler,true);}},_updateUI:function(a){var b=this.status;this.status=(FB.Connect.get_status().get_isReady())?FB.Connect.get_status().result:FB.ConnectState.userNotLoggedIn;var c={};c[FB.Enum.toString(FB.ConnectState,FB.ConnectState.appNotAuthorized)]='fb_login_not_authorized';c[FB.Enum.toString(FB.ConnectState,FB.ConnectState.connected)]='fb_login_ready';c[FB.Enum.toString(FB.ConnectState,FB.ConnectState.userNotLoggedIn)]='fb_login_not_logged_in';FB.UI.UIElement.removeCssClass(this.domElement,c[FB.Enum.toString(FB.ConnectState,b)]);FB.UI.UIElement.addCssClass(this.domElement,c[FB.Enum.toString(FB.ConnectState,this.status)]);var d=FBIntern.UIHelper.findElementById(this.domElement,'RES_ID_fb_login');this.logoutOnClick=(this.status===FB.ConnectState.connected&&this._getBoolAttribute('autologoutlink',false));if(this.intl_button){var e=this._getAttributeFromList('size','medium',['icon','small','medium','large','xlarge']);if(e=='icon'){FB.UI.UIElement.addCssClass(d,'FBConnectButton_Simple');}else{var f=FB.localeIsRTL?'_RTL':'',g='';switch(e){case 'icon':g='_Simple';break;case 'small':g='_Small';break;case 'large':g='_Large';break;case 'xlarge':g='_BigPun';break;default:g='_Medium';break;}FB.UI.UIElement.addCssClass(d,'FBConnectButton'+f);FB.UI.UIElement.addCssClass(d,'FBConnectButton'+f+g);if(!this.savedChildren)if(this.logoutOnClick){this.savedChildren=FBIntern.Intl.tx._("Facebook Logout");}else{var h=this._getAttributeFromList('length','short',['long','short']);this.savedChildren=(h=='short'?FBIntern.Intl.tx._("Log In"):FBIntern.Intl.tx._("Log In with Facebook"));}var i=FBIntern.UIHelper.findElementById(this.domElement,'RES_ID_fb_login_text');i.innerHTML=this.savedChildren;}}else{var j=FBIntern.UIHelper.findElementById(this.domElement,'RES_ID_fb_login_image');j.src=this.getImageSrc();j.alt=(this.logoutOnClick)?'Logout':'Connect';}},getImageSrc:function(){var a=this._getAttributeFromList('size','large',['small','medium','large']),b=this._getAttributeFromList('background','light',['white','light','dark']),c=this._getAttributeFromList('length','short',['long','short']),d;if(this.logoutOnClick){d='logout_img_'+a;}else d='login_img_'+b+'_'+a+'_'+c;var e=FBIntern.FbGlobals.get_fB_StaticResourceVersions()[d];FB.FBDebug.assert(e,'Image source not found for resource '+d);return e;},onProcess:function(){this.set_isReady(true);},logoutOnClick:false});
FB.subclass('FB.XFBML.ServerFbml','FB.XFBML.Element',{init:function(a){this._super(a);},onDataReady:function(){FB.IFrameUtil.ResizeUtilServer.run();this._createIframeDoc();},clearVisual:function(){if(this._iframeContainer){this._iframeContainer.parentNode.removeChild(this._iframeContainer);this._iframeContainer=null;}},_createIframeDoc:function(){var a='fbmlIFrame_'+FB.XFBML.ServerFbml._iframeIdCount.toString();FB.XFBML.ServerFbml._iframeIdCount++;if(this._iframeContainer)this.clearVisual();this._iframeContainer=this.domElement.appendChild(FB.XdComm.Server.singleton.createNamedHiddenIFrame(a,FB.XdComm.Server.singleton.get_receiverUrl(),'fbmlIframe','frameborder=\"0\"'));var b=this.getAttribute('iframeWidth',null),c=this.getAttribute('iframeHeight',null);if(b)this._iframeContainer.style.width=b;if(c)this._iframeContainer.style.height=c;var d=(window.self.frames)[a];FB.FBDebug.assert(!FB.Sys.isUndefined(d),'frameWindow is null in CreateIframeDoc. Make sure this.domElement is inserted in the DOM before creating an iframe. (Did you try to insert it in a Dialog before calling Dialog.Show?');FBIntern.Utility.getIFrameDocument(a,this._iframeContainer,FB.bind(function(e){e.open();this._writeDoc(e);},this));},_getFBML:function(){var a=this.getAttribute('fbml',null);if(!a){var b=this.domElement.childNodes.length;for(var c=0;c<b;c++){var d=this.domElement.childNodes[c];if(d.tagName==='SCRIPT'&&(d).type==='text/fbml'){a=d.innerHTML;break;}}}return a;},_writeDoc:function(a){var b=this._getFBML(),c={app_key:FB.Facebook.apiClient.get_apiKey(),channel_url:FB.XdComm.Server.singleton.get_receiverUrl(),fbml:b},d=new FB.StringBuilder();d.append('\n<!DOCTYPE html PUBLIC \"-//W3C//DTD XHTML 1.0 Strict//EN\" \"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd\">\n<html xmlns=\"http://www.w3.org/1999/xhtml\" >\n<head><title></title></head>\n<body>\n    <form method=\"post\" action=\"'+FBIntern.Utility.getFacebookUrl('www')+'widgets/serverfbml.php\" id=\"form1\" name=\"form1\" >');var e=c;for(var f in e){var g={key:f,value:e[f]};d.append(FB.Sys.format('<input type=\"hidden\" name=\"{0}\" id=\"{1}\" value=\"{2}\"  />',g.key,g.key,FB.Sys.htmlEncode(g.value)));}d.append('\n</form>\n    <script type=\"text/javascript\">\n      window.setTimeout(function(){document.forms[\'form1\'].submit();}, 0);\n    </script>\n</body>\n</html>\n        ');var h=d.toString();a.write(h);a.close();this.set_isReady(true);},_iframeContainer:null});FB.provide('FB.XFBML.ServerFbml',{_onLoad:function(){FB.XFBML.ServerFbml._iframeIdCount=0;}});
FB.subclass('FB.XFBML.ContainerElement','FB.XFBML.Element',{init:function(a){this._super(a);},onDataReady:function(){this.set_isReady(true);}});
FB.subclass('FB.XFBML.AddSectionButton','FB.XFBML.Element',{init:function(a){this._super(a);},onProcess:function(){this._section=this.getAttribute('section',null);if(!this._section)this._section='profile';},onDataReady:function(){FB.Connect.showAddSectionButton(this._section,this.domElement);this.set_isReady(true);},_section:null});
FB.subclass('FB.XFBML.Comments','FB.XFBML.Element',{init:function(a){this._super(a);},refresh:function(){},onDataReady:function(){FB.IFrameUtil.ResizeUtilServer.run();this._createCommentIframe();},_createCommentIframe:function(){if(this._iframeContainer)return;this._iframeName='fbcommentsIFrame_'+FB.XFBML.Comments._iframeIdCount.toString();FB.XFBML.Comments._iframeIdCount++;var a=this.getAttribute('xid',null),b=this.getAttribute('width','550'),c=this.getAttribute('url',document.URL),d=this.getAttribute('title',document.title),e=this.getAttribute('numposts','10'),f=this.getAttribute('css',''),g=this.getAttribute('simple',''),h=this.getAttribute('reverse',''),i=this.getAttribute('quiet',''),j=this.getAttribute('publish_feed','1');b=b.replace('px','');if(!a){var k=document.URL.indexOf('#');if(k>0){a=encodeURIComponent(document.URL.substring(0,k));}else a=encodeURIComponent(document.URL);}var l={api_key:FB.Facebook.apiKey,channel_url:FB.XdComm.Server.singleton.get_receiverUrl(),xid:a,width:b,url:c,title:d,numposts:e,css:f,simple:g,reverse:h,quiet:i,publish_feed:j},m=FBIntern.Utility.createFacebookUrl('www','widgets/comments.php',l,false);this._iframeContainer=FB.XdComm.Server.singleton.createNamedHiddenIFrame(this._iframeName,m,'','frameborder=\"0\" allowtransparency=\"true\"');this._iframeContainer.style.width=b+'px';this._iframeContainer.style.display='none';this._iframeContainer.style.border='none';FB.Bootstrap.requireFeatures(['Comments'],FB.bind(function(){FB.CommentClient.run();var n=document.createElement('div');FB.UI.UIElement.addCssClass(n,'fb_content_loader_gif');this._loader=document.createElement('div');FB.UI.UIElement.addCssClass(this._loader,'fb_content_loader');FB.UI.UIElement.addCssClass(this._loader,'fb_content_loading');this._loader.style.width=b+'px';this._loader.appendChild(n);this.domElement.appendChild(this._loader);this.domElement.appendChild(this._iframeContainer);FBIntern.Utility.waitForLoaded(this._iframeContainer,FB.bind(function(){FB.UI.UIElement.removeCssClass(this._loader,'fb_content_loading');},this));this.set_isReady(true);},this));},_loader:null,_iframeContainer:null,_iframeName:null});FB.provide('FB.XFBML.Comments',{_onLoad:function(){FB.XFBML.Comments._iframeIdCount=0;}});
FB.subclass('FB.XFBML.LiveStream','FB.XFBML.Element',{init:function(a){this._super(a);this._createLiveStreamIframe();},refresh:function(){},onDataReady:function(){FB.IFrameUtil.ResizeUtilServer.run();},_createLiveStreamIframe:function(){if(this._iframeContainer)return;this._iframeName='fblivestreamIFrame_'+FB.XFBML.LiveStream._iframeIdCount.toString();FB.XFBML.LiveStream._iframeIdCount++;var a=this.getAttribute('xid','default'),b=this.getAttribute('width','400'),c=this.getAttribute('height','500');b=b.replace('px','');c=c.replace('px','');var d=this.getAttribute('hide_friends_tab','0'),e=this.getAttribute('always_post_to_friends','0'),f=this.getAttribute('via_url',''),g={api_key:FB.Facebook.apiKey,xid:a,width:b,height:c,hide_friends_tab:d,always_post_to_friends:e,via_url:f},h=FBIntern.Utility.createFacebookUrl('www','plugins/live_stream_box.php',g,false);this._iframeContainer=FB.XdComm.Server.singleton.createNamedHiddenIFrame(this._iframeName,h,'','width=\"'+b+'\" height=\"'+c+'\" '+'frameborder=\"0\" allowtransparency=\"true\"');this._iframeContainer.style.width=b+'px';this._iframeContainer.style.height=c+'px';this._iframeContainer.style.display='none';this._iframeContainer.style.border='none';var i=document.createElement('div');FB.UI.UIElement.addCssClass(i,'fb_content_loader_gif');this._loader=document.createElement('div');FB.UI.UIElement.addCssClass(this._loader,'fb_content_loader');FB.UI.UIElement.addCssClass(this._loader,'fb_content_loading');this._loader.style.width=b+'px';this._loader.appendChild(i);this.domElement.appendChild(this._loader);this.domElement.appendChild(this._iframeContainer);FBIntern.Utility.waitForLoaded(this._iframeContainer,FB.bind(function(){this._iframeContainer.style.display='block';FB.UI.UIElement.removeCssClass(this._loader,'fb_content_loading');},this));this.set_isReady(true);},_loader:null,_iframeContainer:null,_iframeName:null});FB.provide('FB.XFBML.LiveStream',{_onLoad:function(){FB.XFBML.LiveStream._iframeIdCount=0;}});
FB.Payments=function(){this.order={receiver:0,order_info:null,next_url:null,next_js:null,purchase_type:null,credits_purchase:null};};FB.Payments.Error={Unknown:1383001,InvalidParameters:1383002,PaymentFailure:1383003,InvalidOperation:1383004,PermissionDenied:1383005,DatabaseError:1383006,InvalidApp:1383007,AppNoResponse:1383008,AppErrorResponse:1383009,UserCanceled:1383010,Disabled:1383011,CaptchaFailed:1353010,SecurityBlocked:1353011};FB.Payments._ensureRpcClient=function(){if(!FB.Payments._rpcClient){var a=FBIntern.Utility.getFacebookUrl('static.ak')+'xd_receiver_v0.4.php?r='+FBIntern.FbGlobals.get_fB_StaticResourceVersions().www_channel;FB.Payments._rpcClient=new FB.XdComm.XdRpcClient('PaymentsServer','PaymentsClient',new FB.XdComm.EndPoint(null,FB.XdComm.PageRelation.parent,a));}};FB.Payments.prototype.setParam=function(a,b){if(!a||b===null)return false;this.order[a]=b;return true;};FB.Payments.prototype.submitOrder=function(){if(!this.order.order_info&&!this.order.credits_purchase)return false;FB.Payments._ensureRpcClient();this.order.api_key=FB.Facebook.apiKey;var a=this.order.next_js,b=function(c){if(a)a(c);};FB.Payments._rpcClient.send("submitOrder",this.order,b);};
FB.subclass('FB.XFBML.Pay','FB.XFBML.Element',{init:function(a){this._super(a);},onDataReady:function(){var a=this.getAttribute('button','large'),b=this.getAttribute('next_js',null),c=this.getAttribute('order_info',null),d=this.getAttribute('next_url',null),e=this.getAttribute('receiver',0),f='';if(c){var g=false,h='var fbpay = new FB.Payments(); fbpay.setParam(\'order_info\', \''+c+'\');';if(b)h+='fbpay.setParam(\'next_js\', '+b+');';if(d)h+='fbpay.setParam(\'next_url\', \''+d+'\');';if(e)h+='fbpay.setParam(\'receiver\', '+e+');';var i=null;switch(a){case 'large':i='/images/fbpayments/pay_white_large_long.gif';break;case 'small':i='/images/fbpayments/pay_white_large_short.gif';break;default:g=true;break;}if(!g){h+='fbpay.submitOrder(); return false;';f='<a onclick=\"'+h+'\">'+'<img src=\"'+i+'\" />'+'</a>';}}FBIntern.Utility.paymentsLog('render_tag',FB.Facebook.apiKey);this.domElement.innerHTML=f;this.set_isReady(true);}});
FB.subclass('FB.XFBML.Fan','FB.XFBML.Element',{init:function(a){this._super(a);this._createFanIframe();},onDataReady:function(){FB.IFrameUtil.ResizeUtilServer.run();},clearVisual:function(){if(this._iframeContainer){this._iframeContainer.parentNode.removeChild(this._iframeContainer);this._iframeContainer=null;}if(this._loader){this._loader.parentNode.removeChild(this._loader);this._loader=null;}},_createFanIframe:function(){if(this._iframeContainer||this._loader)this.clearVisual();this._iframeName='fbfanIFrame_'+FB.XFBML.Fan._iframeIdCount.toString();FB.XFBML.Fan._iframeIdCount++;var a=this.getAttribute('profile_id',''),b=this.getAttribute('name',''),c=this.getAttribute('width','300'),d=this.getAttribute('connections',''),e=this.getAttribute('stream',''),f=this.getAttribute('logobar',''),g=this.getAttribute('height',''),h=this.getAttribute('css','');c=c.replace('px','');g=g.replace('px','');if(g===''){if((d===''||d==='0')&&(e===''||e==='0')){g=65;}else if(d===''||d==='0'){g=375;}else if(e===''||e==='0'){g=250;}else g=550;}else{g=parseInt(g,10);if(isNaN(g))g=550;}if(f!==''&&f!=='0')g+=25;var i={api_key:FB.Facebook.apiKey,channel_url:FB.XdComm.Server.singleton.get_receiverUrl(),id:a,name:b,width:c,connections:d,stream:e,logobar:f,css:h},j=FBIntern.Utility.getFacebookUrl('www')+'widgets/fan.php',k=FBIntern.Uri.addQueryParameters(j,FBIntern.Uri.createQueryString(i));this._iframeContainer=FB.XdComm.Server.singleton.createNamedHiddenIFrame(this._iframeName,k,'','frameborder=\"0\" allowtransparency=\"true\"');this._iframeContainer.style.width=c+'px';this._iframeContainer.style.height=g+'px';this._iframeContainer.style.border='none';this._iframeContainer.style.display='none';var l=document.createElement('div');FB.UI.UIElement.addCssClass(l,'fb_content_loader_gif');this._loader=document.createElement('div');FB.UI.UIElement.addCssClass(this._loader,'fb_content_loader');FB.UI.UIElement.addCssClass(this._loader,'fb_content_loading');this._loader.style.width=c+'px';this._loader.style.height=g+'px';this._loader.appendChild(l);this.domElement.appendChild(this._iframeContainer);this.domElement.appendChild(this._loader);FBIntern.Utility.waitForLoaded(this._iframeContainer,FB.bind(function(){this._loader.parentNode.removeChild(this._loader);this._loader=null;this._iframeContainer.style.display='';this.set_isReady(true);},this));},_loader:null,_iframeContainer:null,_iframeName:null});FB.provide('FB.XFBML.Fan',{_onLoad:function(){FB.XFBML.Fan._iframeIdCount=0;}});
FB.subclass('FB.XFBML.Resources.ResourceDict','FB.Class',{init:function(){this._stringResources={link:'<a class=\'FB_Link\' href=\'{0}\'>{1}</a>',no_network:'no network'};},getResourceString:function(a){return this._stringResources[a];},_stringResources:null});
FB.subclass('FBIntern.DataHelper','FB.Class',{init:function(){}});FB.provide('FBIntern.DataHelper',{getPrimaryNetwork:function(a){if(a.affiliations&&a.affiliations.length>0){return a.affiliations[0].name;}else return null;}});
FB.subclass('FB.XFBML.Data.FqlTable','FB.Class',{init:function(a,b){this._pendingResults={};this._specialTables={};this._specialFields={};this._table=a;this._key=b;this._specialTables.translation=true;this._specialFields.translation='pre_hash_string';this._specialTables.link_stat=true;this._specialFields.link_stat='url';this._cache=FB.XFBML.Data.CacheManager._getValue(this.get__cacheKey());if(!this._cache){this._fields=[];this._cache=FB._create__fqlCache(this._fields);}else this._fields=this._cache.fields;},selectByKey:function(a,b){FB.FBDebug.assert(b,'value cannot be null');var c=false,d=new FB.ArrayEnumerator(a);while(d.moveNext()){var e=d.get_current();if(!FB.Sys.contains(this._fields,e)){FB.Sys.add(this._fields,e);c=true;}}if(c)this._cache=FB._create__fqlCache(this._fields);var f=this._pendingResults[b];if(!f){var g=this._cache.rows[b];if(g){var h=(new Date()).getTime()-g.createTime;if(h<FB.XFBML.Data.CacheManager._maxUsableAge){if(FB.FBDebug.logLevel>5)FB.FBDebug.writeLine('Use cached value for key='+b+' in fql table '+this.get__cacheKey());f=new FB.PendingResult();f.setPendingResult(g.data,null);if(h>FB.XFBML.Data.CacheManager._refreshInternal){this._pendingResults[b]=f;}else return f;}}}if(!f){f=new FB.PendingResult();this._pendingResults[b]=f;}var i=FB.XFBML.Context.singleton;if(!this._subscribedToEvent){i.add_beforeSendBatchRequest(FB.bind(this._beforeSendBatchRequest,this));this._subscribedToEvent=true;}i.requestBatchProcess();return f;},invokeApi:function(a,b){if(FB.Connect.get_status().get_isReady()&&FB.Connect.get_status().result!==FB.ConnectState.connected&&this._table!=='user'){var c=new FB.PendingResult();c.setPendingResult(null,FBIntern.Utility.createException('Invalid session state',FB.ApiErrorCode.invalid_session_key));return c;}else{var d=FB.Sys.format('SELECT {0} from {1} WHERE {2} IN ({3})',a.toString(),this._table,this._key,b.toString());return FB.Facebook.apiClient.fql_query(d,FB.XFBML.Context.singleton.get_batchSequencer());}},_beforeSendBatchRequest:function(){var a=[],b=this._pendingResults;if(!FB.Sys.getKeyCount(b))return;var c=b;for(var d in c){var e={key:d,value:c[d]};FB.Sys.add(a,e.key);}var f='';if(this._specialTables[this._table]){f=this._specialFields[this._table];}else f=this._key;if(!FB.Sys.contains(this._fields,f))FB.Sys.add(this._fields,f);var g=this._fields;this._fields=[];this._pendingResults={};var h=this.invokeApi(g,a);h.waitUntilReady(FB.bind(function(i){var j=(new Date()).getTime(),k=h.result;if(k){var l=k.length;for(var m=0;m<l;m++){var n=k[m],o='';if(!this._specialTables[this._table]){o=n[this._key];}else o='\"'+n[this._specialFields[this._table]]+'\"';if(n&&b[o])(b[o]).setPendingResult(n,h.exception);}}var p=b;for(var q in p){var r={key:q,value:p[q]},s=r.value;if(!s.get_isReady()){s.setPendingResult(null,new Error('No data received from server from FQL query.'));if(!h.exception)this._cache.rows[r.key]=FB._create__cachedItem(null,j);}else this._cache.rows[r.key]=FB._create__cachedItem(s.result,j);}FB.XFBML.Data.CacheManager._setValue(this.get__cacheKey(),this._cache);},this));},get__cacheKey:function(){return 'v0.1_fql_'+this._table+'_'+this._key;},_key:null,_table:null,_fields:null,_cache:null,_subscribedToEvent:false});
FB.subclass('FB.XFBML.ProfileTabButton','FB.XFBML.Element',{init:function(a){this._super(a);},onProcess:function(){if(FB.Facebook.apiClient.get_session()){this._uid=FB.Connect.get_loggedInUser();}else{FB.FBDebug.logLine(2,'Cannot show <fb:add-profile-tab button because'+' there is no logged in user');this._uid=null;return;}this._type=this.getAttribute('type','on-facebook');this._tabAdded=FB.XFBML.Context.singleton.getFqlTable('permissions','uid').selectByKey(['tab_added'],this._uid);this.addDataToWait(this._tabAdded);},onDataReady:function(){if(this._uid&&this._tabAdded.result&&this._tabAdded.result.tab_added==0){var a='',b='FB.Connect.showProfileTabDialog(); return false;',c='',d='';if(this._type=='off-facebook'){c='class="FBConnectButton FBConnectButton_Medium"';d='<span class="FBConnectButton_Text">'+FBIntern.Intl.tx._("Add Profile Tab on Facebook")+'</span>';}else{c='class="FB_UIButton FB_UIButton_Gray '+'FB_UIButton_CustomIcon UIActionButton"';d='<span class="FB_UIButton_Text">'+'<span class="FB_Bookmark_Icon" ></span>'+FBIntern.Intl.tx._("Add Profile Tab")+'</span>';}a=FB.Sys.format('<a '+' {0} '+'onclick=\'{1}\' '+'target=\'_blank\'>{2}</a>',c,b,d);this.domElement.innerHTML=a;}this.set_isReady(true);}});
FB.subclass('FB.XFBML.ShareButton','FB.XFBML.Element',{init:function(a){this._super(a);},onProcess:function(){this._href=this.getAttribute('href',null);if(!this._href)this._href=window.location.href;this._type=this.getAttribute('type','icon_link');var a='',b='',c=FBIntern.Intl.tx._("Share");switch(this._type){case 'icon':case 'icon_link':b='class=\'FBConnectButton_Simple\'';a='<span class=\'FBConnectButton_Text_Simple\'>'+(this._type=='icon_link'?c:'&nbsp;')+'</span>';break;case 'link':a=FBIntern.Intl.tx._("Share on Facebook");break;default:a='<span class="FBConnectButton_Text">'+c+'</span>';b='class=\'FBConnectButton FBConnectButton_Small\'';break;}html=FB.Sys.format('<a href=\'{0}\''+' {2} onclick=\'FB.Connect.showShareDialog(\"{0}\", function(){});'+'return false;\''+'target=\'_blank\'>{1}</a>',this._href,a,b);this.domElement.innerHTML=html;this.content=html;this.container=this.domElement;if(this._type=='button_count'||this._type=='box_count'){this._count=FB.XFBML.Context.singleton.getFqlTable('link_stat','url').selectByKey(['url','total_count'],'"'+this._href+'"');this.addDataToWait(this._count);}},onDataReady:function(){var a=this._count.result;if(a&&typeof(a.total_count)=='number'&&a.total_count>=3){var b=function(h){return h>=1e+07?Math.round(h/1e+06)+'M':(h>=10000?Math.round(h/1000)+'K':h);},c=b(a.total_count),d='',e='',f='<span class=\'fb_share_count_inner\'>'+c+'</span>',g='';if(this._type=='button_count'){d='<span class=\'fb_share_count_nub_right\'>&nbsp;</span>';e='<span class=\'fb_share_count fb_share_count_right\'>'+f+'</span>';this.content=this.content+d+e;}else if(this._type=='box_count'){d='<span class=\'fb_share_count_nub_top\'>&nbsp;</span>';e='<span class=\'fb_share_count fb_share_count_top\'>'+f+'</span>';this.content=d+e+this.content;g='fb_share_count_wrapper';}this.container.innerHTML='<span class=\''+g+'\'>'+this.content+'</span>';}this.set_isReady(true);},_href:null,_type:null});
FB.subclass('FB.XFBML.PromptPermission','FB.XFBML.Element',{init:function(a){this._super(a);},onProcess:function(){var a=FB.Connect.get_loggedInUser();if(a){this._permission=this.getAttribute('perms',null);if(!this._permission){FB.FBDebug.logLine(1,'No perms attribute was provided.');return;}var b=FB.XFBML.Context.singleton.getFqlTable('permissions','uid');this._data=b.selectByKey([this._permission],a);this.addDataToWait(this._data);}},onDataReady:function(){var a=null;if(this._data)a=this._data.result;var b=this.getAttribute('next_fbjs',null),c='null';if(b)c='function(result) { '+'  if (result) { '+b+' } '+'}';if((a)&&!(a[this._permission])){this.domElement.innerHTML='<a href=\"#\" onclick=\"FB.Connect.showPermissionDialog(\''+this._permission+'\', '+c+'); return false;\">'+this.domElement.innerHTML+'</a>';}else this.domElement.innerHTML='';this.set_isReady(true);},_data:null,_permission:null});
FB.subclass('FB.XFBML.ProfilePic','FB.XFBML.Element',{init:function(a){this._super(a);},onProcess:function(){var a=this.getAttribute('size','thumb'),b={thumb:'pic_small',small:'pic',normal:'pic_big',square:'pic_square',t:'pic_small',s:'pic',n:'pic_big',q:'pic_square'};this._picFieldName=b[a];if(!this._picFieldName)this._picFieldName='pic';if(this._getBoolAttribute('facebook-logo',false))this._picFieldName+='_with_logo';this._linked=this._getBoolAttribute('linked',true);var c=this.getAttribute('width',null),d=this.getAttribute('height',null);if(c)this.domElement.style.width=FB.XFBML.ProfilePic._addPxIfNecessary(c);if(d)this.domElement.style.height=FB.XFBML.ProfilePic._addPxIfNecessary(d);this._uid=FB.XFBML.ConnectUtility.normalizeInt64ForId(this.getAttribute('uid',null));if(this._uid==='loggedinuser')if(FB.Facebook.apiClient.get_session()){this._uid=FB.Connect.get_loggedInUser();}else{FB.FBDebug.logLine(2,'cannot use loggedinuser, there is no session');this._uid=null;return;}var e,f=FB.XFBML.Context.singleton;if(FB.XFBML.ConnectUtility.isUser(this._uid)){e=f.getFqlTable('user','uid');}else e=f.getFqlTable('profile','id');this._data=e.selectByKey(['name',this._picFieldName],this._uid);this.addDataToWait(this._data);if(!this._dependents.get_isReady())this._renderImage(null);},onDataReady:function(){var a=(this._data)?this._data.result:null;this._renderImage(a);this.set_isReady(true);},_renderImage:function(a){var b=(a)?a[this._picFieldName]:null;if(!b)b=FBIntern.Utility.getFacebookUrl('static.ak')+'pics/'+FB.XFBML.ProfilePic._defaultPicMap[this._picFieldName];var c=this.domElement.style.width,d=this.domElement.style.height,e=((c)?'width:'+c+';':'')+((d)?'height:'+d+';':''),f=FB.Sys.format('<img src=\'{0}\' alt=\'{1}\' title=\'{1}\' style=\'{2}\' class=\'{3}\' />',b,(a)?a.name:'',e,this.domElement.className);if(this._linked)f=FB.XFBML.ConnectUtility._profileLink(a,f,this.getAttribute('href',null));this.domElement.innerHTML=f;FB.UI.UIElement.addCssClass(this.domElement,'fb_profile_pic_rendered');},_uid:null,_picFieldName:null,_linked:false,_data:null});FB.provide('FB.XFBML.ProfilePic',{_onLoad:function(){FB.XFBML.ProfilePic._defaultPicMap=null;FB.XFBML.ProfilePic._defaultPicMap={pic_small:'t_silhouette.jpg',pic:'s_silhouette.jpg',pic_big:'d_silhouette.gif',pic_square:'q_silhouette.gif',pic_small_with_logo:'t_silhouette_logo.gif',pic_with_logo:'s_silhouette_logo.gif',pic_big_with_logo:'d_silhouette_logo.gif',pic_square_with_logo:'q_silhouette_logo.gif'};},_addPxIfNecessary:function(a){return (FBIntern.Utility.isStrInt(a))?a+'px':a;}});
FB.subclass('FB.XFBML.UserLink','FB.XFBML.Element',{init:function(a){this._super(a);},onProcess:function(){this._uid=FB.XFBML.ConnectUtility.normalizeInt64ForId(this.getAttribute('uid',null));if(!this._uid)throw new Error('No uid parameter was provided.');var a=[];FB.Sys.addRange(a,['uid','name']);this._showNetwork=this._getBoolAttribute('shownetwork',true);if(this._showNetwork)FB.Sys.add(a,'affiliations');this._data=FB.XFBML.Context.singleton.getFqlTable('user','uid').selectByKey(a,this._uid);this.addDataToWait(this._data);},onDataReady:function(){var a=this._data.result;if(a){var b={id:a.uid},c=FBIntern.Utility.createFacebookUrl('www','profile.php',b,true),d=a.name;if(this._showNetwork)d+=' '+FB.XFBML.ConnectUtility.getNetworkInParentheses(a);var e='<a href=\''+c+'\'>'+FB.Sys.htmlEncode(d)+'</a>';this.domElement.innerHTML=e;}else{var f=this.getAttribute('ifcantsee',null);if(f)this.domElement.innerHTML=FB.Sys.htmlEncode(f);}this.set_isReady(true);},_data:null,_uid:null,_showNetwork:false});
FB.subclass('FB.XFBML.UserStatus','FB.XFBML.Element',{init:function(a){this._super(a);},onProcess:function(){this._uid=FB.XFBML.ConnectUtility.normalizeInt64ForId(this.getAttribute('uid',null));if(!this._uid)throw new Error('No \'uid\' parameter provided.');this._data=FB.XFBML.Context.singleton.getFqlTable('user','uid').selectByKey(['status'],this._uid);this.addDataToWait(this._data);},onDataReady:function(){var a=this._data.result;if(a&&a.status){var b=a.status.message;if(b){if((b.length>0)&&(b.charAt(b.length-1)!=='.'))b=b+'.';}else b='';this.domElement.innerHTML=FB.Sys.htmlEncode(b);}this.set_isReady(true);},_data:null,_uid:null});
FB.subclass('FB.XFBML.UnconnectedFriendsCount','FB.XFBML.Element',{init:function(a){this._super(a);},onProcess:function(){this.addDataToWait(FB.XFBML.Context.singleton.get_unconnectedFriendsCount());},onDataReady:function(){var a=FB.XFBML.Context.singleton.get_unconnectedFriendsCount();if(!a.exception){var b=FB.XFBML.Context.singleton.get_unconnectedFriendsCount().result;this.domElement.innerHTML=b.toString()+' ';}else FB.FBDebug.logLine(1,'Can\'t render UnconnectedFriendsCount because of invalid data');this.set_isReady(true);}});
FB.subclass('FB.XFBML.Video','FB.XFBML.Element',{init:function(a){this._super(a);},onProcess:function(){this._vid=FB.XFBML.ConnectUtility.normalizeInt64ForId(this.getAttribute('vid',null));this._width=this.getAttribute('width','576');this._height=this.getAttribute('height','432');},onDataReady:function(){var a=FBIntern.Utility.createFacebookUrl('www','swf/mvp.swf',{vid:this._vid,stage_width:this._width,stage_height:this._height},false),b=FB.Sys.format('\n<object width=\"{0}\" height=\"{1}\">\n<param name=\"movie\" value=\"{2}\"></param>\n<param name=\"allowFullScreen\" value=\"true\"></param>\n<param name=\"allowScriptAccess\" value=\"always\"></param>\n<embed src=\"{2}\" type=\"application/x-shockwave-flash\" allowScriptAccess=\"always\" allowFullScreen=\"true\" width=\"{0}\" height=\"{1}\"></embed>\n</object>',this._width,this._height,a);this.domElement.innerHTML=b;this.set_isReady(true);},_vid:null,_width:null,_height:null});
FB.subclass('FB.XFBML.Photo','FB.XFBML.Element',{init:function(a){this._super(a);},onProcess:function(){this._pid=FB.XFBML.ConnectUtility.normalizeInt64ForId(this.getAttribute('pid',null));if(!this._pid)throw new Error('No pid parameter was provided.');var a=this.getAttribute('size','normal'),b={thumb:'src_small',t:'src_small',small:'src',s:'src',normal:'src_big',n:'src_big'};this._srcFieldName=b[a];if(!this._srcFieldName)this._srcFieldName='src_big';this._data=FB.XFBML.Context.singleton.getFqlTable('photo','pid').selectByKey(['pid','caption',this._srcFieldName],this._pid);this.addDataToWait(this._data);},onDataReady:function(){var a=this._data.result;if(a){var b=FB.Sys.format('<img src=\'{0}\' alt=\'{1}\' title=\'{1}\' />',a[this._srcFieldName],a.caption);this.domElement.innerHTML=b;}this.set_isReady(true);},_data:null,_pid:null,_srcFieldName:null});
FB.subclass('FB.XFBML.GroupLink','FB.XFBML.Element',{init:function(a){this._super(a);},onProcess:function(){this._gid=FB.XFBML.ConnectUtility.normalizeInt64ForId(this.getAttribute('gid',null));if(!this._gid)throw new Error('No gid parameter');this._data=FB.XFBML.Context.singleton.getFqlTable('group','gid').selectByKey(['gid','name'],this._gid);this.addDataToWait(this._data);},onDataReady:function(){var a=this._data.result;if(a){var b={gid:a.gid},c=FBIntern.Utility.createFacebookUrl('www','group.php',b,true),d='<a href=\''+c+'\'>'+FB.Sys.htmlEncode(a.name)+'</a>';this.domElement.innerHTML=d;}this.set_isReady(true);},_data:null,_gid:null});
FB.subclass('FB.XFBML.EventLink','FB.XFBML.Element',{init:function(a){this._super(a);},onProcess:function(){this._eid=FB.XFBML.ConnectUtility.normalizeInt64ForId(this.getAttribute('eid',null));if(!this._eid)throw new Error('No eid parameter');this._data=FB.XFBML.Context.singleton.getFqlTable('event','eid').selectByKey(['eid','name'],this._eid);this.addDataToWait(this._data);},onDataReady:function(){var a=this._data.result;if(a){var b={eid:a.eid},c=FBIntern.Utility.createFacebookUrl('www','event.php',b,true),d='<a href=\''+c+'\'>'+FB.Sys.htmlEncode(a.name)+'</a>';this.domElement.innerHTML=d;}this.set_isReady(true);},_data:null,_eid:null});
FB.subclass('FB.XFBML.Pronoun','FB.XFBML.Name',{init:function(a){this._super(a);},onDataReady:function(){this.renderPronoun();this.set_isReady(true);}});
FB.subclass('FB.XFBML.Name','FB.XFBML.Element',{init:function(a){this._super(a);},onProcess:function(){this._uid=FB.XFBML.ConnectUtility.normalizeInt64ForId(this.getAttribute('uid',null));if(this._uid==='loggedinuser')if(FB.Facebook.apiClient.get_session()){this._uid=FB.Connect.get_loggedInUser();}else{FB.FBDebug.logLine(2,'Cannot use loggedinuser, there is no session');this._uid=null;return;}if(!this._uid){FB.FBDebug.logLine(2,'fb:name has no user id');return;}this._firstnameonly=this._getBoolAttribute('firstnameonly',false);this._lastnameonly=this._getBoolAttribute('lastnameonly',false);var a=[];if(this._firstnameonly){a.push('first_name');}else if(this._lastnameonly){a.push('last_name');}else a.push('name');this._possessive=this._getBoolAttribute('possessive',false);this._reflexive=this._getBoolAttribute('reflexive',false);this._objective=this._getBoolAttribute('objective',false);if(FB.Facebook.apiClient.get_session())this._shownetwork=this._getBoolAttribute('shownetwork',false);this._linked=this._getBoolAttribute('linked',true);if(this._shownetwork)FB.Sys.add(a,'affiliations');this._subjectId=FB.XFBML.ConnectUtility.normalizeInt64ForId(this.getAttribute('subjectid',null));if(this._subjectId){a.push('sex');if(FBIntern.Utility.id64BitEquals(this._subjectId,FB.Connect.get_loggedInUser()))this._reflexive=true;}var b,c=FB.XFBML.Context.singleton;if(FB.XFBML.ConnectUtility.isUser(this._uid)){b=c.getFqlTable('user','uid');}else{b=c.getFqlTable('profile','id');a=['name'];}this._data=b.selectByKey(a,this._uid);this.addDataToWait(this._data);},onDataReady:function(){if(this._uid)if(FBIntern.Utility.id64BitEquals(this._subjectId,this._uid)){this.renderPronoun();}else this._renderOther();this.set_isReady(true);},renderPronoun:function(){var a=this._data.result,b='',c=this._objective;if(this._subjectId){c=true;if(this._subjectId===this._uid)this._reflexive=true;}if((FBIntern.Utility.id64BitEquals(this._uid,FB.Connect.get_loggedInUser()))&&this._getBoolAttribute('useyou',true)){if(this._possessive){if(this._reflexive){b='your own';}else b='your';}else if(this._reflexive){b='yourself';}else b='you';}else switch(a.sex){case FB.XFBML.Common.Constants.gendeR_MALE_SINGULAR:if(this._possessive){b=(this._reflexive)?'his own':'his';}else if(this._reflexive){b='himself';}else if(c){b='him';}else b='he';break;case FB.XFBML.Common.Constants.gendeR_FEMALE_SINGULAR:if(this._possessive){b=(this._reflexive)?'her own':'her';}else if(this._reflexive){b='herself';}else if(c){b='her';}else b='she';break;default:if(this._getBoolAttribute('usethey',true)){if(this._possessive){if(this._reflexive){b='their own';}else b='their';}else if(this._reflexive){b='themselves';}else if(c){b='them';}else b='they';}else if(this._possessive){if(this._reflexive){b='his/her own';}else b='his/her';}else if(this._reflexive){b='himself/herself';}else if(c){b='him/her';}else b='he/she';break;}if(this._getBoolAttribute('capitalize',false))b=FB.XFBML.ConnectUtility.upperCaseFirstChar(b);this.domElement.innerHTML=b;},_renderOther:function(){var a=this._data.result;if(!a){FB.FBDebug.logLine(1,'no data available');return;}var b='',c='',d='';if(FBIntern.Utility.id64BitEquals(this._uid,FB.Connect.get_loggedInUser())&&this._getBoolAttribute('useyou',true)){if(this._reflexive){if(this._possessive){b='your own';}else b='yourself';}else if(this._possessive){b='your';}else b='you';}else{if(null===a.first_name)a.first_name='';if(null===a.last_name)a.last_name='';if(this._firstnameonly){b=a.first_name;}else if(this._lastnameonly)b=a.last_name;if(!b)b=a.name;if(b!==''&&this._possessive)b+='\'s';if(this._shownetwork)d=FB.XFBML.ConnectUtility.getNetworkInParentheses(a);}if(!b)b=this.getAttribute('ifcantsee','Facebook User');if(b){if(this._getBoolAttribute('capitalize',false))b=FB.XFBML.ConnectUtility.upperCaseFirstChar(b);if(this._linked){c=FB.XFBML.ConnectUtility._profileLink(a,b,this.getAttribute('href',null));}else c=b;}if(this._shownetwork)c+=' '+d;this.domElement.innerHTML=c;},_data:null,_subjectId:null,_uid:null,_possessive:false,_firstnameonly:false,_linked:false,_lastnameonly:false,_reflexive:false,_shownetwork:false,_objective:false});
FB.subclass('FB.XFBML.Host','FB.Class',{init:function(){}});FB.provide('FB.XFBML.Host',{_onLoad:function(){FB.XFBML.Host.autoParseDomTree=true;FB.XFBML.Host._fbmlElements=[];FB.XFBML.Host._registeredElements=null;FB.XFBML.Host._areElementsReady=new FB.SimpleWaitable();FB.XFBML.Host._readyElementsCount=0;FB.UI.DomResources.addResourceDict(new FB.UI.DomResDict('<a id=\"RES_ID_fb_login\" class=\"fbconnect_login_button\"></a><img id=\"RES_ID_fb_login_image\"  /><span id=\"RES_ID_fb_login_text\" class=\"FBConnectButton_Text\"></span>'));var a=[FB._create_ElementsRegistration('fb','login-button',FB.XFBML.LoginButton),FB._create_ElementsRegistration('fb','name',FB.XFBML.Name),FB._create_ElementsRegistration('fb','pronoun',FB.XFBML.Pronoun),FB._create_ElementsRegistration('fb','serverFbml',FB.XFBML.ServerFbml),FB._create_ElementsRegistration('fb','eventLink',FB.XFBML.EventLink),FB._create_ElementsRegistration('fb','groupLink',FB.XFBML.GroupLink),FB._create_ElementsRegistration('fb','photo',FB.XFBML.Photo),FB._create_ElementsRegistration('fb','video',FB.XFBML.Video),FB._create_ElementsRegistration('fb','unconnected-friends-count',FB.XFBML.UnconnectedFriendsCount),FB._create_ElementsRegistration('fb','container',FB.XFBML.ContainerElement),FB._create_ElementsRegistration('fb','user-status',FB.XFBML.UserStatus),FB._create_ElementsRegistration('fb','userLink',FB.XFBML.UserLink),FB._create_ElementsRegistration('fb','profile-pic',FB.XFBML.ProfilePic),FB._create_ElementsRegistration('fb','prompt-permission',FB.XFBML.PromptPermission),FB._create_ElementsRegistration('fb','share-button',FB.XFBML.ShareButton),FB._create_ElementsRegistration('fb','add-section-button',FB.XFBML.AddSectionButton),FB._create_ElementsRegistration('fb','comments',FB.XFBML.Comments),FB._create_ElementsRegistration('fb','live-stream',FB.XFBML.LiveStream),FB._create_ElementsRegistration('fb','pay',FB.XFBML.Pay),FB._create_ElementsRegistration('fb','bookmark',FB.XFBML.BookmarkButton),FB._create_ElementsRegistration('fb','add-profile-tab',FB.XFBML.ProfileTabButton),FB._create_ElementsRegistration('fb','fan',FB.XFBML.Fan)];FB.XFBML.Host._registeredElements=(a);},registerCustomTag:function(a,b,c){FB.Sys.add(FB.XFBML.Host._registeredElements,FB._create_ElementsRegistration(a,b,c));},_pruneFbmlElements:function(){var a=[],b=FB.XFBML.Host._fbmlElements.length;for(var c=0;c<b;c++){var d=FB.XFBML.Host._fbmlElements[c];if(d.isValid())FB.Sys.add(a,d);}FB.XFBML.Host._fbmlElements=a;},parseDomTree:function(){FB.XFBML.Host.parseDomElement(document.body);},parseDomElement:function(a){FB.XFBML.Data.CacheManager.get__initialized().waitUntilReady(function(b){FB.XFBML.Host._pruneFbmlElements();var c=[],d=new FB.ArrayEnumerator(FB.XFBML.Host._registeredElements);while(d.moveNext()){var e=d.get_current(),f=FB.XFBML.ConnectUtility.getElementsByTagNameNS(a,e.nameSpace,e.name),g='FB_'+e.name.replace(/-/g,'_');for(var h=0;h<f.length;h++){var i=FB.XFBML.Element.fromDomElement(f[h]);if(!i){if(!e.implementationType){FB.FBDebug.logLine(FB.Log.Level.ERROR,'Host.parseDomElement: XFBML tag '+g+' is not properly configured');continue;}i=new e.implementationType(f[h]);FB.UI.UIElement.addCssClass(f[h],g);FB.XFBML.Host._addElementToList(i);}FB.Sys.add(c,i);}}FB.XFBML.Host._readyElementsCount=0;FB.XFBML.Host._areElementsReady._setResult(false,true);FB.Connect.get_status().waitUntilReady(function(j){var k=c.length;for(var l=0;l<k;l++){var m=c[l];m.process();}});FB.XFBML.Host._logElements(c);});},_logElements:function(a){if(FB.Monitor&&FB.Monitor.loggingEnabled()){var b=a.length;for(var c=0;c<b;c++)FB.Monitor.logXFBML(a[c].domElement);}},refresh:function(){FB.XFBML.Host._pruneFbmlElements();var a=FB.XFBML.Host._fbmlElements.length;if(a>0){FB.FBDebug.logLine(2,'Host.Refresh: refresh all existing XFBML elements');FB.XFBML.Host._readyElementsCount=0;FB.XFBML.Host._areElementsReady._setResult(false,true);for(var b=0;b<a;b++){var c=FB.XFBML.Host._fbmlElements[b];c.refresh();}}},get_areElementsReady:function(){return FB.XFBML.Host._areElementsReady;},addElement:function(a){FB.Connect.get_status().waitUntilReady(function(b){FB.XFBML.Data.CacheManager.get__initialized().waitUntilReady(function(c){FB.XFBML.Host._addElementToList(a);a.process();});});},addElements:function(a){var b=new FB.ArrayEnumerator(a);while(b.moveNext()){var c=b.get_current();FB.XFBML.Host.addElement(c);}},_addElementToList:function(a){FB.Sys.add(FB.XFBML.Host._fbmlElements,a);if(a.get_isReady()){FB.XFBML.Host._readyElementsCount++;FB.XFBML.Host._checkReadyState();}else a.add_isReadyChanged(FB.XFBML.Host._elementIsReadyChanged);},_elementIsReadyChanged:function(a,b){(a).remove_isReadyChanged(FB.XFBML.Host._elementIsReadyChanged);FB.XFBML.Host._readyElementsCount++;FB.XFBML.Host._checkReadyState();},_checkReadyState:function(){var a=FB.XFBML.Host._readyElementsCount===FB.XFBML.Host._fbmlElements.length;if(a&&!FB.XFBML.Host._areElementsReady.get_isReady())FB.XFBML.Host._areElementsReady._setResult(true);}});
FB.subclass('FB.XFBML.Context','FB.Class',{init:function(){this.resources=new FB.XFBML.Resources.ResourceDict();this.fqlTables={};this._timerId=-1;this._connectStatus=FB.ConnectState.userNotLoggedIn;FB.Facebook.add_initCalled(FB.bind(function(){if(!this._initialized){this._initialized=true;this._connectStatus=FB.Connect.get_status().result;this._connectStatusReady=FB.Connect.get_status().get_isReady();FB.XFBML.Data.CacheManager._changeContext(FB.Connect.get_loggedInUser());FB.Connect.get_status().add_changed(FB.bind(this._onConnectStatusChanged,this));}if(FB.XFBML.Host.autoParseDomTree)FB.XFBML.Host.parseDomTree();},this));},requestBatchProcess:function(){if(this._timerId===-1)this._timerId=window.setTimeout(FB.bind(this._onTimer,this),0);},get_batchSequencer:function(){if(!this._batchSequencer){this._batchSequencer=new FB.BatchSequencer();this._batchSequencer.isParallel=true;this.requestBatchProcess();}return this._batchSequencer;},_onTimer:function(){FB.Connect.get_status().waitUntilReady(FB.bind(function(a){if(this.__beforeSendBatchRequest)this.__beforeSendBatchRequest();this._timerId=-1;if(this._batchSequencer){this._batchSequencer.execute(null);this._batchSequencer=null;}},this));},getFqlTable:function(a,b){var c=a+b,d=this.fqlTables[c];if(!d){d=new FB.XFBML.Data.FqlTable(a,b);this.fqlTables[c]=d;}return d;},get_unconnectedFriendsCount:function(){if(!this._unconnectedFriendsCount){this._unconnectedFriendsCount=new FB.PendingResult();FB.Connect.get_status().waitUntilReady(FB.bind(function(a){var b=FB.XFBML.Data.CacheManager._getValue('UnconnectedFriendsCount'),c=true;if(b){var d=(new Date()).getTime()-b.createTime;if(d<FB.XFBML.Data.CacheManager._maxUsableAge){this._unconnectedFriendsCount.setPendingResult(b.data,null);if(d<FB.XFBML.Data.CacheManager._refreshInternal)c=false;}}if(c){var e=FB.Facebook.apiClient.connect_getUnconnectedFriendsCount(this.get_batchSequencer());e.waitUntilReady(FB.bind(function(f){this._unconnectedFriendsCount.setPendingResult(e.result,e.exception);FB.XFBML.Data.CacheManager._setValue('UnconnectedFriendsCount',FB._create__cachedItem(e.result,(new Date()).getTime()));},this));}},this));}return this._unconnectedFriendsCount;},_onConnectStatusChanged:function(a){var b=FB.Connect.get_status().result;FB.XFBML.Data.CacheManager._changeContext(FB.Connect.get_loggedInUser());if(this._connectStatusReady&&b!==this._connectStatus&&b===FB.ConnectState.connected)this._onConnectStateChangedToConnected();this._connectStatusReady=FB.Connect.get_status().get_isReady();this._connectStatus=b;},_onConnectStateChangedToConnected:function(){FB.FBDebug.logLine(2,'Connect state changed from from ready but unconnected to ready and connected');this.fqlTables={};this._unconnectedFriendsCount=null;FB.XFBML.Host.refresh();},add_beforeSendBatchRequest:function(a){this.__beforeSendBatchRequest=FB.Delegate.combine(this.__beforeSendBatchRequest,a);},remove_beforeSendBatchRequest:function(a){this.__beforeSendBatchRequest=FB.Delegate.remove(this.__beforeSendBatchRequest,a);},__beforeSendBatchRequest:null,_batchSequencer:null,_unconnectedFriendsCount:null,_connectStatusReady:false,_initialized:false});FB.provide('FB.XFBML.Context',{_onLoad:function(){FB.XFBML.Context.singleton=null;FB.XFBML.Context.singleton=new FB.XFBML.Context();}});
FB.subclass('FB.XFBML.ConnectUtility','FB.Class',{init:function(){}});FB.provide('FB.XFBML.ConnectUtility',{upperCaseFirstChar:function(a){if(a.length>0){return a.substr(0,1).toUpperCase()+a.substr(1);}else return a;},getElementsByTagNameNS:function(a,b,c){var d=null,e=FBIntern.AppInfo.get_singleton().get_hostInfo(),f=e.get_hostName();if(f==FBIntern.HostName.MOZILLA){c=(b+':'+c).toLowerCase();d=a.getElementsByTagNameNS(document.body.namespaceURI,c);}else if(f==FBIntern.HostName.IE&&e.majorVersion<9){var g=document.namespaces;if(g&&FB.Sys.containsKey(g,b)){d=a.getElementsByTagName(c);}else{c=b+':'+c;d=a.getElementsByTagName(c);if(d&&d.length>0){var h='You appear to be using the XFBML tag '+c+' in your HTML markup. However, you are missing corresponding xmlns attribute in your <HTML> tag. That xmlns attribute is required in Internet Explorer. For example, to use XFBML tags with the \'fb\' namespace such as <fb:login-button></fb:login-button>, you must place xmlns:fb=\"http://ogp.me/ns/fb#\" in the <HTML> tag';FB.FBDebug.logLine(0,h);throw new Error(h);}}}else{c=b+':'+c;d=a.getElementsByTagName(c);}return d;},normalizeInt64ForId:function(a){if(a){var b=typeof(a);if(b==='string'&&(a).length<10)a=parseInt(a);}return a;},getNetworkInParentheses:function(a){var b=FBIntern.DataHelper.getPrimaryNetwork(a);if(!b)b=FB.XFBML.Context.singleton.resources.getResourceString('no_network');return '('+b+')';},isNameAvailable:function(a){return a&&!(FB.Sys.isNullOrEmpty(a.first_name)&&FB.Sys.isNullOrEmpty(a.last_name)&&FB.Sys.isNullOrEmpty(a.name));},_profileLink:function(a,b,c){if(!FBIntern.Utility.getSiteVar('enable_custom_href'))c=null;if(!c&&FB.XFBML.ConnectUtility.isNameAvailable(a))c=FBIntern.Utility.getNonConnectFacebookUrl('www')+'profile.php?id='+a.uid;if(c)b=FB.Sys.format(FB.XFBML.Context.singleton.resources.getResourceString('link'),c,b);return b;},isUser:function(a){return a<2.2e+09||(a>=1e+14&&a<=100099999989999)||(a>=8.9e+13&&a<=89999999999999);}});
FB.subclass('FB.XFBML.BookmarkButton','FB.XFBML.Element',{init:function(a){this._super(a);},onProcess:function(){if(FB.Facebook.apiClient.get_session()){this._uid=FB.Connect.get_loggedInUser();}else{FB.FBDebug.logLine(2,'Cannot show bookmark button, no logged in user');this._uid=null;return;}this._type=this.getAttribute('type','on-facebook');this._bookmarked=FB.XFBML.Context.singleton.getFqlTable('permissions','uid').selectByKey(['bookmarked'],this._uid);this.addDataToWait(this._bookmarked);},onDataReady:function(){if(this._uid&&this._bookmarked.result&&this._bookmarked.result.bookmarked==0){var a='',b='FB.Connect.showBookmarkDialog();return false;',c='',d='';if(this._type=='off-facebook'){c='class="FBConnectButton FBConnectButton_Medium"';d='<span class="FBConnectButton_Text">'+FBIntern.Intl.tx._("Bookmark on Facebook")+'</span>';}else{c='class="FB_UIButton FB_UIButton_Gray '+'FB_UIButton_CustomIcon UIActionButton"';d='<span class="FB_UIButton_Text">'+'<span class="FB_Bookmark_Icon" ></span>'+FBIntern.Intl.tx._("Add Bookmark")+'</span>';}a=FB.Sys.format('<a '+' {0} '+'onclick=\'{1}\' '+'target=\'_blank\'>{2}</a>',c,b,d);this.domElement.innerHTML=a;}this.set_isReady(true);}});
FB.subclass('FB.XFBML._permisionTable','FB.Class',{init:function(){this._calls={};},ifCanSee:function(a,b){var c=a+b,d,e=this._calls[c];if(!e){d=new FB.PendingResult();e={uid:a,what:b,result:d};this._calls[c]=e;var f=FB.XFBML.Context.singleton;if(!this._subscribedToEvent){f.add_beforeSendBatchRequest(FB.bind(this._beforeSendBatchRequest,this));this._subscribedToEvent=true;}f.requestBatchProcess();}else d=e.result;return d;},_beforeSendBatchRequest:function(){var a=[],b=[],c=[],d=this._calls;for(var e in d){var f={key:e,value:d[e]},g=f.value;FB.Sys.add(a,g.uid);FB.Sys.add(b,g.what);FB.Sys.add(c,g.result);}this._calls={};var h=FB.Facebook.apiClient.privacy_canSee(a,b,FB.XFBML.Context.singleton.get_batchSequencer());h.waitUntilReady(FB.bind(function(i){var j=c.length,k=h.result;if(k){FB.FBDebug.assert(j===k.length,'Returns results does not contains the exepcted number of items');for(var l=0;l<j;l++)(c[l]).setPendingResult(k[l],h.exception);}else for(var l=0;l<j;l++)(c[l]).setPendingResult(null,h.exception);},this));},_subscribedToEvent:false});
FB.subclass('FB.XFBML.Conditions','FB.Class',{init:function(){}});FB.provide('FB.XFBML.Conditions',{_onLoad:function(){FB.XFBML.Conditions._table=new FB.XFBML._permisionTable();},ifCanSee:function(a,b){return FB.XFBML.Conditions._table.ifCanSee(a,b);}});
FB.provide('FB.XFBML.OperatorType',{and:0,or:1,xor:2,not:3,greaterThan:4,lessThan:5,equals:6});
FB.subclass('FB.XFBML.Operator','FB.DependentWaitable',{init:function(a,b){this._super();this._op=a;this._operands=b;var c=new FB.ArrayEnumerator(b);while(c.moveNext()){var d=c.get_current();if(FB.Sys.isAssignableFrom(FB.Type.getInstanceType(d),FB.Waitable))this.addDependent(d);}},onChange:function(){this._evaluate();this._super();},_evaluate:function(){switch(this._op){case FB.XFBML.OperatorType.and:this.result=this._getOperandValue(0)&&this._getOperandValue(1);break;case FB.XFBML.OperatorType.not:this.result=!this._getOperandValue(0);break;case FB.XFBML.OperatorType.or:this.result=this._getOperandValue(0)||this._getOperandValue(1);break;case FB.XFBML.OperatorType.xor:this.result=this._getOperandValue(0)^this._getOperandValue(1);break;case FB.XFBML.OperatorType.greaterThan:this.result=this._getOperandValue(0)>this._getOperandValue(1);break;case FB.XFBML.OperatorType.lessThan:this.result=this._getOperandValue(0)<this._getOperandValue(1);break;case FB.XFBML.OperatorType.equals:this.result=this._getOperandValue(0)===this._getOperandValue(1);break;}},_getOperandValue:function(a){var b=this._operands[a];if(FB.Sys.isAssignableFrom(FB.Type.getInstanceType(b),FB.Waitable)){return (b).result;}else return b;},_op:0,_operands:null});FB.provide('FB.XFBML.Operator',{and:function(a,b){return new FB.XFBML.Operator(FB.XFBML.OperatorType.and,[a,b]);},or:function(a,b){return new FB.XFBML.Operator(FB.XFBML.OperatorType.or,[a,b]);},xor:function(a,b){return new FB.XFBML.Operator(FB.XFBML.OperatorType.xor,[a,b]);},not:function(a){return new FB.XFBML.Operator(FB.XFBML.OperatorType.not,[a]);},greaterThan:function(a,b){return new FB.XFBML.Operator(FB.XFBML.OperatorType.greaterThan,[a,b]);},lessThan:function(a,b){return new FB.XFBML.Operator(FB.XFBML.OperatorType.lessThan,[a,b]);},equals:function(a,b){return new FB.XFBML.Operator(FB.XFBML.OperatorType.equals,[a,b]);}});
FB.subclass('FBIntern.LoginStatus','FB.Class',{initialize:function(a,b,c,d,e,f,g,h,i,j){c.inFacebook=this._checkIfInFacebook();if(!this._rpcClient){var k=new FB.XdComm.EndPoint(null,FB.XdComm.PageRelation.parent,a);if(FB.Sys.isNullOrEmpty(g)){FB.FBDebug.logLine(1,'Disable use of postMessage because '+'parent_window_url parameter is null or empty therefore we cannot '+'securely send message using postMessage');FBIntern.Utility.setSiteVar('use_postMessage',false);}else k.origin=g;k.flashOrigin=h;this._rpcClient=new FB.XdComm.XdRpcClient('loginServer','loginStatus',k);}var l={baseDomain:e,connectState:d,perms:i,publicSessionData:f,session:b,settings:c,https:j};this._rpcClient.send('InitLogin',l,null);},_checkIfInFacebook:function(){var a=false;try{var c=window.top.location.href.split("/")[2],d=c.lastIndexOf('facebook.com');a=(d!==-1)&&(d+12)===c.length;}catch(b){}return a;},_rpcClient:null});
FB.Integration=FB.Connect;


if (FB && FB.Loader) { FB.Loader.loadCssComps(["bookmark-button-css","connect-button-css","share-button-css","FB.Connect-css"]); }
if (FB && FB.Loader) { FB.Loader.onScriptLoaded(["FB.monitor-wrapper","FB.Prelude","FB.Class","FB.Log","FB.Type","FB.FBDebug","FB.XdComm._packetType","FB.Sys","FB.StringBuilder","FB.XdComm._fragDataHolder","FB.ArrayEnumerator","FB.XdComm._packet","FB.JSON","FB.XdComm.PageRelation","FBIntern.HostName","FBIntern.HostInfo","FBIntern.AppInfo","FBIntern.FbGlobals","FBIntern.Uri","FB.Point","FB.Size","FBIntern.Utility","FB.Delegate","FB.Loader","FB.Bootstrap","FB.Waitable","FB.SimpleWaitable","FBIntern.Flash","FB.Enum","FB.XdComm.PacketDataFormat","FB.HiddenContainer","FB.XdComm._receiveChannel","FB.XdComm.EndPoint","FB.XdComm._sendChannel","FB.XdComm.Server","FBIntern.Cookie","FB.XdHttpRequestResult","FB._xdHttpRequestClient","FB.SessionRecord","FB._xdJsonRequest","FB.PendingResult","FB.ApiErrorCode","FBIntern.Md5","FB.Facebook","FB.ApiClient","FB.ConnectState","FB.DialogType","FB.XdComm.XdRpcClient","FB.XdComm.XdRpcMethodInfo","FB.XdComm.XdRpcServer","FB._contentSizeMethod","FB.CanvasClient","FB.IFrameUtil._resizeUtil","FB.IFrameUtil._canvasUtil","FB.IFrameUtil.CanvasUtilServer","FB.IFrameUtil.ResizeUtilServer","FBIntern.Intl","FB.UI.UIElement","FB.UI.PopupPlacement","FB.UI.Popup","FB.UI.DomResources","FBIntern.UIHelper","FB.UI.PopupDialog","FB.FeedStorySetting","FB.UserInfoRecord","FB.RequireConnect","FB.UI.DomResDict","FB.Helper","FB.UI.FBMLPopupDialog","FB.FeedStorySize","FB.SequencerBase","FB._stepInfo","FB.BatchSequencer","FB.ImmediateSequencer","FB.FeedDialogInfo","FB.SessionDialog","FB.Connect","FB.monitor-sender","FB.XdHttpRequestServer","FB.XFBML.Data.CacheManager","FB.XFBML.Data._fqlCache","FB.XFBML.Data._cachedItem","FB.DependentWaitable","FB.XFBML._elementState","FB.XFBML.Element","FB.XFBML.Common.Constants","FB.XFBML.ElementsRegistration","FB.XFBML.LoginButton","FB.XFBML.ServerFbml","FB.XFBML.ContainerElement","FB.XFBML.AddSectionButton","FB.XFBML.Comments","FB.XFBML.LiveStream","FB.Payments","FB.XFBML.Pay","FB.XFBML.Fan","FB.XFBML.Resources.ResourceDict","FBIntern.DataHelper","FB.XFBML.Data.FqlTable","FB.XFBML.ProfileTabButton","FB.XFBML.ShareButton","FB.XFBML.PromptPermission","FB.XFBML.ProfilePic","FB.XFBML.UserLink","FB.XFBML.UserStatus","FB.XFBML.UnconnectedFriendsCount","FB.XFBML.Video","FB.XFBML.Photo","FB.XFBML.GroupLink","FB.XFBML.EventLink","FB.XFBML.Pronoun","FB.XFBML.Name","FB.XFBML.Host","FB.XFBML.Context","FB.XFBML.ConnectUtility","FB.XFBML.BookmarkButton","FB.XFBML._permisionTable","FB.XFBML.Conditions","FB.XFBML.OperatorType","FB.XFBML.Operator","FBIntern.LoginStatus","connect-old-features"]); }